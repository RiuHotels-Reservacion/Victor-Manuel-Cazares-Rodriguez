/*!
 * Copyright (c) 2020 Acoustic, L.P. All rights reserved.
 *
 * NOTICE: This file contains material that is confidential and proprietary to
 * Acoustic, L.P. and/or other developers. No license is granted under any intellectual or
 * industrial property rights of Acoustic, L.P. except as may be provided in an agreement with
 * Acoustic, L.P. Any unauthorized copying or distribution of content from this file is
 * prohibited.
 *
 * @version 6.0.0.1960
 * @flags w3c,NDEBUG
 * FECHA: 2020-11-18
 */
if(window.pako||function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=t()}((function(){return function i(s,h,l){function o(e,t){if(!h[e]){if(!s[e]){var a="function"==typeof require&&require;if(!t&&a)return a(e,!0);if(_)return _(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=h[e]={exports:{}};s[e][0].call(r.exports,(function(t){return o(s[e][1][t]||t)}),r,r.exports,i,s,h,l)}return h[e].exports}for(var _="function"==typeof require&&require,t=0;t<l.length;t++)o(l[t]);return o}({1:[function(t,e,a){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(t){for(var e,a,n=Array.prototype.slice.call(arguments,1);n.length;){var r=n.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)e=r,a=i,Object.prototype.hasOwnProperty.call(e,a)&&(t[i]=r[i])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,a,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(a,a+n),r);else for(var i=0;i<n;i++)t[r+i]=e[a+i]},flattenChunks:function(t){var e,a,n,r,i,s;for(e=n=0,a=t.length;e<a;e++)n+=t[e].length;for(s=new Uint8Array(n),e=r=0,a=t.length;e<a;e++)i=t[e],s.set(i,r),r+=i.length;return s}},i={arraySet:function(t,e,a,n,r){for(var i=0;i<n;i++)t[r+i]=e[a+i]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,r)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,i))},a.setTyped(n)},{}],2:[function(t,e,a){"use strict";var l=t("./common"),r=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){i=!1}for(var o=new l.Buf8(256),n=0;n<256;n++)o[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function _(t,e){if(e<65534&&(t.subarray&&i||!t.subarray&&r))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var a="",n=0;n<e;n++)a+=String.fromCharCode(t[n]);return a}o[254]=o[254]=1,a.string2buf=function(t){var e,a,n,r,i,s=t.length,h=0;for(r=0;r<s;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),h+=a<128?1:a<2048?2:a<65536?3:4;for(e=new l.Buf8(h),r=i=0;i<h;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?e[i++]=a:(a<2048?e[i++]=192|a>>>6:(a<65536?e[i++]=224|a>>>12:(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63),e[i++]=128|a>>>6&63),e[i++]=128|63&a);return e},a.buf2binstring=function(t){return _(t,t.length)},a.binstring2buf=function(t){for(var e=new l.Buf8(t.length),a=0,n=e.length;a<n;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,n,r,i,s=e||t.length,h=new Array(2*s);for(a=n=0;a<s;)if((r=t[a++])<128)h[n++]=r;else if(4<(i=o[r]))h[n++]=65533,a+=i-1;else{for(r&=2===i?31:3===i?15:7;1<i&&a<s;)r=r<<6|63&t[a++],i--;1<i?h[n++]=65533:r<65536?h[n++]=r:(r-=65536,h[n++]=55296|r>>10&1023,h[n++]=56320|1023&r)}return _(h,n)},a.utf8border=function(t,e){var a;for((e=e||t.length)>t.length&&(e=t.length),a=e-1;0<=a&&128==(192&t[a]);)a--;return a<0?e:0===a?e:a+o[t[a]]>e?a:e}},{"./common":1}],3:[function(t,e,a){"use strict";e.exports=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){for(a-=s=2e3<a?2e3:a;i=i+(r=r+e[n++]|0)|0,--s;);r%=65521,i%=65521}return r|i<<16|0}},{}],4:[function(t,e,a){"use strict";var h=function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}();e.exports=function(t,e,a,n){var r=h,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t}},{}],5:[function(t,e,a){"use strict";var l,u=t("../utils/common"),o=t("./trees"),f=t("./adler32"),c=t("./crc32"),n=t("./messages"),_=0,d=4,p=0,g=-2,m=-1,b=4,r=2,v=8,w=9,i=286,s=30,h=19,y=573,k=15,z=3,x=258,B=262,A=42,C=113,S=1,j=2,E=3,U=4;function D(t,e){return t.msg=n[e],e}function I(t){return(t<<1)-(4<t?9:0)}function O(t){for(var e=t.length;0<=--e;)t[e]=0}function q(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(u.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function T(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,q(t.strm)}function L(t,e){t.pending_buf[t.pending++]=e}function N(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function R(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,h=t.nice_match,l=t.strstart>t.w_size-B?t.strstart-(t.w_size-B):0,o=t.window,_=t.w_mask,d=t.prev,u=t.strstart+x,f=o[i+s-1],c=o[i+s];t.prev_length>=t.good_match&&(r>>=2),h>t.lookahead&&(h=t.lookahead);do{if(o[(a=e)+s]===c&&o[a+s-1]===f&&o[a]===o[i]&&o[++a]===o[i+1]){i+=2,a++;do{}while(o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&i<u);if(n=x-(u-i),i=u-x,s<n){if(t.match_start=e,h<=(s=n))break;f=o[i+s-1],c=o[i+s]}}}while((e=d[e&_])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead}function H(t){var e,a,n,r,i,s,h,l,o,_,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-B)){for(u.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;n=t.head[--e],t.head[e]=d<=n?n-d:0,--a;);for(e=a=d;n=t.prev[--e],t.prev[e]=d<=n?n-d:0,--a;);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,h=t.window,l=t.strstart+t.lookahead,_=void 0,(o=r)<(_=s.avail_in)&&(_=o),a=0===_?0:(s.avail_in-=_,u.arraySet(h,s.input,s.next_in,_,l),1===s.state.wrap?s.adler=f(s.adler,h,_,l):2===s.state.wrap&&(s.adler=c(s.adler,h,_,l)),s.next_in+=_,s.total_in+=_,_),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+3-1])&t.hash_mask,t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<B&&0!==t.strm.avail_in)}function F(t,e){for(var a,n;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-B&&(t.match_length=R(t,a)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(T(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(T(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(T(t,!1),0===t.strm.avail_out)?1:2}function K(t,e){for(var a,n,r;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-B&&(t.match_length=R(t,a),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(T(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&T(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(T(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(T(t,!1),0===t.strm.avail_out)?1:2}function M(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}function P(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*y),this.dyn_dtree=new u.Buf16(122),this.bl_tree=new u.Buf16(78),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(16),this.heap=new u.Buf16(573),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(573),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?A:C,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):D(t,g)}function J(t){var e,a=G(t);return 0===a&&((e=t.state).window_size=2*e.w_size,O(e.head),e.max_lazy_match=l[e.level].max_lazy,e.good_match=l[e.level].good_length,e.nice_match=l[e.level].nice_length,e.max_chain_length=l[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a}function Q(t,e,a,n,r,i){if(!t)return g;var s=1;if(e===m&&(e=6),n<0?(s=0,n=-n):15<n&&(s=2,n-=16),r<1||9<r||8!==a||n<8||15<n||e<0||9<e||i<0||4<i)return D(t,g);8===n&&(n=9);var h=new P;return(t.state=h).strm=t,h.wrap=s,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=r+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new u.Buf8(2*h.w_size),h.head=new u.Buf16(h.hash_size),h.prev=new u.Buf16(h.w_size),h.lit_bufsize=1<<r+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new u.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=i,h.method=a,J(t)}l=[new M(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(H(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,T(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-B&&(T(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(T(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(T(t,!1),t.strm.avail_out),1)})),new M(4,4,8,4,F),new M(4,5,16,8,F),new M(4,6,32,32,F),new M(4,4,16,16,K),new M(8,16,32,32,K),new M(8,16,128,128,K),new M(8,32,128,256,K),new M(32,128,258,1024,K),new M(32,258,258,4096,K)],a.deflateInit=function(t,e){return Q(t,e,8,15,8,0)},a.deflateInit2=Q,a.deflateReset=J,a.deflateResetKeep=G,a.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,0):g},a.deflate=function(t,e){var a,n,r,i;if(!t||!t.state||5<e||e<0)return t?D(t,g):g;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||666===n.status&&4!==e)return D(t,0===t.avail_out?-5:g);if(n.strm=t,a=n.last_flush,n.last_flush=e,n.status===A)if(2===n.wrap)t.adler=0,L(n,31),L(n,139),L(n,8),n.gzhead?(L(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),L(n,255&n.gzhead.time),L(n,n.gzhead.time>>8&255),L(n,n.gzhead.time>>16&255),L(n,n.gzhead.time>>24&255),L(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),L(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(L(n,255&n.gzhead.extra.length),L(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=c(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(L(n,0),L(n,0),L(n,0),L(n,0),L(n,0),L(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),L(n,3),n.status=C);else{var s=8+(n.w_bits-8<<4)<<8;s|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(s|=32),s+=31-s%31,n.status=C,N(n,s),0!==n.strstart&&(N(n,t.adler>>>16),N(n,65535&t.adler)),t.adler=1}if(69===n.status)if(n.gzhead.extra){for(r=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>r&&(t.adler=c(t.adler,n.pending_buf,n.pending-r,r)),q(t),r=n.pending,n.pending!==n.pending_buf_size));)L(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>r&&(t.adler=c(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(t.adler=c(t.adler,n.pending_buf,n.pending-r,r)),q(t),r=n.pending,n.pending===n.pending_buf_size)){i=1;break}L(n,i=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0)}while(0!==i);n.gzhead.hcrc&&n.pending>r&&(t.adler=c(t.adler,n.pending_buf,n.pending-r,r)),0===i&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(t.adler=c(t.adler,n.pending_buf,n.pending-r,r)),q(t),r=n.pending,n.pending===n.pending_buf_size)){i=1;break}L(n,i=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0)}while(0!==i);n.gzhead.hcrc&&n.pending>r&&(t.adler=c(t.adler,n.pending_buf,n.pending-r,r)),0===i&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&q(t),n.pending+2<=n.pending_buf_size&&(L(n,255&t.adler),L(n,t.adler>>8&255),t.adler=0,n.status=C)):n.status=C),0!==n.pending){if(q(t),0===t.avail_out)return n.last_flush=-1,0}else if(0===t.avail_in&&I(e)<=I(a)&&4!==e)return D(t,-5);if(666===n.status&&0!==t.avail_in)return D(t,-5);if(0!==t.avail_in||0!==n.lookahead||0!==e&&666!==n.status){var h=2===n.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(H(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,a=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(T(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(T(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(T(t,!1),0===t.strm.avail_out)?1:2}(n,e):3===n.strategy?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=x){if(H(t),t.lookahead<=x&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+x;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=x-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(T(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(T(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(T(t,!1),0===t.strm.avail_out)?1:2}(n,e):l[n.level].func(n,e);if(3!==h&&4!==h||(n.status=666),1===h||3===h)return 0===t.avail_out&&(n.last_flush=-1),0;if(2===h&&(1===e?o._tr_align(n):5!==e&&(o._tr_stored_block(n,0,0,!1),3===e&&(O(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),q(t),0===t.avail_out))return n.last_flush=-1,0}return 4!==e?0:n.wrap<=0?1:(2===n.wrap?(L(n,255&t.adler),L(n,t.adler>>8&255),L(n,t.adler>>16&255),L(n,t.adler>>24&255),L(n,255&t.total_in),L(n,t.total_in>>8&255),L(n,t.total_in>>16&255),L(n,t.total_in>>24&255)):(N(n,t.adler>>>16),N(n,65535&t.adler)),q(t),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?0:1)},a.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==A&&69!==e&&73!==e&&91!==e&&103!==e&&e!==C&&666!==e?D(t,g):(t.state=null,e===C?D(t,-3):0):g},a.deflateSetDictionary=function(t,e){var a,n,r,i,s,h,l,o,_=e.length;if(!t||!t.state)return g;if(2===(i=(a=t.state).wrap)||1===i&&a.status!==A||a.lookahead)return g;for(1===i&&(t.adler=f(t.adler,e,_,0)),a.wrap=0,_>=a.w_size&&(0===i&&(O(a.head),a.strstart=0,a.block_start=0,a.insert=0),o=new u.Buf8(a.w_size),u.arraySet(o,e,_-a.w_size,a.w_size,0),e=o,_=a.w_size),s=t.avail_in,h=t.next_in,l=t.input,t.avail_in=_,t.next_in=0,t.input=e,H(a);a.lookahead>=3;){for(n=a.strstart,r=a.lookahead-2;a.ins_h=(a.ins_h<<a.hash_shift^a.window[n+3-1])&a.hash_mask,a.prev[n&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=n,n++,--r;);a.strstart=n,a.lookahead=2,H(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,t.next_in=h,t.input=l,t.avail_in=s,a.wrap=i,0},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(t,e,a){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(t,e,a){"use strict";var l=t("../utils/common"),h=0,o=1;function n(t){for(var e=t.length;0<=--e;)t[e]=0}var _=0,s=29,d=256,u=286,f=30,c=19,g=573,m=15,r=16,p=7,b=256,v=16,w=17,y=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=new Array(576);n(A);var C=new Array(60);n(C);var S=new Array(512);n(S);var j=new Array(256);n(j);var E=new Array(s);n(E);var U,D,I,O=new Array(f);function q(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function i(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function T(t){return t<256?S[t]:S[256+(t>>>7)]}function L(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function N(t,e,a){t.bi_valid>r-a?(t.bi_buf|=e<<t.bi_valid&65535,L(t,t.bi_buf),t.bi_buf=e>>r-t.bi_valid,t.bi_valid+=a-r):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function R(t,e,a){N(t,a[2*e],a[2*e+1])}function H(t,e){for(var a=0;a|=1&t,t>>>=1,a<<=1,0<--e;);return a>>>1}function F(t,e,a){var n,r,i=new Array(16),s=0;for(n=1;n<=m;n++)i[n]=s=s+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=H(i[h]++,h))}}function K(t){var e;for(e=0;e<u;e++)t.dyn_ltree[2*e]=0;for(e=0;e<f;e++)t.dyn_dtree[2*e]=0;for(e=0;e<c;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?L(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function P(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]}function G(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&P(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!P(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n}function J(t,e,a){var n,r,i,s,h=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*h]<<8|t.pending_buf[t.d_buf+2*h+1],r=t.pending_buf[t.l_buf+h],h++,0===n?R(t,r,e):(R(t,(i=j[r])+d+1,e),0!==(s=k[i])&&N(t,r-=E[i],s),R(t,i=T(--n),a),0!==(s=z[i])&&N(t,n-=O[i],s)),h<t.last_lit;);R(t,b,e)}function Q(t,e){var a,n,r,i=e.dyn_tree,s=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=g,a=0;a<l;a++)0!==i[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)i[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=s[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;1<=a;a--)G(t,i,a);for(r=l;a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],G(t,i,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,i[2*r]=i[2*a]+i[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,i[2*a+1]=i[2*n+1]=r,t.heap[1]=r++,G(t,i,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,i,s,h,l=e.dyn_tree,o=e.max_code,_=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,c=e.stat_desc.max_length,p=0;for(i=0;i<=m;i++)t.bl_count[i]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<g;a++)c<(i=l[2*l[2*(n=t.heap[a])+1]+1]+1)&&(i=c,p++),l[2*n+1]=i,o<n||(t.bl_count[i]++,s=0,f<=n&&(s=u[n-f]),h=l[2*n],t.opt_len+=h*(i+s),d&&(t.static_len+=h*(_[2*n+1]+s)));if(0!==p){do{for(i=c-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[c]--,p-=2}while(0<p);for(i=c;0!==i;i--)for(n=t.bl_count[i];0!==n;)o<(r=t.heap[--a])||(l[2*r+1]!==i&&(t.opt_len+=(i-l[2*r+1])*l[2*r],l[2*r+1]=i),n--)}}(t,e),F(i,o,t.bl_count)}function V(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,o=4;for(0===s&&(l=138,o=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++h<l&&r===s||(h<o?t.bl_tree[2*r]+=h:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):h<=10?t.bl_tree[34]++:t.bl_tree[36]++,i=r,(h=0)===s?(l=138,o=3):r===s?(l=6,o=3):(l=7,o=4))}function W(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,o=4;for(0===s&&(l=138,o=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++h<l&&r===s)){if(h<o)for(;R(t,r,t.bl_tree),0!=--h;);else 0!==r?(r!==i&&(R(t,r,t.bl_tree),h--),R(t,v,t.bl_tree),N(t,h-3,2)):h<=10?(R(t,w,t.bl_tree),N(t,h-3,3)):(R(t,y,t.bl_tree),N(t,h-11,7));i=r,(h=0)===s?(l=138,o=3):r===s?(l=6,o=3):(l=7,o=4)}}n(O);var X=!1;function Y(t,e,a,n){var r,i,s,h;N(t,0+(n?1:0),3),i=e,s=a,h=!0,M(r=t),L(r,s),L(r,~s),l.arraySet(r.pending_buf,r.window,i,s,r.pending),r.pending+=s}a._tr_init=function(t){X||(function(){var t,e,a,n,r,i=new Array(16);for(n=a=0;n<28;n++)for(E[n]=a,t=0;t<1<<k[n];t++)j[a++]=n;for(j[a-1]=n,n=r=0;n<16;n++)for(O[n]=r,t=0;t<1<<z[n];t++)S[r++]=n;for(r>>=7;n<f;n++)for(O[n]=r<<7,t=0;t<1<<z[n]-7;t++)S[256+r++]=n;for(e=0;e<=m;e++)i[e]=0;for(t=0;t<=143;)A[2*t+1]=8,t++,i[8]++;for(;t<=255;)A[2*t+1]=9,t++,i[9]++;for(;t<=279;)A[2*t+1]=7,t++,i[7]++;for(;t<=287;)A[2*t+1]=8,t++,i[8]++;for(F(A,287,i),t=0;t<f;t++)C[2*t+1]=5,C[2*t]=H(t,5);U=new q(A,k,257,u,m),D=new q(C,z,0,f,m),I=new q(new Array(0),x,0,c,7)}(),X=!0),t.l_desc=new i(t.dyn_ltree,U),t.d_desc=new i(t.dyn_dtree,D),t.bl_desc=new i(t.bl_tree,I),t.bi_buf=0,t.bi_valid=0,K(t)},a._tr_stored_block=Y,a._tr_flush_block=function(t,e,a,n){var r,i,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<d;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),Q(t,t.l_desc),Q(t,t.d_desc),s=function(t){var e;for(V(t,t.dyn_ltree,t.l_desc.max_code),V(t,t.dyn_dtree,t.d_desc.max_code),Q(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*B[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(i=t.static_len+3+7>>>3)<=r&&(r=i)):r=i=a+5,a+4<=r&&-1!==e?Y(t,e,a,n):4===t.strategy||i===r?(N(t,2+(n?1:0),3),J(t,A,C)):(N(t,4+(n?1:0),3),function(t,e,a,n){var r;for(N(t,e-257,5),N(t,a-1,5),N(t,n-4,4),r=0;r<n;r++)N(t,t.bl_tree[2*B[r]+1],3);W(t,t.dyn_ltree,e-1),W(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),J(t,t.dyn_ltree,t.dyn_dtree)),K(t),n&&M(t)},a._tr_tally=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(j[a]+d+1)]++,t.dyn_dtree[2*T(e)]++),t.last_lit===t.lit_bufsize-1},a._tr_align=function(t){var e;N(t,2,3),R(t,b,A),16===(e=t).bi_valid?(L(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":1}],8:[function(t,e,a){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/deflate.js":[function(t,e,a){"use strict";var s=t("./zlib/deflate"),h=t("./utils/common"),l=t("./utils/strings"),r=t("./zlib/messages"),i=t("./zlib/zstream"),o=Object.prototype.toString,_=0,d=-1,u=0,f=8;function c(t){if(!(this instanceof c))return new c(t);this.options=h.assign({level:d,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var a=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==a)throw new Error(r[a]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(n="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===o.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(a=s.deflateSetDictionary(this.strm,n)))throw new Error(r[a]);this._dict_set=!0}}function n(t,e){var a=new c(e);if(a.push(t,!0),a.err)throw a.msg||r[a.err];return a.result}c.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?r.input=l.string2buf(t):"[object ArrayBuffer]"===o.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new h.Buf8(i),r.next_out=0,r.avail_out=i),1!==(a=s.deflate(r,n))&&0!==a)return this.onEnd(a),!(this.ended=!0);0!==r.avail_out&&(0!==r.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(l.buf2binstring(h.shrinkBuf(r.output,r.next_out))):this.onData(h.shrinkBuf(r.output,r.next_out)))}while((0<r.avail_in||0===r.avail_out)&&1!==a);return 4===n?(a=s.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,0===a):2!==n||(this.onEnd(0),!(r.avail_out=0))},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=c,a.deflate=n,a.deflateRaw=function(t,e){return(e=e||{}).raw=!0,n(t,e)},a.gzip=function(t,e){return(e=e||{}).gzip=!0,n(t,e)}},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")})),window.TLT)throw"Attempting to recreate TLT. Library may be included more than once on the page.";window.TLT=function(){"use strict";var ajaxService,browserBaseService,browserService,configService,domCaptureService,queueService,serializerService,coreConfig,registeredPageshowListener,utils;function pageshowListener(event){window.TLT&&event.persisted&&(TLT.terminationReason="",TLT.init())}function logScreenview(type,name,referrerName,root){var dcid=null,screenviewMsg=null,replay=TLT.getModule("replay"),cookieModule=TLT.getModule("TLCookie"),performanceModule=TLT.getModule("performance"),webEvent=null,urlInfo=utils.getOriginAndPath();name&&"string"==typeof name&&(referrerName&&"string"==typeof referrerName||(referrerName=""),screenviewMsg={type:2,screenview:{type:type,name:name,originalUrl:urlInfo.path,url:TLT.normalizeUrl(urlInfo.path),host:urlInfo.origin,referrer:referrerName,title:document.title,queryParams:urlInfo.queryParams}},"LOAD"===type?webEvent={type:"screenview_load",name:name}:"UNLOAD"===type&&(webEvent={type:"screenview_unload",name:name}),webEvent&&replay&&(dcid=replay.onevent(webEvent)),dcid&&(screenviewMsg.dcid=dcid),"LOAD"!==type&&"UNLOAD"!==type||queueService.post("",screenviewMsg),webEvent&&cookieModule&&cookieModule.onevent(webEvent),webEvent&&performanceModule&&performanceModule.onevent(webEvent))}var tltStartTime=(new Date).getTime(),tltPageId,tltTabId,tltSessionCookieInfo={},modules={},services={},initialized=!1,state=null,isFrameBlacklisted=function(){var blacklistedFrames,checkedFrames=[];function prepareBlacklistedFrames(scope){var blacklist=coreConfig.framesBlacklist,foundFrames,i;if(blacklistedFrames=blacklistedFrames||[],scope=scope||null,void 0!==blacklist&&blacklist.length>0){for(i=0;i<blacklist.length;i+=1)(foundFrames=browserService.queryAll(blacklist[i],scope))&&foundFrames.length>0&&(blacklistedFrames=blacklistedFrames.concat(foundFrames));checkedFrames=checkedFrames.concat(browserService.queryAll("iframe",scope))}}function _isFrameBlacklisted(iframe){return utils.indexOf(checkedFrames,iframe)<0&&prepareBlacklistedFrames(iframe.ownerDocument),utils.indexOf(blacklistedFrames,iframe)>-1}return _isFrameBlacklisted.clearCache=function(){blacklistedFrames=null},_isFrameBlacklisted}(),lastClickedElement=null,servicePassthroughs={config:["getConfig","updateConfig","getCoreConfig","updateCoreConfig","getModuleConfig","updateModuleConfig","getServiceConfig","updateServiceConfig"],queue:["post","setAutoFlush","flushAll"],browserBase:["getXPathFromNode","processDOMEvent"]},loadUnloadHandler=(status={},{normalizeModuleEvents:function(moduleName,moduleEvents,localTop,documentScope){var modStatus=status[moduleName],load=!1,unload=!1;localTop=localTop||core._getLocalTop(),modStatus||(status[moduleName]={loadFired:!1,pageHideFired:!1},utils.forEach(moduleEvents,(function(eventConfig){switch(eventConfig.name){case"load":load=!0,moduleEvents.push(utils.mixin(utils.mixin({},eventConfig),{name:"pageshow"}));break;case"unload":unload=!0,moduleEvents.push(utils.mixin(utils.mixin({},eventConfig),{name:"pagehide"})),moduleEvents.push(utils.mixin(utils.mixin({},eventConfig),{name:"beforeunload"}));break;case"change":utils.isLegacyIE&&"w3c"===core.getFlavor()&&moduleEvents.push(utils.mixin(utils.mixin({},eventConfig),{name:"propertychange"}))}})),load||unload?(status[moduleName].silentLoad=!load,status[moduleName].silentUnload=!unload,load||moduleEvents.push({name:"load",target:localTop}),unload||moduleEvents.push({name:"unload",target:localTop})):delete status[moduleName])},canPublish:function(moduleName,event){var mod;if(!1===status.hasOwnProperty(moduleName))return!0;switch(mod=status[moduleName],event.type){case"load":return mod.pageHideFired=!1,mod.loadFired=!0,!mod.silentLoad;case"pageshow":return mod.pageHideFired=!1,event.type="load",!mod.loadFired&&!mod.silentLoad;case"pagehide":return event.type="unload",mod.loadFired=!1,mod.pageHideFired=!0,!mod.silentUnload;case"unload":case"beforeunload":return event.type="unload",mod.loadFired=!1,!mod.pageHideFired&&!mod.silentUnload}return!0},isUnload:function(event){return"object"==typeof event&&("unload"===event.type||"beforeunload"===event.type||"pagehide"===event.type)}}),currentWebEvent={},events={},bridgeCallbacks={},mutationCallbacks=[],_init=function(){},_callback=null,okToCallInit=!0,resetInactivityTimer=function(){},fullDOMFlushed=!1,detectScreenviewChange=function(){var location=window.location,prevPathname=location.pathname,prevHash=location.hash,prevScreenview="";return function(){var currPathname=location.pathname,currHash=location.hash,currScreenview=prevScreenview;currPathname!==prevPathname?currScreenview=TLT.normalizeUrl(currPathname+currHash):currHash!==prevHash&&(currScreenview=TLT.normalizeUrl(currHash)),currScreenview!==prevScreenview&&(prevScreenview&&logScreenview("UNLOAD",prevScreenview),logScreenview("LOAD",currScreenview),prevScreenview=currScreenview,prevPathname=currPathname,prevHash=currHash)}}(),getBlockedUA=function(blockList,ua){var i,len,blockListItem,regex,matchResult,matchValue=null;if(!blockList||!ua)return matchValue;for(i=0,len=blockList.length;i<len;i+=1)switch(typeof(blockListItem=blockList[i])){case"object":(matchResult=(regex=new RegExp(blockListItem.regex,blockListItem.flags)).exec(ua))&&(matchValue=matchResult[0]);break;case"string":-1!==ua.indexOf(blockListItem)&&(matchValue=blockListItem)}return matchValue},isElementBlocked=function(element,scope){var i,j,len,isBlocked=!1,blockedList=coreConfig.blockedElements,blockedElem,blockedElems,blockedElemsLen;if(!blockedList||!blockedList.length)return isElementBlocked=function(){return!1},isBlocked;if(!element||!element.nodeType)return isBlocked;for(scope=scope||utils.getDocument(element),i=0,len=blockedList.length;i<len&&!isBlocked;i+=1)for(j=0,blockedElemsLen=(blockedElems=browserService.queryAll(blockedList[i],scope)).length;j<blockedElemsLen&&!isBlocked;j+=1)isBlocked=(blockedElem=blockedElems[j]).contains?blockedElem.contains(element):blockedElem===element;return isBlocked},hasExcludedProtocol=function(element){var hasExcluded=!1,list=["intent:","mailto:","sms:","tel:"];return element&&"a"===utils.getTagName(element)&&-1!==list.indexOf(element.protocol)&&(hasExcluded=!0),hasExcluded},getTabIndex=function(){var tabId=null,tabIdKey="tltTabId";try{(tabId=sessionStorage.getItem(tabIdKey))||(tabId=utils.getRandomString(4),sessionStorage.setItem(tabIdKey,tabId))}catch(e){}return tabId},core={getTLTSessionCookieInfo:function(){return tltSessionCookieInfo},_loadGlobalsForUnitTesting:function(global){utils=global.utils,ajaxService=global.getService("ajax"),browserBaseService=global.getService("browserBase"),browserService=global.getService("browser"),configService=global.getService("config"),domCaptureService=global.getService("domCapture"),queueService=global.getService("queue"),serializerService=global.getService("serializer"),coreConfig=configService?configService.getCoreConfig():null},getStartTime:function(){return tltStartTime},getPageId:function(){return tltPageId||"#"},getTabId:function(){return tltTabId},setSessionCookieInfo:function(moduleName,cookieName,cookieValue){tltSessionCookieInfo.tltCookieName=cookieName,tltSessionCookieInfo.tltCookieValue=cookieValue},getLibraryVersion:function(){return"6.0.0.1960"},getCurrentWebEvent:function(){return currentWebEvent},normalizeUrl:function(moduleName,url){var config,urlFunction;return void 0===url&&(url=moduleName),(config=this.getCoreConfig()).normalization&&config.normalization.urlFunction?("string"==typeof(urlFunction=config.normalization.urlFunction)&&(urlFunction=utils.access(urlFunction)),urlFunction(url)):url},getSessionStart:function(){return this.getService("message").getSessionStart()},init:function(config,callback){var timeoutCallback;if(!(utils=this.utils).isLegacyIE){if(_callback=callback,!okToCallInit)throw"init must only be called once!";if(!config&&!this.config)throw"missing configuration.";config=config||this.config,this.config=config,okToCallInit=!1,tltPageId="P."+utils.getRandomString(28),tltTabId=getTabIndex(),timeoutCallback=function(event){"load"!==(event=event||window.event||{}).type&&"loading"===document.readyState||(document.removeEventListener?(document.removeEventListener("DOMContentLoaded",timeoutCallback,!1),window.removeEventListener("load",timeoutCallback,!1)):(document.detachEvent("onreadystatechange",timeoutCallback),window.detachEvent("onload",timeoutCallback)),_init(config,callback))},"complete"===document.readyState||"interactive"===document.readyState&&!utils.isIE?setTimeout(timeoutCallback):document.addEventListener?(document.addEventListener("DOMContentLoaded",timeoutCallback,!1),window.addEventListener("load",timeoutCallback,!1)):(document.attachEvent("onreadystatechange",timeoutCallback),window.attachEvent("onload",timeoutCallback))}},isInitialized:function(){return initialized},getState:function(){return state},destroy:function(skipEvents,terminationReason){var token="",eventName="",target=null,serviceName=null,service=null,delegateTarget=!1;if(okToCallInit)return!1;if(this.stopAll(),!skipEvents)for(token in events)events.hasOwnProperty(token)&&(eventName=token.split("|")[0],target=events[token].target,delegateTarget=events[token].delegateTarget||void 0,browserService.unsubscribe(eventName,target,this._publishEvent,delegateTarget));for(serviceName in services)services.hasOwnProperty(serviceName)&&((service=services[serviceName].instance)&&"function"==typeof service.destroy&&service.destroy(),services[serviceName].instance=null);if(isFrameBlacklisted.clearCache(),events={},currentWebEvent={},mutationCallbacks=[],initialized=!1,okToCallInit=!0,state="destroyed",TLT.terminationReason=terminationReason||state,"function"==typeof _callback)try{_callback("destroyed")}catch(e){}registeredPageshowListener||(window.addEventListener("pageshow",pageshowListener),registeredPageshowListener=!0)},_updateModules:function(scope){var moduleConfig=null,moduleName=null,result=!0;if(coreConfig&&coreConfig.modules)try{for(moduleName in coreConfig.modules)if(coreConfig.modules.hasOwnProperty(moduleName)&&(moduleConfig=coreConfig.modules[moduleName],modules.hasOwnProperty(moduleName))){if(!1===moduleConfig.enabled){this.stop(moduleName);continue}this.start(moduleName),moduleConfig.events&&this._registerModuleEvents(moduleName,moduleConfig.events,scope)}this._registerModuleEvents.clearCache()}catch(e){core.destroy(!1,"_updateModules: "+e.message),result=!1}else result=!1;return result},rebind:function(scope){core._updateModules(scope)},getSessionData:function(){if(core.isInitialized()){var rv=null,sessionData=null,scName,scValue,info;return coreConfig&&coreConfig.sessionDataEnabled?((scName=(sessionData=coreConfig.sessionData||{}).sessionQueryName)?scValue=utils.getQueryStringValue(scName,sessionData.sessionQueryDelim):(scName=sessionData.sessionCookieName)?scValue=utils.getCookieValue(scName):(scName=(info=TLT.getTLTSessionCookieInfo()).tltCookieName,scValue=info.tltCookieValue),scName&&scValue&&((rv=rv||{}).tltSCN=scName,rv.tltSCV=scValue,rv.tltSCVNeedsHashing=!!sessionData.sessionValueNeedsHashing),rv):null}},logGeolocation:function(position){var geolocationMsg;core.isInitialized()&&position&&position.coords&&(geolocationMsg={type:13,geolocation:{lat:utils.getValue(position,"coords.latitude",0),long:utils.getValue(position,"coords.longitude",0),accuracy:Math.ceil(utils.getValue(position,"coords.accuracy",0))}},queueService.post("",geolocationMsg))},logCustomEvent:function(name,customMsgObj){if(core.isInitialized()){var customMsg=null;name&&"string"==typeof name||(name="CUSTOM"),customMsg={type:5,customEvent:{name:name,data:customMsgObj=customMsgObj||{}}},queueService.post("",customMsg)}},logExceptionEvent:function(msg,url,line){if(core.isInitialized()){var exceptionMsg=null;msg&&"string"==typeof msg&&(exceptionMsg={type:6,exception:{description:msg,url:url=url||"",line:line=line||""}},queueService.post("",exceptionMsg))}},logFormCompletion:function(submitted,valid){if(core.isInitialized()){var formCompletionMsg={type:15,formCompletion:{submitted:!!submitted,valid:"boolean"==typeof valid?valid:null}};queueService.post("",formCompletionMsg)}},logScreenviewLoad:function(name,referrerName,root){core.isInitialized()&&logScreenview("LOAD",name,referrerName,root)},logScreenviewUnload:function(name){core.isInitialized()&&logScreenview("UNLOAD",name)},logDOMCapture:function(root,config){var dcid=null,domCaptureData,domCaptureServiceConfig,msg;return this.isInitialized()?utils.isLegacyIE?dcid:(domCaptureService&&(root=root||window.document,domCaptureServiceConfig=this.getServiceConfig("domCapture"),config=utils.mixin({},domCaptureServiceConfig.options,config),(domCaptureData=domCaptureService.captureDOM(root,config))&&(dcid=config.dcid||"dcid-"+utils.getSerialNumber()+"."+(new Date).getTime(),domCaptureData.dcid=dcid,domCaptureData.eventOn=!!config.eventOn,msg={type:12,domCapture:domCaptureData},queueService.post("",msg),!1!==config.qffd&&!fullDOMFlushed&&msg.domCapture.fullDOM&&(queueService.flush(),fullDOMFlushed=!0))),dcid):dcid},performDOMCapture:function(moduleName,root,config){return this.logDOMCapture(root,config)},performFormCompletion:function(moduleName,submitted,valid){return this.logFormCompletion(submitted,valid)},_bridgeCallback:function(cbType){var callBackType=bridgeCallbacks[cbType];return callBackType&&callBackType.enabled?callBackType:null},logScreenCapture:function(){if(core.isInitialized()){var bridgeCallback=core._bridgeCallback("screenCapture");null!==bridgeCallback&&bridgeCallback.cbFunction()}},enableTealeafFramework:function(){if(core.isInitialized()){var bridgeCallback=core._bridgeCallback("enableTealeafFramework");null!==bridgeCallback&&bridgeCallback.cbFunction()}},disableTealeafFramework:function(){if(core.isInitialized()){var bridgeCallback=core._bridgeCallback("disableTealeafFramework");null!==bridgeCallback&&bridgeCallback.cbFunction()}},startNewTLFSession:function(){if(core.isInitialized()){var bridgeCallback=core._bridgeCallback("startNewTLFSession");null!==bridgeCallback&&bridgeCallback.cbFunction()}},currentSessionId:function(){if(core.isInitialized()){var sessionId,bridgeCallback=core._bridgeCallback("currentSessionId");return null!==bridgeCallback&&(sessionId=bridgeCallback.cbFunction()),sessionId}},defaultValueForConfigurableItem:function(configItem){if(core.isInitialized()){var value,bridgeCallback=core._bridgeCallback("defaultValueForConfigurableItem");return null!==bridgeCallback&&(value=bridgeCallback.cbFunction(configItem)),value}},valueForConfigurableItem:function(configItem){if(core.isInitialized()){var value,bridgeCallback=core._bridgeCallback("valueForConfigurableItem");return null!==bridgeCallback&&(value=bridgeCallback.cbFunction(configItem)),value}},setConfigurableItem:function(configItem,value){if(core.isInitialized()){var result=!1,bridgeCallback=core._bridgeCallback("setConfigurableItem");return null!==bridgeCallback&&(result=bridgeCallback.cbFunction(configItem,value)),result}},addAdditionalHttpHeader:function(key,value){if(core.isInitialized()){var result=!1,bridgeCallback=core._bridgeCallback("addAdditionalHttpHeader");return null!==bridgeCallback&&(result=bridgeCallback.cbFunction(key,value)),result}},logCustomEventBridge:function(eventName,jsonData,logLevel){if(core.isInitialized()){var result=!1,bridgeCallback=core._bridgeCallback("logCustomEventBridge");return null!==bridgeCallback&&(result=bridgeCallback.cbFunction(eventName,jsonData,logLevel)),result}},registerBridgeCallbacks:function(callbacks){var i,j,len,cb=null,cbEntry,cbList,cbListLen,matched,utils=TLT.utils;if(!callbacks)return!1;if(0===callbacks.length)return bridgeCallbacks={},!1;try{for(i=0,len=callbacks.length;i<len;i+=1)if("object"==typeof(cb=callbacks[i])&&cb.cbType&&cb.cbFunction)if(cbEntry={enabled:cb.enabled,cbFunction:cb.cbFunction,cbOrder:cb.order||0},utils.isUndefOrNull(bridgeCallbacks[cb.cbType]))cbEntry.enabled&&(bridgeCallbacks[cb.cbType]=cbEntry);else{for(utils.isArray(bridgeCallbacks[cb.cbType])||(bridgeCallbacks[cb.cbType]=[bridgeCallbacks[cb.cbType]]),cbList=bridgeCallbacks[cb.cbType],j=0,matched=!1,cbListLen=cbList.length;j<cbListLen;j+=1)if(cbList[j].cbOrder===cbEntry.cbOrder&&cbList[j].cbFunction===cbEntry.cbFunction)matched=!0,cbEntry.enabled||(cbList.splice(j,1),cbList.length||delete bridgeCallbacks[cb.cbType]);else if(cbList[j].cbOrder>cbEntry.cbOrder)break;matched||cbEntry.enabled&&cbList.splice(j,0,cbEntry)}}catch(e){return!1}return!0},registerMutationCallback:function(cb,register){var i;return!(!cb||"function"!=typeof cb)&&(register?-1===(i=mutationCallbacks.indexOf(cb))&&mutationCallbacks.push(cb):-1!==(i=mutationCallbacks.indexOf(cb))&&mutationCallbacks.splice(i,1),!0)},invokeMutationCallbacks:function(records){var i,cb,doc,target,map,documents=[],nodes=[];if(0!==mutationCallbacks.length){for(map=Map?new Map:new utils.WeakMap,i=0;i<records.length;i++)(target=records[i].target)&&(doc=utils.getDocument(target),void 0===map.get(doc)&&(doc.host?nodes.push(doc):documents.push(doc),map.set(doc,!0)));for(map.clear(),i=0;i<mutationCallbacks.length;i++)(cb=mutationCallbacks[i])(records,documents,nodes)}},redirectQueue:function(queue){var i,j,len,cb,cbList,cbListLen,retval;if(!queue||!queue.length)return queue;if(!(cb=bridgeCallbacks.messageRedirect))return queue;for(j=0,cbListLen=(cbList=utils.isArray(cb)?cb:[cb]).length;j<cbListLen;j+=1)if((cb=cbList[j])&&cb.enabled)for(i=0,len=queue.length;i<len;i+=1)(retval=cb.cbFunction(serializerService.serialize(queue[i]),queue[i]))&&"object"==typeof retval?queue[i]=retval:(queue.splice(i,1),i-=1,len=queue.length);return queue},_hasSameOrigin:function(iframe){var hasSameOrigin=!1;try{return(hasSameOrigin=iframe.document.location.host===document.location.host&&iframe.document.location.protocol===document.location.protocol)||(hasSameOrigin=iframe.document.domain===document.domain),hasSameOrigin}catch(e){}return!1},provideRequestHeaders:function(){var headers=null,addHeadersCB=bridgeCallbacks.addRequestHeaders;return addHeadersCB&&addHeadersCB.enabled&&(headers=addHeadersCB.cbFunction()),headers},_registerModuleEvents:function(){var idCache,frameLoadPending=0,normalizeToObject=function(prop,localTop,documentScope){return"window"===prop?localTop:"document"===prop?documentScope:prop};function _registerModuleEventsOnScope(moduleName,moduleEvents,scope){var documentScope=utils.getDocument(scope),localTop=core._getLocalTop(),isFrame=utils.isIFrameDescendant(scope),frameId,e,i;if(scope=scope||documentScope,loadUnloadHandler.normalizeModuleEvents(moduleName,moduleEvents,localTop,documentScope),isFrame&&"string"==typeof(frameId=browserBaseService.ElementData.prototype.examineID(scope).id))for(e in frameId=frameId.slice(0,frameId.length-1),events)if(events.hasOwnProperty(e))for(i=0;i<events[e].length;i+=1)if(moduleName===events[e][i]&&-1!==e.indexOf(frameId)){delete events[e];break}utils.forEach(moduleEvents,(function(eventConfig){var target=normalizeToObject(eventConfig.target,localTop,documentScope)||documentScope,delegateTarget=normalizeToObject(eventConfig.delegateTarget,localTop,documentScope),token="";!0!==eventConfig.recurseFrames&&isFrame||("string"==typeof target?eventConfig.delegateTarget&&"jQuery"===core.getFlavor()?(token=core._buildToken4delegateTarget(eventConfig.name,target,eventConfig.delegateTarget),events.hasOwnProperty(token)?events[token].push(moduleName):(events[token]=[moduleName],events[token].target=target,events[token].delegateTarget=delegateTarget,browserService.subscribe(eventConfig.name,target,core._publishEvent,delegateTarget,token))):utils.forEach(browserService.queryAll(target,scope),(function(element){var idData=idCache.get(element);idData||(idData=browserBaseService.ElementData.prototype.examineID(element),idCache.set(element,idData)),token=eventConfig.name+"|"+idData.id+idData.idType,-1===utils.indexOf(events[token],moduleName)&&(events[token]=events[token]||[],events[token].push(moduleName),events[token].target=element,browserService.subscribe(eventConfig.name,element,core._publishEvent))})):(token=core._buildToken4bubbleTarget(eventConfig.name,target,void 0===eventConfig.target),events.hasOwnProperty(token)?-1===utils.indexOf(events[token],moduleName)&&events[token].push(moduleName):(events[token]=[moduleName],browserService.subscribe(eventConfig.name,target,core._publishEvent))),""!==token&&"string"!=typeof target&&(events[token].target=target))}))}function _isFrameLoaded(hIFrame){var iFrameWindow=utils.getIFrameWindow(hIFrame);return null!==iFrameWindow&&core._hasSameOrigin(iFrameWindow)&&null!==iFrameWindow.document&&"complete"===iFrameWindow.document.readyState&&""!==iFrameWindow.document.body.innerHTML}function registerModuleEvents(moduleName,moduleEvents,scope){if(scope=scope||core._getLocalTop().document,idCache=idCache||new utils.WeakMap,_registerModuleEventsOnScope(moduleName,moduleEvents,scope),"performance"!==moduleName){var hIFrame=null,hIFrameWindow=null,cIFrames=browserService.queryAll("iframe, frame",scope),i,iLength;for(i=0,iLength=cIFrames.length;i<iLength;i+=1)hIFrame=cIFrames[i],isFrameBlacklisted(hIFrame)||(_isFrameLoaded(hIFrame)?(hIFrameWindow=utils.getIFrameWindow(hIFrame),core._registerModuleEvents(moduleName,moduleEvents,hIFrameWindow.document),domCaptureService.observeWindow(hIFrameWindow)):(frameLoadPending+=1,function(_moduleName,_moduleEvents,_hIFrame){var _hIFrameWindow=null,_iframeContext_moduleName=_moduleName,_iframeContext_moduleEvents=_moduleEvents,_iframeContext_hIFrame=_hIFrame,_iframeContext__registerModuleEventsDelayed=function(){var __hIFrameWindow=null;isFrameBlacklisted(_hIFrame)||(__hIFrameWindow=utils.getIFrameWindow(_hIFrame),core._hasSameOrigin(__hIFrameWindow)&&(core._registerModuleEvents(_moduleName,_moduleEvents,__hIFrameWindow.document),domCaptureService.observeWindow(__hIFrameWindow))),(frameLoadPending-=1)||core._publishEvent({type:"loadWithFrames",custom:!0})};utils.addEventListener(_hIFrame,"load",(function(){_iframeContext__registerModuleEventsDelayed()})),utils.isLegacyIE&&_isFrameLoaded(_hIFrame)&&(_hIFrameWindow=utils.getIFrameWindow(_hIFrame),utils.addEventListener(_hIFrameWindow.document,"readystatechange",(function(){_iframeContext__registerModuleEventsDelayed()})))}(moduleName,moduleEvents,hIFrame)))}}return registerModuleEvents.clearCache=function(){idCache&&(idCache.clear(),idCache=null)},registerModuleEvents}(),_buildToken4currentTarget:function(event){var target=event.nativeEvent?event.nativeEvent.currentTarget:null,idData=target?browserBaseService.ElementData.prototype.examineID(target):{id:event.target?event.target.id:null,idType:event.target?event.target.idType:-1};return event.type+"|"+idData.id+idData.idType},_buildToken4delegateTarget:function(eventType,target,delegateTarget){return eventType+"|"+target+"|"+delegateTarget},_buildToken4bubbleTarget:function(eventType,target,checkIframe,delegateTarget){var localTop=core._getLocalTop(),localWindow,_getIframeElement=function(_documentScope){var _retVal=null;return core._hasSameOrigin(localWindow.parent)&&utils.forEach(browserService.queryAll("iframe, frame",localWindow.parent.document),(function(iframe){var iFrameWindow=null;isFrameBlacklisted(iframe)||(iFrameWindow=utils.getIFrameWindow(iframe),core._hasSameOrigin(iFrameWindow)&&iFrameWindow.document===_documentScope&&(_retVal=iframe))})),_retVal},documentScope=utils.getDocument(target),iframeElement=null,tmpTarget,retVal=eventType;return documentScope&&(localWindow=documentScope.defaultView||documentScope.parentWindow),target===window||target===window.window?retVal+="|null-2|window":checkIframe&&localWindow&&core._hasSameOrigin(localWindow.parent)&&void 0!==documentScope&&localTop.document!==documentScope?(iframeElement=_getIframeElement(documentScope))&&(retVal+="|"+(tmpTarget=browserBaseService.ElementData.prototype.examineID(iframeElement)).xPath+"-2"):delegateTarget&&delegateTarget!==document&&"jQuery"===core.getFlavor()?retVal+="|null-2|"+utils.getTagName(target)+"|"+utils.getTagName(delegateTarget):retVal+="|null-2|document",retVal},_reinitConfig:function(){core._updateModules()},_publishEvent:function(event){var moduleName=null,module=null,token=event.delegateTarget&&event.data?event.data:core._buildToken4currentTarget(event),_modules=null,i,len,target,modEvent=null,canIgnore=!1,canPublish=!1,delegateTarget=event.delegateTarget||null,screenviewAutoDetect,clickedEl;if(currentWebEvent=event,event.type.match(/^(click|change|blur|mouse|touch)/)&&(resetInactivityTimer(),queueService.resetFlushTimer()),(screenviewAutoDetect=utils.getValue(coreConfig,"screenviewAutoDetect",!0))&&detectScreenviewChange(),"load"!==event.type&&"pageshow"!==event.type||event.nativeEvent.customLoad)if("click"===event.type&&(lastClickedElement=event.target.element),"beforeunload"===event.type&&(canIgnore=!1,(clickedEl="a"===utils.getTagName(lastClickedElement)?lastClickedElement:document.activeElement)&&(hasExcludedProtocol(clickedEl)?canIgnore=!0:utils.forEach(coreConfig.ieExcludedLinks,(function(selector){var j,elLen,el=browserService.queryAll(selector);for(j=0,elLen=el?el.length:0;j<elLen;j+=1)if(el[j]&&el[j]===lastClickedElement){canIgnore=!0;break}}))),canIgnore))currentWebEvent={};else if(loadUnloadHandler.isUnload(event)&&(state="unloading"),"change"!==event.type||!utils.isLegacyIE||"w3c"!==core.getFlavor()||"checkbox"!==event.target.element.type&&"radio"!==event.target.element.type){if("propertychange"===event.type){if("checked"!==event.nativeEvent.propertyName||!("checkbox"===event.target.element.type||"radio"===event.target.element.type&&event.target.element.checked))return void(currentWebEvent={});event.type="change",event.target.type="INPUT"}if(event.target&&isElementBlocked(event.target.element))currentWebEvent={};else{if(events.hasOwnProperty(token)||(event.hasOwnProperty("nativeEvent")&&(target=event.nativeEvent.currentTarget||event.nativeEvent.target),token=core._buildToken4bubbleTarget(event.type,target,!0,delegateTarget)),events.hasOwnProperty(token))for(i=0,len=(_modules=events[token]).length;i<len;i+=1)moduleName=_modules[i],module=core.getModule(moduleName),modEvent=utils.mixin({},event),module&&core.isStarted(moduleName)&&"function"==typeof module.onevent&&(canPublish=loadUnloadHandler.canPublish(moduleName,modEvent))&&module.onevent(modEvent);modEvent&&"unload"===modEvent.type&&canPublish&&core.destroy(!1,modEvent.type),currentWebEvent={}}}else currentWebEvent={};else currentWebEvent={}},_getLocalTop:function(){return window.window},addModule:function(moduleName,creator){modules[moduleName]={creator:creator,instance:null,context:null,messages:[]},this.isInitialized()&&this.start(moduleName)},getModule:function(moduleName){return modules[moduleName]&&modules[moduleName].instance?modules[moduleName].instance:null},removeModule:function(moduleName){this.stop(moduleName),delete modules[moduleName]},isStarted:function(moduleName){return modules.hasOwnProperty(moduleName)&&null!==modules[moduleName].instance},start:function(moduleName){var moduleData=modules[moduleName],instance=null;moduleData&&null===moduleData.instance&&(moduleData.context=new TLT.ModuleContext(moduleName,this),"function"==typeof(instance=moduleData.instance=moduleData.creator(moduleData.context)).init&&instance.init())},startAll:function(){var moduleName=null;for(moduleName in modules)modules.hasOwnProperty(moduleName)&&this.start(moduleName)},stop:function(moduleName){var moduleData=modules[moduleName],instance=null;moduleData&&null!==moduleData.instance&&("function"==typeof(instance=moduleData.instance).destroy&&instance.destroy(),moduleData.instance=moduleData.context=null)},stopAll:function(){var moduleName=null;for(moduleName in modules)modules.hasOwnProperty(moduleName)&&this.stop(moduleName)},addService:function(serviceName,creator){services[serviceName]={creator:creator,instance:null}},getService:function(serviceName){if(services.hasOwnProperty(serviceName)){if(!services[serviceName].instance){try{services[serviceName].instance=services[serviceName].creator(this),"function"==typeof services[serviceName].instance.init&&services[serviceName].instance.init()}catch(e){throw utils.clog("UIC terminated due to error when instanciating the "+serviceName+" service."),e}"function"!=typeof services[serviceName].instance.getServiceName&&(services[serviceName].instance.getServiceName=function(){return serviceName})}return services[serviceName].instance}return null},removeService:function(serviceName){delete services[serviceName]},broadcast:function(message){var prop,module;if(message&&"object"==typeof message)for(prop in modules)modules.hasOwnProperty(prop)&&(module=modules[prop],utils.indexOf(module.messages,message.type)>-1&&"function"==typeof module.instance.onmessage&&module.instance.onmessage(message))},listen:function(moduleName,messageType){var module=null;this.isStarted(moduleName)&&(module=modules[moduleName],-1===utils.indexOf(module.messages,messageType)&&module.messages.push(messageType))},fail:function(message,failcode,skipEvents){message="UIC FAILED. "+message;try{core.destroy(!!skipEvents,message)}catch(e){utils.clog(message)}throw new core.UICError(message,failcode)},UICError:function(){function UICError(message,errorCode){this.message=message,this.code=errorCode}return UICError.prototype=new Error,UICError.prototype.name="UICError",UICError.prototype.constructor=UICError,UICError}(),getFlavor:function(){return"w3c"},isCrossOrigin:function(url,origin){var isCrossOrigin=!1,protocolIndex,urlSlashSlash;return origin=origin||window.location.origin,url&&origin?(urlSlashSlash=url.match(/^\/\//),url.match(/^\//)&&!urlSlashSlash?isCrossOrigin=!1:urlSlashSlash||-1!==url.indexOf("://")?(urlSlashSlash&&-1!==(protocolIndex=origin.indexOf("://"))&&(origin=origin.substring(protocolIndex+1)),isCrossOrigin=url.length<origin.length||(origin!==url.substring(0,origin.length)||url.length>origin.length&&"/"!==url.charAt(origin.length))):isCrossOrigin=!1,isCrossOrigin):isCrossOrigin}},status;function getSIDFromStorage(sidKey){var expires,items,itemVal,sidValue;if(localStorage&&sidKey)return(itemVal=localStorage.getItem(sidKey))&&(items=itemVal.split("|"),expires=parseInt(items[0],10),Date.now()>expires?localStorage.removeItem(sidKey):sidValue=items[1]),sidValue}return resetInactivityTimer=function(){var inactivityTimerId=null,inactivityTimeout=utils.getValue(coreConfig,"inactivityTimeout",6e5);function inactivityTimeoutHandler(){core.destroy(!1,"inactivity")}inactivityTimeout?(resetInactivityTimer=function(){inactivityTimerId&&(clearTimeout(inactivityTimerId),inactivityTimerId=null),inactivityTimerId=setTimeout(inactivityTimeoutHandler,inactivityTimeout)})():resetInactivityTimer=function(){}},_init=function(config,callback){var cookieModuleConfig,queueServiceConfig,queues,sessionCookieName,sessionCookieValue,endpointURL,killswitchURL,pageURL=null,i,blockedUA,eventName,eventTarget,screenviewLoadHandler;if(!(initialized||TLT&&TLT.replay))if((configService=core.getService("config")).updateConfig(config),coreConfig=configService.getCoreConfig(),blockedUA=getBlockedUA(coreConfig.blockedUserAgents,navigator.userAgent))TLT.terminationReason="blockedUA: "+blockedUA;else if(ajaxService=core.getService("ajax"),utils.browserBaseService=browserBaseService=core.getService("browserBase"),utils.browserService=browserService=core.getService("browser"),domCaptureService=core.getService("domCapture"),queueService=core.getService("queue"),serializerService=core.getService("serializer"),sessionCookieName=(cookieModuleConfig=configService.getModuleConfig("TLCookie")||{}).sessionizationCookieName||"TLTSID","DND"!==(sessionCookieValue=utils.getCookieValue("TLTSID")))if((sessionCookieValue=utils.getCookieValue(sessionCookieName)||getSIDFromStorage(sessionCookieName))||(sessionCookieName=cookieModuleConfig.wcxCookieName||"WCXSID",sessionCookieValue=utils.getCookieValue(sessionCookieName)),core._updateModules()){configService.subscribe&&configService.subscribe("configupdated",core._reinitConfig),initialized=!0,state="loaded";try{"function"==typeof TLFExtensionNotify&&TLFExtensionNotify("Initialized")}catch(e1){}for(queues=(queueServiceConfig=core.getServiceConfig("queue")).queues||[],(utils.isLegacyIE||utils.isIE9)&&(pageURL=utils.getOriginAndPath().origin),i=0;i<queues.length;i+=1){if(pageURL&&core.isCrossOrigin(queues[i].endpoint,pageURL))return core.setAutoFlush(!1),void core.destroy(!1,"CORS not supported");!sessionCookieValue&&cookieModuleConfig.tlAppKey&&(endpointURL=queues[i].endpoint,(killswitchURL=queues[i].killswitchURL||(endpointURL.match("collectorPost")?endpointURL.replace("collectorPost","switch/"+cookieModuleConfig.tlAppKey):null))&&ajaxService.sendRequest({type:"GET",url:killswitchURL,async:!0,timeout:5e3,oncomplete:function(result){"0"!==result.responseText&&0!==result.data||(core.setAutoFlush(!1),utils.setCookie("TLTSID","DND"),core.destroy(!1,"killswitch"))}})),queues[i].checkEndpoint&&!queueServiceConfig.asyncReqOnUnload&&(queueServiceConfig.asyncReqOnUnload=!0,ajaxService.sendRequest({oncomplete:function(result){result.success&&(queueServiceConfig.asyncReqOnUnload=!1)},timeout:queues[i].endpointCheckTimeout||3e3,url:queues[i].endpoint,headers:{"X-PageId":tltPageId,"X-Tealeaf-SaaS-AppKey":cookieModuleConfig.tlAppKey,"X-Tealeaf-EndpointCheck":!0},async:!0,error:function(result){result.success||(queueServiceConfig.endpointCheckFailed=!0)}}))}if(screenviewLoadHandler=function(e){var event,webEvent;event={type:"load",target:window.window,srcElement:window.window,currentTarget:window.window,bubbles:!0,cancelBubble:!1,cancelable:!0,timeStamp:+new Date,customLoad:!0},webEvent=new browserBaseService.WebEvent(event),core._publishEvent(webEvent),e&&browserService.unsubscribe(eventName,eventTarget,screenviewLoadHandler)},coreConfig.screenviewLoadEvent?(eventName=coreConfig.screenviewLoadEvent.name,eventTarget=coreConfig.screenviewLoadEvent.target||window,browserService.subscribe(eventName,eventTarget,screenviewLoadHandler)):screenviewLoadHandler(),core.isInitialized()&&(state="initialized",resetInactivityTimer()),"function"==typeof _callback)try{_callback(state)}catch(e2){utils.clog("Error in callback.",e2)}}else"destroyed"!==state&&core.destroy(!1,"modules init");else"destroyed"!==state&&core.destroy(!1,"killswitch")},function(){var name=null,i,len;for(name in servicePassthroughs)if(servicePassthroughs.hasOwnProperty(name))for(i=0,len=servicePassthroughs[name].length;i<len;i+=1)!function(serviceName,methodName){core[methodName]=function(){var service=this.getService(serviceName);if(service)return service[methodName].apply(service,arguments)}}(name,servicePassthroughs[name][i])}(),core}(),function(){"use strict";var ua=window.navigator.userAgent.toLowerCase(),_isIE=-1!==ua.indexOf("msie")||-1!==ua.indexOf("trident"),_isLegacyIE=(isNavTimingSupported=!!window.performance,_isIE&&(!isNavTimingSupported||document.documentMode<9)),_isIE9=_isIE&&9===document.documentMode,_isAndroid=-1!==ua.indexOf("android"),_isiOS=/(ipad|iphone|ipod)/.test(ua),_isOperaMini=-1!==ua.indexOf("opera mini"),_isSafari=-1===ua.indexOf("chrome")&&-1!==ua.indexOf("safari"),tltUniqueIndex=1,tlTypes={"a:":"link","button:button":"button","button:submit":"button","input:button":"button","input:checkbox":"checkBox","input:color":"colorPicker","input:date":"datePicker","input:datetime":"datetimePicker","input:datetime-local":"datetime-local","input:email":"emailInput","input:file":"fileInput","input:image":"button","input:month":"month","input:number":"numberPicker","input:password":"textBox","input:radio":"radioButton","input:range":"slider","input:reset":"button","input:search":"searchBox","input:submit":"button","input:tel":"tel","input:text":"textBox","input:time":"timePicker","input:url":"urlBox","input:week":"week","select:":"selectList","select:select-one":"selectList","textarea:":"textBox","textarea:textarea":"textBox"},utils={isIE:_isIE,isLegacyIE:_isLegacyIE,isIE9:_isIE9,isAndroid:_isAndroid,isLandscapeZeroDegrees:!1,isiOS:_isiOS,isOperaMini:_isOperaMini,isSafari:_isSafari,isUndefOrNull:function(obj){return null==obj},isArray:function(obj){return!(!obj||"[object Array]"!==Object.prototype.toString.call(obj))},getSerialNumber:function(){var id;return id=tltUniqueIndex,tltUniqueIndex+=1,id},getRandomString:function(length,dataSet){var i,dataSetLength,defaultDataSet,randomString="";if(!length)return randomString;for("string"!=typeof dataSet&&(dataSet="ABCDEFGHJKLMNPQRSTUVWXYZ23456789"),i=0,dataSetLength=dataSet.length;i<length;i+=1)randomString+=dataSet.charAt(Math.floor(Math.random()*dataSetLength));return randomString},getValue:function(parentObj,propertyAsStr,defaultValue){var i,len,properties;if(defaultValue=void 0===defaultValue?null:defaultValue,!parentObj||"object"!=typeof parentObj||"string"!=typeof propertyAsStr)return defaultValue;for(i=0,len=(properties=propertyAsStr.split(".")).length;i<len;i+=1){if(this.isUndefOrNull(parentObj)||void 0===parentObj[properties[i]])return defaultValue;parentObj=parentObj[properties[i]]}return parentObj},indexOf:function(array,item){var i,len;if(array&&array.indexOf)return array.indexOf(item);if(array&&array instanceof Array)for(i=0,len=array.length;i<len;i+=1)if(array[i]===item)return i;return-1},forEach:function(array,callback,context){var i,len;if(array&&array.length&&callback&&callback.call)for(i=0,len=array.length;i<len;i+=1)callback.call(context,array[i],i,array)},some:function(array,callback){var i,len,val=!1;for(i=0,len=array.length;i<len;i+=1)if(val=callback(array[i],i,array))return val;return val},convertToArray:function(items){for(var i=0,len=items.length,result=[];i<len;)result.push(items[i]),i+=1;return result},mixin:function(dst){var prop,src,srcId,len;for(srcId=1,len=arguments.length;srcId<len;srcId+=1)for(prop in src=arguments[srcId])Object.prototype.hasOwnProperty.call(src,prop)&&(dst[prop]=src[prop]);return dst},extend:function(deep,target,src){var prop="";for(prop in src)Object.prototype.hasOwnProperty.call(src,prop)&&(deep&&"[object Object]"===Object.prototype.toString.call(src[prop])?(void 0===target[prop]&&(target[prop]={}),this.extend(deep,target[prop],src[prop])):target[prop]=src[prop]);return target},clone:function(obj){var copy,attr;if(null===obj||"object"!=typeof obj)return obj;if(obj instanceof Object){for(attr in copy="[object Array]"===Object.prototype.toString.call(obj)?[]:{},obj)Object.prototype.hasOwnProperty.call(obj,attr)&&(copy[attr]=this.clone(obj[attr]));return copy}},parseVersion:function(version){var i,len,retval=[];if(!version||!version.length)return retval;for(i=0,len=(retval=version.split(".")).length;i<len;i+=1)retval[i]=/^[0-9]+$/.test(retval[i])?parseInt(retval[i],10):retval[i];return retval},isEqual:function(a,b){var i,isEqual,prop,swap,len;if(a===b)return!0;if(typeof a!=typeof b)return!1;if(a instanceof Object&&b instanceof Object){if("[object Array]"===Object.prototype.toString.call(a)&&"[object Array]"===Object.prototype.toString.call(b)){if(a.length!==b.length)return!1;for(i=0,len=a.length;i<len;i+=1)if(!this.isEqual(a[i],b[i]))return!1;return!0}if("[object Object]"===Object.prototype.toString.call(a)&&"[object Object]"===Object.prototype.toString.call(b)){for(i=0;i<2;i+=1){for(prop in a)if(a.hasOwnProperty(prop)){if(!b.hasOwnProperty(prop))return!1;if(!(isEqual=this.isEqual(a[prop],b[prop])))return!1}swap=a,a=b,b=swap}return!0}}return!1},calculateRelativeXY:function(info){if(utils.isUndefOrNull(info)||utils.isUndefOrNull(info.x)||utils.isUndefOrNull(info.y)||utils.isUndefOrNull(info.width)||utils.isUndefOrNull(info.height))return"0.5,0.5";var relX=Math.abs(info.x/info.width).toFixed(4),relY=Math.abs(info.y/info.height).toFixed(4);return(relX=relX>1||relX<0?.5:relX)+","+(relY=relY>1||relY<0?.5:relY)},createObject:(fn=null,F=null,"function"==typeof Object.create?fn=Object.create:(F=function(){},fn=function(o){if("object"!=typeof o&&"function"!=typeof o)throw new TypeError("Object prototype need to be an object!");return F.prototype=o,new F}),fn),access:function(path,rootObj){var obj=rootObj||window,arr,i,len;if("string"==typeof path&&"object"==typeof obj){for(i=0,len=(arr=path.split(".")).length;i<len;i+=1)if(0!==i||"window"!==arr[i]){if(!Object.prototype.hasOwnProperty.call(obj,arr[i]))return;if(obj=obj[arr[i]],i<len-1&&!(obj instanceof Object))return}return obj}},isNumeric:function(character){var retVal=!1;return utils.isUndefOrNull(character)||!/\S/.test(character)?retVal:retVal=!isNaN(2*character)},isUpperCase:function(character){return character===character.toUpperCase()&&character!==character.toLowerCase()},isLowerCase:function(character){return character===character.toLowerCase()&&character!==character.toUpperCase()},extractResponseHeaders:function(headers){var headersObj={},i,len,header=null;for(i=0,len=(headers=headers&&headers.length?headers.split("\n"):[]).length;i<len;i+=1)2===(header=headers[i].split(": ")).length&&(headersObj[header[0]]=header[1]);return headersObj},getTargetState:function(target){var tagnames={a:["innerText","href"],input:{range:["maxValue:max","value"],checkbox:["value","checked"],radio:["value","checked"],image:["src"]},select:["value"],button:["value","innerText"],textarea:["value"]},tagName=this.getTagName(target),properties=tagnames[tagName]||null,selectedOption=null,state=null,alias=null,key="";if(null!==properties)for(key in"[object Object]"===Object.prototype.toString.call(properties)&&(properties=properties[target.type]||["value"]),state={},properties)properties.hasOwnProperty(key)&&(-1!==properties[key].indexOf(":")?state[(alias=properties[key].split(":"))[0]]=target[alias[1]]:"innerText"===properties[key]?state[properties[key]]=this.trim(target.innerText||target.textContent):state[properties[key]]=target[properties[key]]);return"select"===tagName&&target.options&&!isNaN(target.selectedIndex)&&((state=state||{}).index=target.selectedIndex,state.index>=0&&state.index<target.options.length&&(selectedOption=target.options[target.selectedIndex],state.value=selectedOption.getAttribute("value")||selectedOption.getAttribute("label")||selectedOption.text||selectedOption.innerText,state.text=selectedOption.text||selectedOption.innerText)),state&&target.disabled&&(state.disabled=!0),state},getDocument:function(node){var doc=node;return node&&9!==node.nodeType&&(doc=node.getRootNode?node.getRootNode():node.ownerDocument||node.document),doc},getWindow:function(node){try{if(node.self!==node){var ownerDocument=utils.getDocument(node);return utils.isUndefOrNull(ownerDocument.defaultView)?ownerDocument.parentWindow:ownerDocument.defaultView}}catch(e){node=null}return node},getOriginAndPath:function(location){var retObj={},temp,search,searchParams,key,value,queryArray=[],queryParamsTmp={},i,j;(location=location||window.location).origin?retObj.origin=location.origin:retObj.origin=(location.protocol||"")+"//"+(location.host||""),retObj.path=(location.pathname||"").split(";",1)[0],(retObj.origin.indexOf("file://")>-1||utils.isiOS&&window.Ionic)&&null!==(temp=retObj.path.match(/(.*)(\/.*app.*)/))&&(retObj.path=temp[2],retObj.origin="file://"),search=location.search||"";try{(searchParams=new URLSearchParams(search)).forEach((function(_value,_key){queryParamsTmp[_key]=_value}))}catch(e){for(search.length>1&&"?"===search.charAt(0)&&(queryArray=decodeURIComponent(search).substring(1).split("&")),i=0;i<queryArray.length;i+=1)(j=queryArray[i].indexOf("="))>-1&&(key=queryArray[i].substring(0,j),value=queryArray[i].substring(j+1),queryParamsTmp[key]=value)}return retObj.queryParams=queryParamsTmp,retObj},getIFrameWindow:function(iFrameElement){var contentWindow=null;if(!iFrameElement)return contentWindow;try{contentWindow=iFrameElement.contentWindow||(iFrameElement.contentDocument?iFrameElement.contentDocument.parentWindow:null)}catch(e){}return contentWindow},getTagName:function(node){var tagName="";return utils.isUndefOrNull(node)?tagName:tagName=node===document||9===node.nodeType?"document":node===window||node===window.window?"window":"string"==typeof node?node.toLowerCase():(node.tagName||node.nodeName||"").toLowerCase()},getTlType:function(node){var elementType,key,tlType="";return utils.isUndefOrNull(node)||!node.type?tlType:(key=(elementType=node.type.toLowerCase())+":",node.subType&&(key+=node.subType.toLowerCase()),tlType=tlTypes[key]||elementType)},isIFrameDescendant:function(node){var nodeWindow=utils.getWindow(node);return!!nodeWindow&&nodeWindow!=TLT._getLocalTop()},getOrientationMode:function(orientation){var mode="INVALID";if("number"!=typeof orientation)return mode;switch(orientation){case 0:case 180:case 360:mode="PORTRAIT";break;case 90:case-90:case 270:mode="LANDSCAPE";break;default:mode="UNKNOWN"}return mode},getOrientationAngle:function(){if("number"==typeof window.orientation)return window.orientation;var angle=(screen.orientation||{}).angle;if("number"!=typeof angle)switch(screen.mozOrientation||screen.msOrientation){case"landscape-primary":case"landscape-secondary":angle=90;break;default:angle=0}return angle},clog:(window,function(){}),trim:function(str){return str&&str.toString?str.toString().replace(/^\s+|\s+$/g,""):str},ltrim:function(str){return str&&str.toString?str.toString().replace(/^\s+/,""):str},rtrim:function(str){return str&&str.toString?str.toString().replace(/\s+$/,""):str},setCookie:function(cookieName,cookieValue,maxAge,path,domain,secure,samesite){var i,len,domainArray,expiry,maxAgeStr="",pathStr,secureStr,samesiteStr;if("None"===samesite?secure=!0:"Lax"!==samesite&&(samesite="Strict"),samesiteStr=";SameSite="+samesite,secureStr=secure?";Secure":"",cookieName)for(cookieName=encodeURIComponent(cookieName),cookieValue=encodeURIComponent(cookieValue),domainArray=(domain||location.hostname).split("."),pathStr=";Path="+(path||"/"),"number"==typeof maxAge&&(this.isIE?((expiry=new Date).setTime(expiry.getTime()+1e3*maxAge),maxAgeStr=";Expires="+expiry.toUTCString()):maxAgeStr=";Max-Age="+maxAge),i=1===(len=domainArray.length)?1:2;i<=len&&(document.cookie=cookieName+"="+cookieValue+";Domain="+domainArray.slice(-i).join(".")+pathStr+maxAgeStr+secureStr+samesiteStr,this.getCookieValue(cookieName)!==cookieValue);i+=1)1===len&&(document.cookie=cookieName+"="+cookieValue+pathStr+maxAgeStr+secureStr+samesiteStr)},getCookieValue:function(cookieName,cookieString){var i,len,cookie,cookies,cookieValue=null,cookieNameLen;try{if(cookieString=cookieString||document.cookie,!cookieName||!cookieName.toString)return null;for(cookieNameLen=(cookieName+="=").length,cookies=cookieString.split(";"),i=0,len=cookies.length;i<len;i+=1)if(cookie=cookies[i],0===(cookie=utils.ltrim(cookie)).indexOf(cookieName)){cookieValue=cookie.substring(cookieNameLen,cookie.length);break}}catch(e){cookieValue=null}return cookieValue},getQueryStringValue:function(paramName,queryDelim,queryString){var i,j,queryStringLen,paramValue=null,valueStartIndex;try{if(queryStringLen=(queryString=queryString||window.location.search).length,!paramName||!paramName.toString||!queryStringLen)return null;queryString=(queryDelim=queryDelim||"&")+queryString.substring(1),paramName=queryDelim+paramName+"=",-1!==(i=queryString.indexOf(paramName))&&(valueStartIndex=i+paramName.length,-1===(j=queryString.indexOf(queryDelim,valueStartIndex))&&(j=queryStringLen),paramValue=decodeURIComponent(queryString.substring(valueStartIndex,j)))}catch(e){}return paramValue},addEventListener:window.addEventListener?function(element,eventName,listener){element.addEventListener(eventName,listener,!1)}:function(element,eventName,listener){element.attachEvent("on"+eventName,listener)},matchTarget:function(rules,target){var i,j,domElement,matchIndex=-1,qr,qrLen,qrTarget,len,rule,scope=document;if(!rules||!target)return matchIndex;for(this.browserService&&this.browserBaseService||(this.browserService=TLT.getService("browser"),this.browserBaseService=TLT.getService("browserBase")),-2===target.idType&&(domElement=this.browserBaseService.getNodeFromID(target.id,target.idType),scope=this.getDocument(domElement)),i=0,len=rules.length;i<len&&-1===matchIndex;i+=1)if("string"==typeof(rule=rules[i])){for(j=0,qrLen=(qr=this.browserService.queryAll(rule,scope))?qr.length:0;j<qrLen;j+=1)if(qr[j]&&(qrTarget=this.browserBaseService.ElementData.prototype.examineID(qr[j])).idType===target.idType&&qrTarget.id===target.id){matchIndex=i;break}}else if(rule&&rule.id&&rule.idType&&target.idType&&target.idType.toString()===rule.idType.toString())switch(typeof rule.id){case"string":rule.id===target.id&&(matchIndex=i);break;case"object":rule.cRegex||(rule.cRegex=new RegExp(rule.id.regex,rule.id.flags)),rule.cRegex.lastIndex=0,rule.cRegex.test(target.id)&&(matchIndex=i)}return matchIndex},WeakMap:function(){function index(data,key){var i,len;for(i=0,len=(data=data||[]).length;i<len;i+=1)if(data[i][0]===key)return i;return-1}return function(){var data=[];this.set=function(key,val){var idx=index(data,key);data[idx>-1?idx:data.length]=[key,val]},this.get=function(key){var arr=data[index(data,key)];return arr?arr[1]:void 0},this.clear=function(){data=[]},this.has=function(key){return index(data,key)>=0},this.remove=function(key){var idx=index(data,key);idx>=0&&data.splice(idx,1)},this.delete=this.remove}}()},fn,F,isNavTimingSupported;"undefined"!=typeof TLT&&TLT||(window.TLT={}),TLT.utils=utils}(),function(){"use strict";TLT.EventTarget=function(){this._handlers={}},TLT.EventTarget.prototype={constructor:TLT.EventTarget,publish:function(name,data){var i=0,len=0,handlers=this._handlers[name],event={type:name,data:data};if(void 0!==handlers)for(len=handlers.length;i<len;i+=1)handlers[i](event)},subscribe:function(name,handler){this._handlers.hasOwnProperty(name)||(this._handlers[name]=[]),this._handlers[name].push(handler)},unsubscribe:function(name,handler){var i=0,len=0,handlers=this._handlers[name];if(handlers)for(len=handlers.length;i<len;i+=1)if(handlers[i]===handler)return void handlers.splice(i,1)}}}(),TLT.ModuleContext=function(){"use strict";var methodsToExpose=["broadcast","getConfig:getModuleConfig","listen","post","getXPathFromNode","performDOMCapture","performFormCompletion","isInitialized","getStartTime","normalizeUrl","getSessionStart","getTabId","setSessionCookieInfo"];return function(moduleName,core){var context={},i,len,parts=null,coreMethod=null,contextMethod=null;for(i=0,len=methodsToExpose.length;i<len;i+=1)(parts=methodsToExpose[i].split(":")).length>1?(contextMethod=parts[0],coreMethod=parts[1]):(contextMethod=parts[0],coreMethod=parts[0]),context[contextMethod]=function(_coreMethod){return function(){var args=core.utils.convertToArray(arguments);return args.unshift(moduleName),core[_coreMethod].apply(core,args)}}(coreMethod);return context.utils=core.utils,context}}(),TLT.addService("config",(function(core){"use strict";function mergeConfig(oldConf,newConf){core.utils.extend(!0,oldConf,newConf),configService.publish("configupdated",configService.getConfig())}var config={core:{},modules:{},services:{}},configService=core.utils.extend(!1,core.utils.createObject(new TLT.EventTarget),{getConfig:function(){return config},updateConfig:function(newConf){mergeConfig(config,newConf)},getCoreConfig:function(){return config.core},updateCoreConfig:function(newConf){mergeConfig(config.core,newConf)},getServiceConfig:function(serviceName){return config.services[serviceName]||{}},updateServiceConfig:function(serviceName,newConf){void 0===config.services[serviceName]&&(config.services[serviceName]={}),mergeConfig(config.services[serviceName],newConf)},getModuleConfig:function(moduleName){return config.modules[moduleName]||{}},updateModuleConfig:function(moduleName,newConf){void 0===config.modules[moduleName]&&(config.modules[moduleName]={}),mergeConfig(config.modules[moduleName],newConf)},destroy:function(){config={core:{},modules:{},services:{}}}});return configService})),TLT.addService("queue",(function(core){"use strict";var utils=core.utils,CONFIG=null,coreConfig={},inactivityTimeout=6e5,aS=core.getService("ajax"),bS=core.getService("browser"),eS=core.getService("encoder"),sS=core.getService("serializer"),cS=core.getService("config"),mS=core.getService("message"),defaultQueue=null,queueTimers={},autoFlushing=!0,delayFlushOnClick=!0,msgCounter={5:{limit:300,count:0},6:{limit:400,count:0}},xhrLog=[],isInitialized=!1,isSerializedPost=!0,isLastPostComplete=!0,queueManager=function(){var queues={};function queueExists(queueId){return void 0!==queues[queueId]}function addQueue(queueId,opts){return queueExists(queueId)||(queues[queueId]={lastOffset:0,data:[],queueId:queueId,url:opts.url,eventThreshold:opts.eventThreshold,sizeThreshold:opts.sizeThreshold||0,timerInterval:opts.timerInterval,size:-1,serializer:opts.serializer,encoder:opts.encoder,crossDomainEnabled:!!opts.crossDomainEnabled,crossDomainIFrame:opts.crossDomainIFrame}),queues[queueId]}function removeQueue(queueId){queueExists(queueId)&&delete queues[queueId]}function getQueue(queueId){return queueExists(queueId)?queues[queueId]:null}function clearQueue(queueId){var queue=getQueue(queueId);null!==queue&&(queue.data=[])}function flushQueue(queueId){var data=null;return queueExists(queueId)&&(data=getQueue(queueId).data,clearQueue(queueId)),data}function pushToQueue(queueId,data){var queue=null,dataStr=null,bridgeAndroid=window.tlBridge,bridgeiOS=window.iOSJSONShuttle;try{dataStr=sS.serialize(data)}catch(e){data={error:dataStr="Serialization failed: "+(e.name?e.name+" - ":"")+e.message}}if(void 0!==bridgeAndroid&&"function"==typeof bridgeAndroid.addMessage)bridgeAndroid.addMessage(dataStr);else if(void 0!==bridgeiOS&&"function"==typeof bridgeiOS)bridgeiOS(dataStr);else if(queueExists(queueId))return(queue=getQueue(queueId)).data.push(data),queue.data=core.redirectQueue(queue.data),queue.sizeThreshold&&(dataStr=sS.serialize(queue.data),queue.size=dataStr.length),queue.data.length;return 0}return{exists:queueExists,add:addQueue,remove:removeQueue,reset:function(){queues={}},get:getQueue,clear:clearQueue,flush:flushQueue,push:pushToQueue}}();function handleXhrCallback(result){isSerializedPost&&(isLastPostComplete=!0),result&&result.id&&utils.extend(!0,xhrLog[result.id-1],{rspEnd:mS.createMessage({type:0}).offset,success:result.success,statusCode:result.statusCode,statusText:result.statusText})}function getUrlPath(){var urlInfo=utils.getOriginAndPath(window.location);return core.normalizeUrl(urlInfo.path)}function addHeaderToQueue(queueId,headerName,headerValue,recurring){var queue=queueManager.get(queueId),header={name:headerName,value:headerValue},qHeadersList=null;"string"==typeof headerName&&"string"==typeof headerValue&&(queue.headers||(queue.headers={once:[],always:[]}),(qHeadersList=recurring?queue.headers.always:queue.headers.once).push(header))}function copyHeaders(queueId,headerObj){var i,len,queue,qHeaders=queueManager.get(queueId).headers,headersList=null;function copy(l,o){var j,len,header=null;for(j=0,len=l.length;j<len;j+=1)o[(header=l[j]).name]=header.value}if(headerObj=headerObj||{},qHeaders)for(i=0,len=(headersList=[qHeaders.always,qHeaders.once]).length;i<len;i+=1)copy(headersList[i],headerObj);return headerObj}function clearHeaders(queueId){var queue=null,qHeaders=null;if(!queueManager.exists(queueId))throw new Error("Queue: "+queueId+" does not exist!");(qHeaders=(queue=queueManager.get(queueId))?queue.headers:null)&&(qHeaders.once=[])}function getExternalRequestHeaders(){var i=0,len,header,headers=core.provideRequestHeaders();if(headers&&headers.length)for(i=0,len=headers.length;i<len;i+=1)addHeaderToQueue("DEFAULT",(header=headers[i]).name,header.value,header.recurring);return i}function getMessageTypes(data){var i,len,types=[],typesString="";if(!data||!data.length)return typesString;for(i=0,len=data.length;i<len;i+=1)types[data[i].type]=!0;for(i=0,len=types.length;i<len;i+=1)types[i]&&(typesString&&(typesString+=","),typesString+=i);return typesString}function flushQueue(queueId,sync){var queue=queueManager.get(queueId),data=queue.url?queueManager.flush(queueId):null,count=data?data.length:0,httpHeaders={"Content-Type":"application/json","X-PageId":core.getPageId(),"X-Tealeaf":"device (UIC) Lib/6.0.0.1960","X-TealeafType":"GUI","X-TeaLeaf-Page-Url":getUrlPath(),"X-Tealeaf-SyncXHR":(!!sync).toString()},messageId=null,currOffset=mS.createMessage({type:0}).offset,serializer=queue.serializer||"json",contentEncoder=queue.encoder,requestData,retObj,timeDiff,tltWorker=CONFIG.tltWorker,unloading="unloading"===core.getState(),pageOrigin=utils.getOriginAndPath().origin,crossOriginRequest=core.isCrossOrigin(queue.url,pageOrigin),workerMsg,xdomainFrameWindow=null;if(count&&queue&&(timeDiff=currOffset-data[count-1].offset,!(inactivityTimeout&&timeDiff>inactivityTimeout+6e4))){if(isLastPostComplete=!1,queue.lastOffset=data[count-1].offset,httpHeaders["X-Tealeaf-MessageTypes"]=getMessageTypes(data),messageId=(data=mS.wrapMessages(data)).serialNumber,xhrLog[messageId-1]={serialNumber:messageId,reqStart:currOffset},data.log={requests:xhrLog},CONFIG.endpointCheckFailed&&(data.log.endpointCheckFailed=!0),getExternalRequestHeaders(),copyHeaders(queueId,httpHeaders),!tltWorker||sync||unloading)if(serializer&&(data=sS.serialize(data,serializer)),contentEncoder&&(retObj=eS.encode(data,contentEncoder))&&(retObj.data&&!retObj.error&&(retObj.data instanceof window.ArrayBuffer?retObj.data.byteLength<data.length?(data=retObj.data,httpHeaders["Content-Encoding"]=retObj.encoding):retObj.error=contentEncoder+" encoder did not reduce payload ("+retObj.data.byteLength+") compared to original data ("+data.length+")":retObj.error="Encoder did not apply "+contentEncoder+" encoding."),retObj.error&&core.logExceptionEvent("EncoderError: "+retObj.error,"UIC",-1)),queue.crossDomainEnabled){if(!(xdomainFrameWindow=utils.getIFrameWindow(queue.crossDomainIFrame)))return;if(requestData={request:{id:messageId,url:queue.url,async:!sync,headers:httpHeaders,data:data}},"function"==typeof window.postMessage)xdomainFrameWindow.postMessage(requestData,queue.crossDomainIFrame.src);else try{xdomainFrameWindow.sendMessage(requestData)}catch(e){return}isLastPostComplete=!0}else aS.sendRequest({id:messageId,oncomplete:handleXhrCallback,url:queue.url,async:!sync,isUnloading:unloading,isCrossOrigin:crossOriginRequest,headers:httpHeaders,data:data});else tltWorker.onmessage=function(event){var result;handleXhrCallback(result=event.data)},workerMsg={id:messageId,url:queue.url,headers:httpHeaders,data:data,isUnloading:unloading,isCrossOrigin:crossOriginRequest},tltWorker.postMessage(workerMsg);clearHeaders(queueId)}}function flushAll(sync){var conf=null,queues=CONFIG.queues,i;for(i=0;i<queues.length;i+=1)flushQueue((conf=queues[i]).qid,sync);return!0}function addToQueue(queueId,data){var currWebEvent,len,msg=mS.createMessage(data),queue=queueManager.get(queueId),size,timeDiff;if((len=queue.data.length)&&(timeDiff=msg.offset-queue.data[len-1].offset,inactivityTimeout&&timeDiff>inactivityTimeout))return core.setAutoFlush(!1),void core.destroy(!1,"inactivity(2)");len=queueManager.push(queueId,msg),size=queue.size;var idElements=[{attribute:"id",value:"submitBuscador"},{attribute:"id",type:"partial",value:'["info-hab-detalles",0],["div",0],["div",3],["a",0]'},{attribute:"id",value:"btnEnd"}];if(4==msg.type&&msg.event&&"click"==msg.event.type&&msg.target)for(let idIndex=0;idIndex<idElements.length;idIndex++){const idElement=idElements[idIndex];var forceFlush=!1;if("id"==idElement.attribute&&("partial"==idElement.type&&msg.target.id.indexOf(idElement.value)>=0?forceFlush=!0:void 0===idElement.type&&msg.target.id==idElement.value&&(forceFlush=!0)),forceFlush)return void flushQueue(queueId)}isSerializedPost&&!isLastPostComplete||(len>=queue.eventThreshold||size>=queue.sizeThreshold)&&autoFlushing&&"unloading"!==core.getState()&&("click"!==(currWebEvent=core.getCurrentWebEvent()).type||CONFIG.ddfoc?flushQueue(queueId):delayFlushOnClick&&(delayFlushOnClick=!1,window.setTimeout((function(){queueManager.exists(queueId)&&(flushQueue(queueId),delayFlushOnClick=!0)}),500)))}function isMsgLimitReached(e){var counter,retVal=!1;return!e||!e.type||((counter=msgCounter[e.type])&&(counter.count+=1,counter.count>counter.limit&&(retVal=!0,counter.count===counter.limit+1&&addToQueue("DEFAULT",{type:16,dataLimit:{messageType:e.type,maxCount:counter.limit}}))),retVal)}function getQueueId(moduleName){var i,j,conf=null,queues=CONFIG.queues,module="",qLen,modulesLen;for(i=0,qLen=queues.length;i<qLen;i+=1)if((conf=queues[i])&&conf.modules)for(j=0,modulesLen=conf.modules.length;j<modulesLen;j+=1)if((module=conf.modules[j])===moduleName)return conf.qid;return defaultQueue.qid}function setFlushTimer(qid,interval){queueTimers[qid]=window.setTimeout((function tick(){autoFlushing&&(!isSerializedPost||isSerializedPost&&isLastPostComplete)&&flushQueue(qid),queueTimers[qid]=window.setTimeout(tick,interval)}),interval)}function clearFlushTimer(qid){var cleared=!1;return qid&&queueTimers[qid]&&(window.clearTimeout(queueTimers[qid]),delete queueTimers[qid],cleared=!0),cleared}function clearAllFlushTimers(){var key=0;for(key in queueTimers)queueTimers.hasOwnProperty(key)&&clearFlushTimer(key);queueTimers={}}function resetFlushTimer(qid){var queue;qid&&clearFlushTimer(qid)&&(queue=queueManager.get(qid)).timerInterval&&setFlushTimer(qid,queue.timerInterval)}function handleConfigUpdated(newConf){}function initQueueService(config){CONFIG=config,coreConfig=core.getCoreConfig(),inactivityTimeout=utils.getValue(coreConfig,"inactivityTimeout",6e5),isSerializedPost=utils.getValue(CONFIG,"serializePost",!0),utils.forEach(CONFIG.queues,(function(conf,i){var crossDomainIFrame=null;"DEFAULT"===conf.qid&&(defaultQueue=conf),conf.crossDomainEnabled&&((crossDomainIFrame=bS.query(conf.crossDomainFrameSelector))||core.fail("Cross domain iframe not found")),queueManager.add(conf.qid,{url:conf.endpoint,eventThreshold:conf.maxEvents,sizeThreshold:conf.maxSize||0,serializer:conf.serializer,encoder:conf.encoder,timerInterval:conf.timerInterval||0,crossDomainEnabled:conf.crossDomainEnabled||!1,crossDomainIFrame:crossDomainIFrame}),void 0!==conf.timerInterval&&conf.timerInterval>0&&setFlushTimer(conf.qid,conf.timerInterval)})),cS.subscribe("configupdated",handleConfigUpdated),isInitialized=!0}function destroy(){autoFlushing&&flushAll(!CONFIG.asyncReqOnUnload),cS.unsubscribe("configupdated",handleConfigUpdated),clearAllFlushTimers(),queueManager.reset(),CONFIG=null,defaultQueue=null,isInitialized=!1}return{init:function(){isInitialized||initQueueService(cS.getServiceConfig("queue")||{})},destroy:function(){destroy()},_getQueue:function(qid){return queueManager.get(qid).data},setAutoFlush:function(flag){autoFlushing=!0===flag},flush:function(queueId){if(queueId=queueId||defaultQueue.qid,!queueManager.exists(queueId))throw new Error("Queue: "+queueId+" does not exist!");flushQueue(queueId)},flushAll:function(sync){return flushAll(!!sync)},post:function(moduleName,queueEvent,queueId){core.isInitialized()&&(queueId=queueId||getQueueId(moduleName),queueManager.exists(queueId)&&(isMsgLimitReached(queueEvent)||addToQueue(queueId,queueEvent)))},resetFlushTimer:function(queueId){queueId=queueId||defaultQueue.qid,queueManager.exists(queueId)&&resetFlushTimer(queueId)}}})),TLT.addService("browserBase",(function(core){"use strict";var customEventList,utils=core.utils,nonClickableTags={optgroup:!0,option:!0,nobr:!0},queryDom={},configService,serializerService=null,config,blacklist,customid,normalizeTargetToParentLink,getXPathListFromNode,isInitialized=!1,specialChildNodes;function updateConfig(){configService=core.getService("config"),serializerService=core.getService("serializer"),config=configService?configService.getServiceConfig("browser"):{},blacklist=config.blacklist||[],customid=config.customid||[],normalizeTargetToParentLink=utils.getValue(config,"normalizeTargetToParentLink",!0)}function initBrowserBase(){updateConfig(),configService&&configService.subscribe("configupdated",updateConfig),isInitialized=!0}function destroy(){configService&&configService.unsubscribe("configupdated",updateConfig),isInitialized=!1}function checkId(node){var i,len;if(!node||!node.id||"string"!=typeof node.id)return!1;for(i=0,len=blacklist.length;i<len;i+=1)if("string"==typeof blacklist[i]){if(node.id===blacklist[i])return!1}else if("object"==typeof blacklist[i]&&(blacklist[i].cRegex||(blacklist[i].cRegex=new RegExp(blacklist[i].regex,blacklist[i].flags)),blacklist[i].cRegex.lastIndex=0,blacklist[i].cRegex.test(node.id)))return!1;return!0}function getEventType(event,target){var returnObj={type:null,subType:null},type;if(!event)return returnObj;switch(type=event.type){case"focusin":type="focus";break;case"focusout":type="blur"}return returnObj.type=type,returnObj}function getElementType(element){var returnObj={type:null,subType:null};return element?(returnObj.type=utils.getTagName(element),returnObj.subType=element.type||null,returnObj):returnObj}function getNodeFromID(selector,type,scope){var idTypes_HTML_ID="-1",idTypes_XPATH_ID="-2",idTypes_ATTRIBUTE_ID="-3",doc,node=null,parts;return selector&&type?(doc=scope||window.document,(type=type.toString())===idTypes_HTML_ID?doc.getElementById?node=doc.getElementById(selector):doc.querySelector&&(node=doc.querySelector("#"+selector)):type===idTypes_ATTRIBUTE_ID?(parts=selector.split("="),doc.querySelector&&(node=doc.querySelector("["+parts[0]+'="'+parts[1]+'"]'))):type===idTypes_XPATH_ID&&(node=queryDom.xpath(selector,doc)),node):node}function xpathListToString(list){var str="null";return list&&list.length?str=serializerService.serialize(list,"json"):str}function getXPathFromNode(node,wantFullPath,wantObject,notInDocument){var retVal,xpath;return xpath=getXPathListFromNode(node,!!wantFullPath,!!notInDocument),retVal=wantObject?xpath:xpathListToString(xpath)}function getDocScrollPosition(doc){var scrollPos={left:-1,top:-1},docElement;return docElement=(doc=doc||document).documentElement||doc.body.parentNode||doc.body,scrollPos.left=Math.round("number"==typeof window.pageXOffset?window.pageXOffset:docElement.scrollLeft),scrollPos.top=Math.round("number"==typeof window.pageYOffset?window.pageYOffset:docElement.scrollTop),scrollPos}function isJQueryEvent(event){return event&&void 0!==event.originalEvent&&void 0!==event.isDefaultPrevented&&!event.isSimulated}function getEventDetails(event){return event?(event.type&&0===event.type.indexOf("touch")&&(isJQueryEvent(event)&&(event=event.originalEvent),"touchstart"===event.type?event=event.touches[event.touches.length-1]:"touchend"===event.type&&(event=event.changedTouches[0])),event):null}function normalizeEvent(event){var e=event||window.event,eventPath,doc=document.documentElement,body=document.body,found=!1,foundElement=null,tagName,i;if(isJQueryEvent(e)&&(e=e.originalEvent),void 0!==event&&void 0!==e.target||(e.target=e.srcElement||window.window,e.timeStamp=Number(new Date),null!==e.pageX&&void 0!==e.pageX||(e.pageX=e.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),e.pageY=e.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0}),"click"===e.type){for(eventPath=e.composedPath?e.composedPath():[],i=0;i<eventPath.length;i+=1)if("button"===(tagName=utils.getTagName(eventPath[i]))){found=!0,foundElement=eventPath[i];break}if(found)return{originalEvent:e,target:foundElement,srcElement:foundElement,type:e.type,pageX:e.pageX,pageY:e.pageY}}return e}function normalizeTarget(event){var i,len,eventPath,target=null;if(!event||!event.type)return null;if(0===event.type.indexOf("touch"))target=getEventDetails(event).target;else if("function"==typeof event.composedPath)if((eventPath=event.composedPath())&&eventPath.length){if(target=eventPath[0],normalizeTargetToParentLink)for(i=0,len=eventPath.length;i<len;i+=1)if("a"===utils.getTagName(eventPath[i])){target=eventPath[i];break}}else target=event.target||window.window;else target=event.srcElement?event.srcElement:event.target;for(;target&&nonClickableTags[utils.getTagName(target)]&&target.parentElement;)target=target.parentElement;return 9===target.nodeType&&target.documentElement&&(target=target.documentElement),target}function getEventPosition(event){var posX=0,posY=0,doc=document.documentElement,body=document.body;return(event=getEventDetails(event))&&(event.pageX||event.pageY?(posX=event.pageX,posY=event.pageY):(event.clientX||event.clientY)&&(posX=event.clientX+(doc?doc.scrollLeft:body?body.scrollLeft:0)-(doc?doc.clientLeft:body?body.clientLeft:0),posY=event.clientY+(doc?doc.scrollTop:body?body.scrollTop:0)-(doc?doc.clientTop:body?body.clientTop:0))),{x:posX,y:posY}}function Point(x,y){this.x=Math.round(x||0),this.y=Math.round(y||0)}function Size(width,height){this.width=Math.round(width||0),this.height=Math.round(height||0)}function ElementData(event,target){var id,elementType,pos;target=normalizeTarget(event),id=this.examineID(target),elementType=getElementType(target),pos=this.examinePosition(event,target),this.element=target,this.id=id.id,this.idType=id.idType,this.type=elementType.type,this.subType=elementType.subType,this.state=this.examineState(target),this.position=new Point(pos.x,pos.y),this.position.relXY=pos.relXY,this.size=new Size(pos.width,pos.height),this.xPath=id.xPath,this.name=id.name}function getZoomValue(){var factor=1,rect,physicalW,logicalW;if(document.body.getBoundingClientRect){try{rect=document.body.getBoundingClientRect()}catch(e){return factor}physicalW=rect.right-rect.left,logicalW=document.body.offsetWidth,factor=Math.round(physicalW/logicalW*100)/100}return factor}function getBoundingClientRectNormalized(element){var rect,rectangle,zoom,scrollPos;if(!element||!element.getBoundingClientRect)return{x:0,y:0,width:0,height:0};try{rect=element.getBoundingClientRect(),scrollPos=getDocScrollPosition(document)}catch(e){return{x:0,y:0,width:0,height:0}}return rectangle={x:rect.left+scrollPos.left,y:rect.top+scrollPos.top,width:rect.right-rect.left,height:rect.bottom-rect.top},utils.isIE&&(rectangle.x-=document.documentElement.clientLeft,rectangle.y-=document.documentElement.clientTop,1!==(zoom=getZoomValue())&&(rectangle.x=Math.round(rectangle.x/zoom),rectangle.y=Math.round(rectangle.y/zoom),rectangle.width=Math.round(rectangle.width/zoom),rectangle.height=Math.round(rectangle.height/zoom))),rectangle}function getNormalizedOrientation(){var orientation=utils.getOrientationAngle();return utils.isLandscapeZeroDegrees&&(180===Math.abs(orientation)||0===Math.abs(orientation)?orientation=90:90!==Math.abs(orientation)&&270!==Math.abs(orientation)||(orientation=0)),orientation}function initCustomEventList(list){var i,len,coreConfig,event,modules,moduleName;if(list)return list;for(moduleName in list={},modules=(coreConfig=core.getCoreConfig()||{}).modules)if(modules.hasOwnProperty(moduleName)&&modules[moduleName].events)for(i=0,len=modules[moduleName].events.length;i<len;i+=1)(event=modules[moduleName].events[i]).state&&(list[event.name]=event.state);return list}function getCustomState(event){var state;return(customEventList=initCustomEventList(customEventList))[event.type]&&(state=utils.getValue(event,customEventList[event.type],null)),state}function WebEvent(event){var pos,eventType,state;this.data=event.data||null,this.delegateTarget=event.delegateTarget||null,(event.gesture||event.originalEvent&&event.originalEvent.gesture)&&(this.gesture=event.gesture||event.originalEvent.gesture,this.gesture.idType=new ElementData(this.gesture,this.gesture.target).idType),pos=getEventPosition(event=normalizeEvent(event)),this.custom=!1,this.nativeEvent=!0===this.custom?null:event,this.position=new Point(pos.x,pos.y),this.target=new ElementData(event,event.target),this.orientation=getNormalizedOrientation(),(state=getCustomState(event))&&(this.target.state=state),this.timestamp=(new Date).getTime(),eventType=getEventType(event,this.target),this.type=eventType.type,this.subType=eventType.subType}function processDOMEvent(event){core.isInitialized()&&core._publishEvent(new WebEvent(event))}function Xpath(node,notInDocument){var fullXpathList=[],topElem,lastElem,xpathList=[];return this instanceof Xpath?"object"==typeof node&&node.nodeType?(3===node.nodeType&&(node=node.parentElement),topElem=(xpathList=getXPathListFromNode(node,!1,notInDocument))[0],fullXpathList=xpathList.length&&(1===topElem.length||2===topElem.length&&"h"===topElem[1])?getXPathListFromNode(node,!0,notInDocument):utils.clone(xpathList),this.xpath=xpathListToString(xpathList),this.xpathList=xpathList,this.fullXpath=xpathListToString(fullXpathList),this.fullXpathList=fullXpathList,lastElem=fullXpathList[fullXpathList.length-1],this.isShadowHost=!!lastElem&&"h"===lastElem[lastElem.length-1],this.applyPrefix=function(prefix){var part,lastPrefixPart;prefix instanceof Xpath&&prefix.fullXpathList.length&&(lastPrefixPart=prefix.fullXpathList[prefix.fullXpathList.length-1],part=this.fullXpathList.shift(),utils.isEqual(part[0],lastPrefixPart[0])?(this.fullXpathList=prefix.fullXpathList.concat(this.fullXpathList),this.fullXpath=xpathListToString(this.fullXpathList),1!==(part=this.xpathList.shift()).length?(this.xpathList=prefix.xpathList.concat(this.xpathList),this.xpath=xpathListToString(this.xpathList)):this.xpathList.unshift(part)):this.fullXpathList.unshift(part))},this.compare=function(xpathB){return xpathB instanceof Xpath?this.fullXpathList.length-xpathB.fullXpathList.length:0},this.isSame=function(xpathB){var isEqual=!1;return xpathB instanceof Xpath?(0===this.compare(xpathB)&&(isEqual=this.fullXpath===xpathB.fullXpath),isEqual):isEqual},void(this.containedIn=function(parentXpath,ignoreShadows){var i,j,len,tmpNode;if(!(parentXpath instanceof Xpath))return!1;if(parentXpath.fullXpathList.length>this.fullXpathList.length)return!1;for(i=0,len=parentXpath.fullXpathList.length;i<len;i+=1)if(!utils.isEqual(parentXpath.fullXpathList[i],this.fullXpathList[i]))return!1;if(!ignoreShadows)for(j=i,len=this.fullXpathList.length;j<len;j+=1)if("h"===(tmpNode=this.fullXpathList[j])[tmpNode.length-1])return!1;return!0})):(this.fullXpath="",this.xpath="",this.fullXpathList=[],void(this.xpathList=[])):null}return specialChildNodes={nobr:!0},getXPathListFromNode=function(node,wantFullPath,notInDocument){var j,documentElement=document.documentElement,idValid=!1,tmpChild=null,parentWindow=null,parentNode=null,xpath=[],xpathComponent,loop=!0,localTop=core._getLocalTop(),tagName="",setHost=!1,shadowRoot;if(!node||!node.nodeType)return xpath;if(11===node.nodeType){if(!(node=node.host))return xpath;setHost=!0}for(;loop;)if(loop=!1,"window"!==(tagName=utils.getTagName(node)))if(tagName&&!setHost&&specialChildNodes[tagName])node=node.parentNode,loop=!0;else{for(idValid=checkId(node);node&&(1===node.nodeType||9===node.nodeType)&&node!==document&&(wantFullPath||!idValid);idValid=checkId(node))if(parentNode=node.parentNode){if(!(tmpChild=parentNode.firstChild)){xpath.push(["XPath Error(1)"]),node=null;break}for(j=0;tmpChild;tmpChild=tmpChild.nextSibling)if(1===tmpChild.nodeType&&utils.getTagName(tmpChild)===tagName){if(tmpChild===node){xpathComponent=[tagName,j],setHost&&(xpathComponent.push("h"),setHost=!1),xpath[xpath.length]=xpathComponent;break}j+=1}11===parentNode.nodeType?(node=parentNode.host,setHost=!0):node=parentNode,tagName=utils.getTagName(node)}else{if(!(parentWindow=utils.getWindow(node))||notInDocument)return xpathComponent=[tagName,0],xpath[xpath.length]=xpathComponent,xpath.reverse();if(parentWindow===localTop)return xpath.reverse();node=parentWindow.frameElement,tagName=utils.getTagName(node),parentNode=node.parentNode}idValid&&!wantFullPath&&(xpathComponent=[node.id],setHost&&(xpathComponent.push("h"),setHost=!1),xpath[xpath.length]=xpathComponent,utils.isIFrameDescendant(node)?(loop=!0,node=utils.getWindow(node).frameElement):notInDocument||documentElement.contains(node)||node.getRootNode&&(shadowRoot=node.getRootNode())&&(node=shadowRoot.host,setHost=!0,loop=!0))}return xpath.reverse()},queryDom.xpath=function(query,scope){var xpath=null,elem,pathElem=null,pathElemIsHost=!1,tagName,i,j,k,len,jlen;if(!query)return null;if(xpath=serializerService.parse(query),elem=scope=scope||document,!xpath)return null;for(i=0,len=xpath.length;i<len&&elem;i+=1){if(pathElemIsHost=(pathElem=xpath[i]).length>1&&"h"===pathElem[pathElem.length-1],1===pathElem.length||2===pathElem.length&&pathElemIsHost)elem=scope.getElementById?scope.getElementById(pathElem[0]):scope.querySelector?scope.querySelector("#"+pathElem[0]):null;else{for(j=0,k=-1,jlen=elem.childNodes.length;j<jlen;j+=1)if(1===elem.childNodes[j].nodeType&&utils.getTagName(elem.childNodes[j])===pathElem[0].toLowerCase()&&(k+=1)===pathElem[1]){elem=elem.childNodes[j];break}if(k!==pathElem[1])return null}if(!elem)return null;if(pathElemIsHost&&i<len-1){if(!elem.shadowRoot)return null;scope=elem=elem.shadowRoot}"frame"!==(tagName=utils.getTagName(elem))&&"iframe"!==tagName||(scope=elem=utils.getIFrameWindow(elem).document)}return elem!==scope&&elem?elem:null},ElementData.HTML_ID=-1,ElementData.XPATH_ID=-2,ElementData.ATTRIBUTE_ID=-3,ElementData.prototype.examineID=function(target,notInDocument){var retObj={id:"",idType:0,xPath:"",name:""},i=customid.length,attrib,contained,documentElement=document.documentElement;if(!target)return retObj;retObj.xPath=getXPathFromNode(target,!1,!1,notInDocument),retObj.name=target.name;try{if(contained="function"!=typeof documentElement.contains||documentElement.contains(target),(notInDocument||contained)&&(!utils.getWindow(target)||!utils.isIFrameDescendant(target)))if(checkId(target))retObj.id=target.id,retObj.idType=ElementData.HTML_ID;else if(customid.length&&target.attributes)for(;i;)i-=1,void 0!==(attrib=target.attributes[customid[i]])&&(retObj.id=customid[i]+"="+(attrib.value||attrib),retObj.idType=ElementData.ATTRIBUTE_ID)}catch(e){}return retObj.id||(retObj.id=retObj.xPath,"null"!==retObj.id&&(retObj.idType=ElementData.XPATH_ID)),retObj},ElementData.prototype.examineState=function(target){return utils.getTargetState(target)},ElementData.prototype.examinePosition=function(event,target){var posOnDoc=getEventPosition(event),elPos=getBoundingClientRectNormalized(target);return elPos.x=posOnDoc.x||posOnDoc.y?Math.round(Math.abs(posOnDoc.x-elPos.x)):elPos.width/2,elPos.y=posOnDoc.x||posOnDoc.y?Math.round(Math.abs(posOnDoc.y-elPos.y)):elPos.height/2,elPos.relXY=utils.calculateRelativeXY(elPos),elPos},Xpath.prototype={},{init:function(){isInitialized||initBrowserBase()},destroy:function(){destroy()},WebEvent:WebEvent,ElementData:ElementData,Xpath:Xpath,processDOMEvent:processDOMEvent,getNormalizedOrientation:getNormalizedOrientation,getXPathFromNode:function(moduleName,node,wantFullPath,wantObject,notInDocument){return getXPathFromNode(node,wantFullPath,wantObject,notInDocument)},getNodeFromID:getNodeFromID,queryDom:queryDom}})),TLT.addService("browser",(function(core){"use strict";var utils=core.utils,configService=core.getService("config"),browserBaseService=core.getService("browserBase"),addEventListener=null,removeEventListener=null,serviceConfig=configService?configService.getServiceConfig("browser"):{},useCapture=utils.getValue(serviceConfig,"useCapture",!0),isInitialized=!1,errorCodes_NO_QUERY_SELECTOR="NOQUERYSELECTOR",wrapWebEvent=function(handler){return function(event){var webEvent=new browserBaseService.WebEvent(event);"resize"===event.type||"hashchange"===event.type?setTimeout((function(){handler(webEvent)}),5):handler(webEvent)}},queryDom={list2Array:function(nodeList){var len=nodeList.length,result=[],i;if(void 0===nodeList.length)return[nodeList];for(i=0;i<len;i+=1)result[i]=nodeList[i];return result},find:function(query,scope,type){return type=type||"css",this.list2Array(this[type](query,scope))},css:function(query,scope){var self=this,bodyEl=document.getElementsByTagName("body")[0],jQuery=serviceConfig.jQueryObject?utils.access(serviceConfig.jQueryObject):window.jQuery,sizzle=serviceConfig.sizzleObject?utils.access(serviceConfig.sizzleObject):window.Sizzle;if(void 0===document.querySelectorAll){if(self.css=function(query,scope){return scope=scope||document,self.Sizzle(query,scope)},void 0===self.Sizzle)try{bodyEl===sizzle("html > body",document)[0]&&(self.Sizzle=sizzle)}catch(e1){try{bodyEl===jQuery(document).find("html > body").get()[0]&&(self.Sizzle=function(query,scope){return jQuery(scope).find(query).get()})}catch(e2){core.fail("Neither querySelectorAll nor Sizzle was found.",errorCodes_NO_QUERY_SELECTOR)}}}else self.css=function(query,scope){return(scope=scope||document).querySelectorAll(query)};return self.css(query,scope)}},handlerMappings=(data=new utils.WeakMap,{add:function(originalHandler){var handlers=data.get(originalHandler)||[wrapWebEvent(originalHandler),0];return handlers[1]+=1,data.set(originalHandler,handlers),handlers[0]},find:function(originalHandler){var handlers=data.get(originalHandler);return handlers?handlers[0]:null},remove:function(originalHandler){var handlers=data.get(originalHandler);handlers&&(handlers[1]-=1,handlers[1]<=0&&data.remove(originalHandler))}}),data;function verifyPrerequisites(){var jQuery=serviceConfig.jQueryObject?utils.access(serviceConfig.jQueryObject):window.jQuery,sizzle=serviceConfig.sizzleObject?utils.access(serviceConfig.sizzleObject):window.Sizzle;document.querySelectorAll||jQuery||sizzle||core.fail("querySelectorAll does not exist!",errorCodes_NO_QUERY_SELECTOR)}function initBrowserServiceW3C(){if(queryDom.xpath=browserBaseService.queryDom.xpath,verifyPrerequisites(),"function"==typeof document.addEventListener)addEventListener=function(target,eventName,handler){target.addEventListener(eventName,handler,useCapture)},removeEventListener=function(target,eventName,handler){target.removeEventListener(eventName,handler,useCapture)};else{if(void 0===document.attachEvent)throw new Error("Unsupported browser");addEventListener=function(target,eventName,handler){target.attachEvent("on"+eventName,handler)},removeEventListener=function(target,eventName,handler){target.detachEvent("on"+eventName,handler)}}isInitialized=!0}return{init:function(){isInitialized||initBrowserServiceW3C()},destroy:function(){isInitialized=!1},getServiceName:function(){return"W3C"},query:function(query,scope,type){try{return queryDom.find(query,scope,type)[0]||null}catch(err){return[]}},queryAll:function(query,scope,type){try{return queryDom.find(query,scope,type)}catch(err){return[]}},subscribe:function(eventName,target,handler){var wrappedHandler=handlerMappings.add(handler);addEventListener(target,eventName,wrappedHandler)},unsubscribe:function(eventName,target,handler){var wrappedHandler=handlerMappings.find(handler);if(wrappedHandler){try{removeEventListener(target,eventName,wrappedHandler)}catch(e){}handlerMappings.remove(handler)}}}})),TLT.addService("ajax",(function(core){"use strict";var utils=core.utils,getXHRObject,useBeacon=!1,useFetch=!1,isInitialized=!1;function convertHeadersToArray(headersObj){var header="",headers=[];for(header in headersObj)headersObj.hasOwnProperty(header)&&headers.push([header,headersObj[header]]);return headers}function convertHeadersToQuery(headersObj){var header="",headers="?";for(header in headersObj)headersObj.hasOwnProperty(header)&&(headers+=encodeURIComponent(header)+"="+encodeURIComponent(headersObj[header])+"&");return headers.slice(0,-1)}function makeBeaconCall(message){var data,retVal=!1,query=convertHeadersToQuery(message.headers);return data="string"==typeof message.data?message.data:message.data?new Uint8Array(message.data):"",retVal=navigator.sendBeacon(message.url+query,data)}function makeFetchRequest(message){var headers=message.headers||{},msgId=message.id||0,fetchOptions={method:message.type,headers:headers,body:message.data,mode:message.isCrossOrigin?"cors":"same-origin",credentials:message.isCrossOrigin?"omit":"same-origin",keepalive:!message.isCrossOrigin&&message.isUnloading,cache:"no-store"},oncomplete=message.oncomplete||function(){};headers["X-Requested-With"]="fetch",window.fetch(message.url,fetchOptions).then((function(response){var result={success:response.ok,statusCode:response.status,statusText:response.statusText,id:msgId};result.success?response.text().then((function(responseData){try{result.data=JSON.parse(responseData)}catch(e){result.data=responseData}oncomplete(result)})).catch((function(e){result.statusCode=1,result.statusText=e.message,oncomplete(result)})):oncomplete(result)})).catch((function(e){var result={success:!1,statusCode:2,statusText:e.message,id:msgId};oncomplete(result)}))}function wrapAjaxResponse(origCallback){if("function"==typeof origCallback)return function ajaxResponseHandler(event){var xhr,status,success=!1;if(event){if(!(xhr=event.target))return origCallback(event);(status=xhr.status)>=200&&status<300&&(success=!0),origCallback({headers:utils.extractResponseHeaders(xhr.getAllResponseHeaders()),responseText:xhr.responseText,statusCode:status,statusText:xhr.statusText,id:xhr.id,success:success})}}}function makeAjaxCall(message){var xhr=getXHRObject(),headers=[["X-Requested-With","XMLHttpRequest"]],timeout=0,async="boolean"!=typeof message.async||message.async,header="",callbackFn=null,i,length;for(message.headers&&(headers=headers.concat(convertHeadersToArray(message.headers))),message.contentType&&headers.push(["Content-Type",message.contentType]),xhr.open(message.type.toUpperCase(),message.url,async),i=0,length=headers.length;i<length;i+=1)(header=headers[i])[0]&&header[1]&&xhr.setRequestHeader(header[0],header[1]);message.error&&(message.error=wrapAjaxResponse(message.error),xhr.addEventListener("error",message.error)),xhr.onreadystatechange=callbackFn=function(){4===xhr.readyState&&(xhr.onreadystatechange=callbackFn=function(){},message.timeout&&window.clearTimeout(timeout),message.oncomplete({id:message.id,headers:utils.extractResponseHeaders(xhr.getAllResponseHeaders()),responseText:xhr.responseText||null,statusCode:xhr.status,statusText:xhr.statusText,success:xhr.status>=200&&xhr.status<300}),xhr=null)},xhr.send(message.data||null),callbackFn(),message.timeout&&(timeout=window.setTimeout((function(){xhr&&(xhr.onreadystatechange=function(){},4!==xhr.readyState&&(xhr.abort(),"function"==typeof message.error&&message.error({id:message.id,statusCode:xhr.status,statusText:"timeout",success:!1})),message.oncomplete({id:message.id,headers:utils.extractResponseHeaders(xhr.getAllResponseHeaders()),responseText:xhr.responseText||null,statusCode:xhr.status,statusText:"timeout",success:!1}),xhr=null)}),message.timeout))}function initAjaxService(){var queueServiceConfig=core.getServiceConfig("queue");getXHRObject=void 0!==window.XMLHttpRequest?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")},queueServiceConfig&&(useBeacon=utils.getValue(queueServiceConfig,"useBeacon",!0)&&"function"==typeof navigator.sendBeacon,useFetch=utils.getValue(queueServiceConfig,"useFetch",!0)&&"function"==typeof window.fetch),isInitialized=!0}return{init:function(){isInitialized||initAjaxService()},destroy:function(){isInitialized=!1},sendRequest:function(message){var makeXHRRequest=!0,retVal;message.type=message.type||"POST",!message.isUnloading&&message.async||!useBeacon||(makeXHRRequest=!1,(retVal=makeBeaconCall(message))||(makeXHRRequest=!0)),makeXHRRequest&&(message.async&&useFetch&&!message.timeout?makeFetchRequest(message):makeAjaxCall(message))}}})),TLT.addService("domCapture",(function(core){"use strict";var configService=core.getService("config"),browserBaseService=core.getService("browserBase"),browserService=core.getService("browser"),messageService,dcServiceConfig,dcDefaultOptions={maxMutations:100,maxLength:1e6,captureShadowDOM:!1,captureFrames:!1,removeScripts:!0,removeComments:!0,captureStyle:!0},defaultDiffObserverConfig={childList:!0,attributes:!0,attributeOldValue:!0,characterData:!0,subtree:!0},diffEnabled=void 0!==window.MutationObserver,diffObserver,diffObserverConfig=defaultDiffObserverConfig,observedWindowList=[],observedShadowHostList=[],shadowEventList=[],mutatedTargets=[],mutatedAttrTargets=[],mutationCount=0,mutationThreshold=100,forceFullDOM=!1,fullDOMSent=!1,isInitialized=!1,dupNode=function(){},getDOMCapture=function(){},updateConfig=function(){},publishEvent=core._publishEvent,lazyload=!1,utils=core.utils;function clearMutationRecords(){mutatedTargets=[],mutatedAttrTargets=[],mutationCount=0,forceFullDOM=!1}function consolidateTargets(mutatedTargets){var i,j,parentTarget;if(mutatedTargets&&mutatedTargets.length)for(mutatedTargets=mutatedTargets.sort((function(xpathA,xpathB){return xpathA.compare(xpathB)})),i=0;i<mutatedTargets.length;i+=1)for(parentTarget=mutatedTargets[i],j=i+1;j<mutatedTargets.length;j+=0)mutatedTargets[j].containedIn(parentTarget)?mutatedTargets.splice(j,1):j+=1}function removeOldAttrValues(attrList){var i,len;if(attrList)for(i=0,len=attrList.length;i<len;i+=1)delete attrList[i].oldValue;return attrList}function hasAttr(attrList,attrName){var i,len,found=!1;if(!attrList||!attrName)return found;for(i=0,len=attrList.length;i<len;i+=1)if(attrList[i].name===attrName){found=!0;break}return found}function mergeAttributeChanges(currAttrList,newAttr){var i,len,attr,found;for(i=0,len=currAttrList.length,found=!1;i<len;i+=1)if((attr=currAttrList[i]).name===newAttr.name){attr.oldValue===newAttr.value?currAttrList.splice(i,1):attr.value=newAttr.value,found=!0;break}return found||currAttrList.push(newAttr),currAttrList}function addToMutatedTargets(xpath,mutationRecord){var i,j,k,len,found,target,isParent;for(xpath.removedNodes=mutationRecord.removedNodes.length,xpath.addedNodes=utils.convertToArray(mutationRecord.addedNodes),i=0,len=mutatedTargets.length;i<len;i+=1)if(target=mutatedTargets[i],xpath.isSame(target)){if(xpath.removedNodes)for(j=0;j<mutationRecord.removedNodes.length;j+=1)-1!==(k=target.addedNodes.indexOf(mutationRecord.removedNodes[j]))&&(target.addedNodes.splice(k,1),xpath.removedNodes-=1);if(target.removedNodes+=xpath.removedNodes,target.addedNodes.concat(xpath.addedNodes),!target.removedNodes&&!target.addedNodes.length){for(isParent=!1,j=0;j<mutatedTargets.length;j+=1)if(target!==mutatedTargets[j]&&mutatedTargets[j].containedIn(target)){isParent=!0;break}isParent||mutatedTargets.splice(i,1)}found=!0;break}found||mutatedTargets.push(xpath)}function isNodePartOfMutatedTargets(xpath,node){var i,j,len,found=!1,mutatedNodes,target;for(i=0,len=mutatedTargets.length;!found&&i<len;i+=1)if(target=mutatedTargets[i],xpath.containedIn(target))for(mutatedNodes=target.addedNodes,j=0;j<mutatedNodes.length;j+=1)if(mutatedNodes[j].contains&&mutatedNodes[j].contains(node)){found=!0;break}return found}function addToMutatedAttributeTargets(xpath,mutationRecord){var i,len,attributeName,currAttributes,found,target=null;if("checked"===(attributeName=mutationRecord.attributeName)||"selected"===attributeName){if(target=browserBaseService.ElementData.prototype.examineID(mutationRecord.target),messageService.isPrivacyMatched(target))return;target=null}if("value"===attributeName&&((target=browserBaseService.ElementData.prototype.examineID(mutationRecord.target)).currState=utils.getTargetState(mutationRecord.target)||{},target.currState.value?messageService.applyPrivacyToTarget(target):target=null),xpath.attributes=[{name:attributeName,oldValue:mutationRecord.oldValue,value:target?target.currState.value:mutationRecord.target.getAttribute(attributeName)}],(currAttributes=xpath.attributes[0]).oldValue!==currAttributes.value){for(i=0,len=mutatedAttrTargets.length,found=!1;i<len;i+=1)if(target=mutatedAttrTargets[i],xpath.isSame(target)){target.attributes=mergeAttributeChanges(target.attributes,currAttributes),target.attributes.length?isNodePartOfMutatedTargets(xpath,mutationRecord.target)&&mutatedAttrTargets.splice(i,1):mutatedAttrTargets.splice(i,1),found=!0;break}found||isNodePartOfMutatedTargets(xpath,mutationRecord.target)||mutatedAttrTargets.push(xpath)}}function processMutationRecords(records){var i,len,fullXpathList,record,xpath;if(records&&records.length)if((mutationCount+=records.length)>=mutationThreshold)forceFullDOM||(forceFullDOM=!0);else for(i=0,len=records.length;i<len;i+=1)if(record=records[i],(xpath=new browserBaseService.Xpath(record.target))&&(fullXpathList=xpath.fullXpathList).length&&"html"===fullXpathList[0][0])switch(record.type){case"characterData":case"childList":addToMutatedTargets(xpath,record);break;case"attributes":addToMutatedAttributeTargets(xpath,record);break;default:utils.clog("Unknown mutation type: "+record.type)}}function initDOMDiffObserver(){var observer;return observer=new window.MutationObserver((function(records){records&&(processMutationRecords(records),utils.clog("Processed ["+records.length+"] mutation records."),core.invokeMutationCallbacks(records))}))}function startObserver(){var attachShadow=Element.prototype.attachShadow;return diffObserver?(diffObserver.observe(window.document,diffObserverConfig),utils.getValue(dcServiceConfig,"options.captureShadowDOM",!1)&&(Element.prototype.attachShadow=function(option){var sh=attachShadow.call(this,option);return this.shadowRoot&&diffObserver.observe(this.shadowRoot,diffObserverConfig),sh}),lazyload=!0,diffObserver):null}function initDOMCaptureService(config){var i,len,module,event,eventList,isCaptureShadowDOMEnabled,coreConfig=configService.getCoreConfig();if(configService.subscribe("configupdated",updateConfig),messageService=core.getService("message"),(dcServiceConfig=config).options=utils.mixin({},dcDefaultOptions,dcServiceConfig.options),diffEnabled=diffEnabled&&utils.getValue(dcServiceConfig,"diffEnabled",!0),mutationThreshold=utils.getValue(dcServiceConfig.options,"maxMutations",100),diffEnabled&&(diffObserverConfig=utils.getValue(dcServiceConfig,"diffObserverConfig",defaultDiffObserverConfig),diffObserver=initDOMDiffObserver(),observedWindowList.push(window)),(isCaptureShadowDOMEnabled=dcServiceConfig.options.captureShadowDOM)&&(!window.ShadyDOM||!window.ShadyDOM.inUse)&&(Element.prototype.attachShadow||"").toString().indexOf("[native code]")<0&&(dcServiceConfig.options.captureShadowDOM=!1,isCaptureShadowDOMEnabled=!1),isCaptureShadowDOMEnabled)for(module in coreConfig.modules)if(coreConfig.modules.hasOwnProperty(module))for(i=0,len=(eventList=coreConfig.modules[module].events||[]).length;i<len;i+=1)eventList[i].attachToShadows&&(event=eventList[i].name,-1===utils.indexOf(shadowEventList,event)&&shadowEventList.push(event));startObserver(),isInitialized=!0}function destroyDOMCaptureService(){configService.unsubscribe("configupdated",updateConfig),diffObserver&&diffObserver.disconnect(),isInitialized=!1}function getUniqueID(){var id;return id="tlt-"+utils.getSerialNumber()}function getTagList(node,tagName,attribute){var i,attrName,attrValue,nodeList,tag,tagList=[];if(!node||!node.getElementsByTagName||!tagName)return tagList;if(attribute&&2===attribute.length&&(attrName=attribute[0],attrValue=attribute[1]),(nodeList=node.getElementsByTagName(tagName))&&nodeList.length)for(i=nodeList.length-1;i>=0;i-=1)tag=nodeList[i],attrName?tag[attrName]===attrValue&&tagList.push(tag):tagList.push(tag);return tagList}function removeTags(node,tagName,attribute){var i,tag,tagList;for(i=(tagList=getTagList(node,tagName,attribute)).length-1;i>=0;i-=1)(tag=tagList[i]).parentNode.removeChild(tag);return node}function removeBase64Src(node,sizeLimit){var i,tag,tagList=getTagList(node,"img"),pattern=new RegExp("^data:image/(.*?);base64");for(i=0;i<tagList.length;i++)tag=tagList[i],pattern.test(tag.src)&&tag.src.length>sizeLimit&&(tag.src="",tag.setAttribute("removedByUIC",!0));return node}function removeNodes(node,nodeType){var i,child;for(i=0;node.hasChildNodes()&&i<node.childNodes.length;i+=1)(child=node.childNodes[i]).nodeType===nodeType?(node.removeChild(child),i-=1):child.hasChildNodes()&&removeNodes(child,nodeType);return node}function getDoctypeAsString(node){var doc,doctype,doctypeStr=null;if(!node)return doctypeStr;switch(node.nodeType){case 1:(doc=node.ownerDocument)&&doc.documentElement===node&&(doctype=doc.doctype);break;case 9:doctype=node.doctype}return doctype&&(doctypeStr="<!DOCTYPE "+doctype.name+(doctype.publicId?' PUBLIC "'+doctype.publicId+'"':"")+(!doctype.publicId&&doctype.systemId?" SYSTEM":"")+(doctype.systemId?' "'+doctype.systemId+'"':"")+">"),doctypeStr}function fixInputs(source,target){var i,sourceInputElement,targetInputElement,sourceInputList,targetInputList,len;if(target&&(sourceInputList=source.getElementsByTagName("input"),targetInputList=target.getElementsByTagName("input")))for(i=0,len=targetInputList.length;i<len;i+=1)switch(sourceInputElement=sourceInputList[i],(targetInputElement=targetInputList[i]).type){case"checkbox":case"radio":(utils.isIE?sourceInputElement.checked:targetInputElement.checked)?targetInputElement.setAttribute("checked","checked"):targetInputElement.removeAttribute("checked");break;default:targetInputElement.setAttribute("value",targetInputElement.value),targetInputElement.getAttribute("type")||targetInputElement.setAttribute("type","text")}}function fixTextareas(source,target){var i,len,sourceTextareaElement,sourceTextareaList,targetTextareaElement,targetTextareaList;if(source&&source.getElementsByTagName&&target&&target.getElementsByTagName&&(sourceTextareaList=source.getElementsByTagName("textarea"),targetTextareaList=target.getElementsByTagName("textarea"),sourceTextareaList&&targetTextareaList))for(i=0,len=sourceTextareaList.length;i<len;i+=1)sourceTextareaElement=sourceTextareaList[i],(targetTextareaElement=targetTextareaList[i]).setAttribute("value",sourceTextareaElement.value),targetTextareaElement.value=targetTextareaElement.textContent=sourceTextareaElement.value}function fixSelectLists(source,target){var sourceElem,sourceList,targetElem,targetList,i,j,len;if(source&&source.getElementsByTagName&&target&&target.getElementsByTagName&&(sourceList=source.getElementsByTagName("select"),targetList=target.getElementsByTagName("select"),sourceList))for(i=0,len=sourceList.length;i<len;i+=1)for(sourceElem=sourceList[i],targetElem=targetList[i],j=0;j<sourceElem.options.length;j+=1)j===sourceElem.selectedIndex||sourceElem.options[j].selected?targetElem.options[j].setAttribute("selected","selected"):targetElem.options[j].removeAttribute("selected")}function getHTMLText(node){var nodeType,htmlText=null;if(node)switch(nodeType=node.nodeType||-1){case 11:htmlText=node.innerHTML;break;case 9:htmlText=node.documentElement?node.documentElement.outerHTML:"";break;case 1:htmlText=node.outerHTML;break;default:htmlText=null}return htmlText}function isNodeValidForCapture(node){var nodeType,valid=!1;if(node&&"object"==typeof node)switch(nodeType=node.nodeType||-1){case 9:case 1:valid=!0;break;default:valid=!1}return valid}function getFrames(source,target,options){var i,j,len,frameTag,frameTags=["iframe","frame"],sourceIframe,iframeWindow,iframeDoc,iframeCapture,iframeID,iframeSrc,returnObject={frames:[]},sourceIframeList,targetIframeList,urlInfo;for(j=0;j<frameTags.length;j+=1)if(frameTag=frameTags[j],sourceIframeList=source.getElementsByTagName(frameTag),targetIframeList=target.getElementsByTagName(frameTag),sourceIframeList)for(i=0,len=sourceIframeList.length;i<len;i+=1)try{sourceIframe=sourceIframeList[i],(iframeWindow=utils.getIFrameWindow(sourceIframe))&&iframeWindow.document&&"about:blank"!==iframeWindow.location.href&&(iframeDoc=iframeWindow.document,iframeCapture=getDOMCapture(iframeDoc,iframeDoc,"",options),iframeID=getUniqueID(),targetIframeList[i].setAttribute("tltid",iframeID),iframeCapture.tltid=iframeID,urlInfo=utils.getOriginAndPath(iframeDoc.location),iframeCapture.host=urlInfo.origin,iframeCapture.url=urlInfo.path,iframeCapture.charset=iframeDoc.characterSet||iframeDoc.charset,(iframeSrc=targetIframeList[i].getAttribute("src"))||(iframeSrc=iframeWindow.location.href,targetIframeList[i].setAttribute("src",iframeSrc)),returnObject.frames=returnObject.frames.concat(iframeCapture.frames),delete iframeCapture.frames,returnObject.frames.push(iframeCapture))}catch(e){}return returnObject}function attachEventListeners(root){var i,len,event;for(root.TLTListeners=root.TLTListeners||{},i=0,len=shadowEventList.length;i<len;i+=1)event=shadowEventList[i],root.TLTListeners[event]||(browserService.subscribe(event,root,publishEvent),root.TLTListeners[event]=!0)}function getShadowDOM(source,target,options,thisSource){var i,len,captures,element,elements,hostXpath,returnObject={shadows:[]};if(!source||!thisSource&&!source.children)return returnObject;for(i=0,len=(elements=thisSource?[source]:source.children).length;i<len;i+=1){if((element=elements[i]).shadowRoot&&(hostXpath=new browserBaseService.Xpath(element),captures=getDOMCapture(element.ownerDocument,element.shadowRoot,"",options),returnObject.shadows.push({root:captures.root,xpath:hostXpath.xpath}),returnObject.shadows=returnObject.shadows.concat(captures.shadows),attachEventListeners(element.shadowRoot),diffEnabled))try{diffObserver.observe(element.shadowRoot,diffObserverConfig),element.shadowRoot.TLTListeners.mutation=!0,-1===utils.indexOf(observedShadowHostList,element)&&observedShadowHostList.push(element)}catch(e){utils.clog("Failed to observe shadow root.",e,element)}captures=getShadowDOM(element,null,options),returnObject.shadows=returnObject.shadows.concat(captures.shadows)}return returnObject}function getCapturedLength(captureObj){var i,j,len,attrLen,attrRecord,diffRecord,totalLength=0;if(!captureObj)return totalLength;if(captureObj.root){if(totalLength+=captureObj.root.length,captureObj.frames)for(i=0,len=captureObj.frames.length;i<len;i+=1)captureObj.frames[i].root&&(totalLength+=captureObj.frames[i].root.length)}else if(captureObj.diffs)for(i=0,len=captureObj.diffs.length;i<len;i+=1)if(totalLength+=(diffRecord=captureObj.diffs[i]).xpath.length,diffRecord.root)totalLength+=diffRecord.root.length;else if(diffRecord.attributes)for(j=0,attrLen=diffRecord.attributes.length;j<attrLen;j+=1)totalLength+=(attrRecord=diffRecord.attributes[j]).name.length,attrRecord.value&&(totalLength+=attrRecord.value.length);return totalLength}function consolidateMutationsWithAttributeChanges(){var i,j,len,parentTarget;for(i=0,len=mutatedTargets.length;i<len&&mutatedAttrTargets.length;i+=1)for(parentTarget=mutatedTargets[i],j=0;j<mutatedAttrTargets.length;j+=1)mutatedAttrTargets[j].containedIn(parentTarget)&&(mutatedAttrTargets.splice(j,1),j-=1)}function enumerateUntrackedShadows(node){var i,len,element,elements,shadowList=[];if(!node||!node.children)return shadowList;for(i=0,len=(elements=node.children).length;i<len;i+=1)(element=elements[i]).shadowRoot&&(element.shadowRoot.TLTListeners||shadowList.push([element,element.shadowRoot]),shadowList=shadowList.concat(enumerateUntrackedShadows(element.shadowRoot))),shadowList=shadowList.concat(enumerateUntrackedShadows(element));return shadowList}function getUntrackedShadows(doc,options){var i,len,shadows,retObj,untrackedShadowList;if(doc&&options&&options.captureShadowDOM){for(i=0,len=(untrackedShadowList=enumerateUntrackedShadows(doc)).length,shadows=[];i<len;i+=1)retObj=getShadowDOM(untrackedShadowList[i][0],null,options,!0),shadows=shadows.concat(retObj.shadows);return shadows}}function getFullDOM(doc,options){var captureObj,urlInfo,shadowRoots,startTime,endTime;return(captureObj=getDOMCapture(doc,doc,null,options))||(captureObj={}),captureObj.charset=doc.characterSet||doc.charset,urlInfo=utils.getOriginAndPath(doc.location),captureObj.host=urlInfo.origin,captureObj.url=urlInfo.path,captureObj}function getDOMDiff(options){var i,len,returnObj={fullDOM:!1,diffs:[],attributeDiffs:{}},diff,captureShadowDOM,untrackedShadows,target,targetXpath,attributes,pattern=new RegExp("^data:image/(.*?);base64");for(consolidateTargets(mutatedTargets),consolidateMutationsWithAttributeChanges(),captureShadowDOM=options.captureShadowDOM,options.captureShadowDOM=!1,i=0,len=mutatedTargets.length;i<len;i+=1){if(targetXpath=mutatedTargets[i],target=browserBaseService.getNodeFromID(targetXpath.xpath,-2),targetXpath.isShadowHost&&(target=target.shadowRoot),target===window.document.body)return options.captureShadowDOM=captureShadowDOM,getFullDOM(window.document,options);(diff=getDOMCapture(window.document,target,targetXpath,options)).shadows&&0===diff.shadows.length&&delete diff.shadows,diff.frames&&0===diff.frames.length&&delete diff.frames,diff.xpath=targetXpath.xpath,returnObj.diffs.push(diff)}function addAttributeDiffs(attribute,index){attribute&&attribute.name&&(returnObj.attributeDiffs[diff.xpath][attribute.name]={value:attribute.value})}function removeBase64SrcValue(attrList){var i,len;for(i=0,len=attrList.length;i<len;i+=1)if("src"===attrList[i].name&&pattern.test(attrList[i].value)&&attrList[i].value.length>options.discardBase64){attrList[i].value="",attrList.push({name:"removedByUIC",value:!0});break}return attrList}for(i=0,len=mutatedAttrTargets.length;i<len;i+=1)attributes=removeOldAttrValues((targetXpath=mutatedAttrTargets[i]).attributes),options.hasOwnProperty("discardBase64")&&(target=browserBaseService.getNodeFromID(targetXpath.xpath,-2))&&"img"===target.tagName.toLowerCase()&&attributes&&(attributes=removeBase64SrcValue(attributes)),diff={xpath:hasAttr(targetXpath.attributes,"id")?targetXpath.fullXpath:targetXpath.xpath,attributes:attributes},returnObj.diffs.push(diff),returnObj.attributeDiffs[diff.xpath]={},utils.forEach(diff.attributes,addAttributeDiffs);return options.captureShadowDOM=captureShadowDOM,(untrackedShadows=getUntrackedShadows(window.document,options))&&untrackedShadows.length&&(returnObj.shadows=untrackedShadows),returnObj}return dupNode=function(node){var dup=null;return isNodeValidForCapture(node)&&!(dup=node.cloneNode(!0))&&node.documentElement&&(dup=node.documentElement.cloneNode(!0)),dup},getDOMCapture=function(doc,root,rootXpath,options){var cloned=!0,rootCopy,frameCaptureObj,shadowDOMObj,captureObj={},serializedDOM;if(!doc||!root)return captureObj;if(!(rootCopy=dupNode(root,doc))&&root.host)cloned=!1;else if(!rootCopy)return captureObj;return cloned&&(options.removeScripts&&(removeTags(rootCopy,"script"),removeTags(rootCopy,"noscript")),options.keepImports||removeTags(rootCopy,"link",["rel","import"]),options.removeComments&&removeNodes(rootCopy,8),options.captureStyle||removeTags(rootCopy,"style"),options.hasOwnProperty("discardBase64")&&removeBase64Src(rootCopy,options.discardBase64),fixSelectLists(root,rootCopy),fixInputs(root,rootCopy),fixTextareas(root,rootCopy),rootCopy=messageService.applyPrivacyToNode(rootCopy,rootXpath,doc),options.captureFrames&&(frameCaptureObj=getFrames(root,rootCopy,options))),options.captureShadowDOM&&(shadowDOMObj=getShadowDOM(root,rootCopy,options)),frameCaptureObj&&(captureObj=utils.mixin(captureObj,frameCaptureObj)),shadowDOMObj&&(captureObj=utils.mixin(captureObj,shadowDOMObj)),serializedDOM=(getDoctypeAsString(root)||"")+getHTMLText(rootCopy||root),captureObj.root=messageService.applyPrivacyPatterns(serializedDOM),captureObj},updateConfig=function(){initDOMCaptureService((configService=core.getService("config")).getServiceConfig("domCapture")||{})},{init:function(){configService=core.getService("config"),isInitialized||initDOMCaptureService(configService.getServiceConfig("domCapture")||{})},destroy:function(){destroyDOMCaptureService()},observeWindow:function(win){win&&(utils.getValue(dcServiceConfig,"options.captureFrames",!1)||win===window)&&-1===utils.indexOf(observedWindowList,win)&&(observedWindowList.push(win),diffObserver&&lazyload&&diffObserver.observe(win.document,diffObserverConfig))},captureDOM:function(root,options){var i,len,captureObj=null,observedWindow,totalLength=0;if(!isInitialized||utils.isIE&&document.documentMode<10)return captureObj;if(options=utils.mixin({},dcServiceConfig.options,options),root=root||window.document,!fullDOMSent||!diffEnabled||forceFullDOM||options.forceFullDOM){if(diffObserver&&diffObserver.disconnect(),(captureObj=getFullDOM(root,options)).fullDOM=!0,captureObj.forced=!(!forceFullDOM&&!options.forceFullDOM),fullDOMSent=!0,diffObserver)for(i=0,len=observedWindowList.length;i<len;i+=1){observedWindow=observedWindowList[i];try{diffObserver.observe(observedWindow.document,diffObserverConfig)}catch(e){observedWindowList.splice(i,1),len=observedWindowList.length,i-=1}}}else(captureObj=getDOMDiff(options)).fullDOM=!captureObj.diffs;return diffEnabled&&(captureObj.mutationCount=mutationCount),clearMutationRecords(),options.maxLength&&(totalLength=getCapturedLength(captureObj))>options.maxLength&&(captureObj={errorCode:101,error:"Captured length ("+totalLength+") exceeded limit ("+options.maxLength+")."}),captureObj}}})),TLT.addService("encoder",(function(core){"use strict";var encoderServiceConfig={},configService=null,handleConfigUpdated=null,isInitialized=!1;function getEncoder(type){var encoder=null;return type?((encoder=encoderServiceConfig[type])&&"string"==typeof encoder.encode&&(encoder.encode=core.utils.access(encoder.encode)),encoder):encoder}function initEncoderService(config){encoderServiceConfig=config,configService.subscribe("configupdated",handleConfigUpdated),isInitialized=!0}function destroy(){configService.unsubscribe("configupdated",handleConfigUpdated),isInitialized=!1}return handleConfigUpdated=function(){initEncoderService((configService=core.getService("config")).getServiceConfig("encoder")||{})},{init:function(){configService=core.getService("config"),isInitialized||initEncoderService(configService.getServiceConfig("encoder")||{})},destroy:function(){destroy()},encode:function(data,type){var encoder,result,returnObj={data:null,encoding:null,error:null};if("string"!=typeof data&&!data||!type)return returnObj.error="Invalid "+(data?"type":"data")+" parameter.",returnObj;if(!(encoder=getEncoder(type)))return returnObj.error="Specified encoder ("+type+") not found.",returnObj;if("function"!=typeof encoder.encode)return returnObj.error="Configured encoder ("+type+") 'encode' method is not a function.",returnObj;try{result=encoder.encode(data)}catch(e){return returnObj.error="Exception "+(e.name?e.name+" - ":"")+(e.message||e),returnObj}return result&&null!==core.utils.getValue(result,"buffer",null)?(returnObj.data=result.buffer,returnObj.encoding=encoder.defaultEncoding,returnObj):(returnObj.error="Encoder ("+type+") returned an invalid result.",returnObj)}}})),TLT.addService("message",(function(core){"use strict";var utils=core.utils,tabId=core.getTabId(),prevScreenviewOffsetTime=0,screenviewOffsetTime=0,count=0,messageCount=0,sessionStart=new Date,browserBaseService=core.getService("browserBase"),browserService=core.getService("browser"),configService=core.getService("config"),config=configService.getServiceConfig("message")||{},windowHref=core.normalizeUrl(window.location.href),windowHostname=window.location.hostname,privacy=config.hasOwnProperty("privacy")?config.privacy:[],privacyPatterns,privacyMasks={},maskingCharacters_lower="x",maskingCharacters_upper="X",maskingCharacters_numeric="9",maskingCharacters_symbol="@",devicePixelRatio=parseFloat((window.devicePixelRatio||1).toFixed(2)),screen=window.screen||{},screenWidth=screen.width||0,screenHeight=screen.height||0,deviceOrientation=browserBaseService.getNormalizedOrientation(),deviceWidth=utils.isiOS&&90===Math.abs(deviceOrientation)?screenHeight:screenWidth,deviceHeight=utils.isiOS&&90===Math.abs(deviceOrientation)?screenWidth:screenHeight,deviceToolbarHeight=window.screen?window.screen.height-window.screen.availHeight:0,startWidth=window.innerWidth||document.documentElement.clientWidth,startHeight=window.innerHeight||document.documentElement.clientHeight,isInitialized=!1,shadowMessageCache={},isShadowDomCacheEnabled=!1;function Message(event){var key="",timestamp=event.timestamp||(new Date).getTime();if(delete event.timestamp,this.type=event.type,this.offset=timestamp-sessionStart.getTime(),this.screenviewOffset=0,2===event.type?(prevScreenviewOffsetTime=screenviewOffsetTime,screenviewOffsetTime=timestamp,"UNLOAD"===event.screenview.type&&(this.screenviewOffset=timestamp-(prevScreenviewOffsetTime||sessionStart.getTime()))):screenviewOffsetTime&&(this.screenviewOffset=timestamp-screenviewOffsetTime),this.type)for(key in this.count=messageCount+=1,this.fromWeb=!0,event)event.hasOwnProperty(key)&&(this[key]=event[key])}function maskStr(mask,str){var filter=privacyMasks.PVC_MASK_BASIC;return"string"!=typeof str?str:(mask?mask.maskType===privacyMasks.PVC_MASK_EMPTY.maskType?filter=privacyMasks.PVC_MASK_EMPTY:mask.maskType===privacyMasks.PVC_MASK_BASIC.maskType?filter=privacyMasks.PVC_MASK_BASIC:mask.maskType===privacyMasks.PVC_MASK_TYPE.maskType?filter=privacyMasks.PVC_MASK_TYPE:mask.maskType===privacyMasks.PVC_MASK_CUSTOM.maskType&&"function"!=typeof(filter="string"==typeof mask.maskFunction?utils.access(mask.maskFunction):mask.maskFunction)&&(filter=privacyMasks.PVC_MASK_BASIC):filter=privacyMasks.PVC_MASK_BASIC,filter(str))}function applyMask(mask,state){var prop;if(mask&&state)for(prop in state)state.hasOwnProperty(prop)&&("value"===prop?state[prop]=maskStr(mask,state[prop]):delete state[prop])}function matchesTarget(targets,target){return-1!==utils.matchTarget(targets,target)}function applyPrivacyPatterns(str){var i,len,begin,duration,rule;if(!str)return"";for(i=0,len=privacyPatterns.length;i<len;i+=1)(rule=privacyPatterns[i]).cRegex.lastIndex=0,str=str.replace(rule.cRegex,rule.replacement);return str}function privacyFilter(target){var i,len,exclude,mask,maskApplied=!1,prevState,currState;if(!target||!target.currState&&!target.prevState||!target.id)return target;for(prevState=target.prevState,currState=target.currState,i=0,len=privacy.length;i<len;i+=1)if(mask=privacy[i],exclude=utils.getValue(mask,"exclude",!1),matchesTarget(mask.targets,target)!==exclude){prevState&&prevState.hasOwnProperty("value")&&applyMask(mask,prevState),currState&&currState.hasOwnProperty("value")&&applyMask(mask,currState),maskApplied=!0;break}return maskApplied||(prevState&&prevState.value&&(prevState.value=applyPrivacyPatterns(prevState.value)),currState&&currState.value&&(currState.value=applyPrivacyPatterns(currState.value))),target}function applyPrivacyToMessage(message){return message&&message.target?(privacyFilter(message.target),message):message}function maskElement(element,mask){var i,len,maskedValue,option;if(mask&&element)if(element.value&&(maskedValue=maskStr(mask,element.value),element.setAttribute("value",maskedValue),element.value=maskedValue),element.checked&&element.removeAttribute("checked"),"select"===utils.getTagName(element))for(element.selectedIndex=-1,i=0,len=element.options.length;i<len;i+=1)(option=element.options[i]).removeAttribute("selected"),option.selected=!1;else"textarea"===utils.getTagName(element)&&(element.textContent=element.value)}function applyRegexAndXpathPrivacyRules(regexAndXpathRules,root,rootXpath,doc,excludedElements,excludeMask){var i,j,k,len,element,elementInfo,elements=[],elementXpath,exclude,rule,target,qr;if(!regexAndXpathRules.length&&!excludedElements.length&&!excludeMask)return[];if(!(qr=browserService.queryAll("input, select, textarea",root))||!qr.length)return[];for(i=0,len=excludedElements.length;i<len;i+=1)-1!==(j=qr.indexOf(excludedElements[i]))&&qr.splice(j,1);if(regexAndXpathRules.length)for(i=0,len=qr.length,elements=[];i<len;i+=1)qr[i].value&&(-2===(elementInfo=browserBaseService.ElementData.prototype.examineID(qr[i],!0)).idType&&((elementXpath=new browserBaseService.Xpath(qr[i],!0)).applyPrefix(rootXpath),elementInfo.id=elementXpath.xpath),elements.push({id:elementInfo.id,idType:elementInfo.idType,element:qr[i]}));for(i=0,len=regexAndXpathRules.length;i<len;i+=1)if(rule=privacy[regexAndXpathRules[i].ruleIndex],exclude=utils.getValue(rule,"exclude",!1),"string"==typeof(target=rule.targets[regexAndXpathRules[i].targetIndex]).id&&-2===target.idType)for(j=0;j<elements.length;j+=1)elements[j].idType===target.idType&&elements[j].id===target.id&&(exclude?(k=qr.indexOf(element),qr.splice(k,1)):maskElement(element=elements[j].element,rule));else for(j=0;j<elements.length;j+=1)target.cRegex.lastIndex=0,elements[j].idType===target.idType&&target.cRegex.test(elements[j].id)&&(element=elements[j].element,exclude?(k=qr.indexOf(element),qr.splice(k,1)):maskElement(element,rule));if(excludeMask)for(i=0,len=qr.length;i<len;i+=1)maskElement(qr[i],excludeMask)}function applyPrivacyToNode(root,rootXpath,doc){var i,j,k,element,exclude,excludedElements=[],excludeMask,len,mask,qr,qrLen,regexAndXpathRules=[],target,targets,targetsLen;if(!root||!doc)return null;for(i=0,len=privacy.length;i<len;i+=1)for(mask=privacy[i],(exclude=utils.getValue(mask,"exclude",!1))&&(excludeMask=mask),j=0,targetsLen=(targets=mask.targets).length;j<targetsLen;j+=1)if("string"==typeof(target=targets[j]))if(qr=browserService.queryAll(target,root),exclude)excludedElements=excludedElements.concat(qr);else for(k=0,qrLen=qr.length;k<qrLen;k+=1)maskElement(element=qr[k],mask);else if("string"==typeof target.id)switch(target.idType){case-1:case-3:element=browserBaseService.getNodeFromID(target.id,target.idType,root),exclude?excludedElements.push(element):maskElement(element,mask);break;case-2:regexAndXpathRules.push({ruleIndex:i,targetIndex:j,exclude:exclude})}else regexAndXpathRules.push({ruleIndex:i,targetIndex:j,exclude:exclude});return applyRegexAndXpathPrivacyRules(regexAndXpathRules,root,rootXpath,doc,excludedElements,excludeMask),root}function isPrivacyMatched(target){var i,len,mask,retVal=!1;if(!target)return retVal;for(i=0,len=privacy.length;i<len;i+=1)if(matchesTarget((mask=privacy[i]).targets,target)){retVal=!0;break}return retVal}function updateConfig(){var i,j,len,rule,rulesLen,target,targets,targetsLen;for(configService=core.getService("config"),config=configService.getServiceConfig("message")||{},privacy=config.privacy||[],privacyPatterns=config.privacyPatterns||[],isShadowDomCacheEnabled=config.shadowDomCacheEnabled||!1,i=0,rulesLen=privacy.length;i<rulesLen;i+=1)for(j=0,targetsLen=(targets=(rule=privacy[i]).targets).length;j<targetsLen;j+=1)"object"==typeof(target=targets[j])&&("string"==typeof target.idType&&(target.idType=+target.idType),"object"==typeof target.id&&(target.cRegex=new RegExp(target.id.regex,target.id.flags)));for(i=(len=privacyPatterns.length)-1;i>=0;i-=1)"object"==typeof(rule=privacyPatterns[i]).pattern?rule.cRegex=new RegExp(rule.pattern.regex,rule.pattern.flags):privacyPatterns.splice(i,1)}function initMessageService(){configService.subscribe&&configService.subscribe("configupdated",updateConfig),updateConfig(),isInitialized=!0}function destroy(){configService.unsubscribe("configupdated",updateConfig),isInitialized=!1}function optimizeDOMCaptureMessage(domCapture){var dcid=domCapture.dcid,shadows=domCapture.shadows||[],isFullDom=domCapture.fullDOM,ageThreshold=1,i,len,key,shadowNode,cachedNode;if(0!==shadows.length&&isFullDom){for(key in shadowMessageCache)shadowMessageCache.hasOwnProperty(key)&&(shadowMessageCache[key].age+=1);for(i=0,len=shadows.length;i<len;i+=1)shadowNode=shadows[i],(cachedNode=shadowMessageCache[shadowNode.xpath])&&cachedNode.root===shadowNode.root?(cachedNode.hitCount+=1,cachedNode.age-=1,shadowNode.cacheDCID=cachedNode.dcid,delete shadowNode.root):shadowMessageCache[shadowNode.xpath]={root:shadowNode.root,dcid:dcid,hitCount:0,age:0};for(key in shadowMessageCache)shadowMessageCache.hasOwnProperty(key)&&(cachedNode=shadowMessageCache[key]).age>cachedNode.hitCount+1&&delete shadowMessageCache[key]}}return privacyMasks.PVC_MASK_EMPTY=function(value){return""},privacyMasks.PVC_MASK_BASIC=function(value){var retMask="XXXXX";return"string"!=typeof value?"":value.length?"XXXXX":""},privacyMasks.PVC_MASK_TYPE=function(value){var characters,i,len,retMask="";if("string"!=typeof value)return retMask;for(i=0,len=(characters=value.split("")).length;i<len;i+=1)utils.isNumeric(characters[i])?retMask+=maskingCharacters_numeric:utils.isUpperCase(characters[i])?retMask+=maskingCharacters_upper:utils.isLowerCase(characters[i])?retMask+=maskingCharacters_lower:retMask+=maskingCharacters_symbol;return retMask},privacyMasks.PVC_MASK_EMPTY.maskType=1,privacyMasks.PVC_MASK_BASIC.maskType=2,privacyMasks.PVC_MASK_TYPE.maskType=3,privacyMasks.PVC_MASK_CUSTOM={maskType:4},{init:function(){isInitialized||initMessageService()},destroy:function(){destroy()},applyPrivacyToNode:applyPrivacyToNode,applyPrivacyToMessage:applyPrivacyToMessage,applyPrivacyToTarget:privacyFilter,applyPrivacyPatterns:applyPrivacyPatterns,isPrivacyMatched:isPrivacyMatched,createMessage:function(event){if(void 0===event.type)throw new TypeError("Invalid queueEvent given!");return 12===event.type&&isShadowDomCacheEnabled&&optimizeDOMCaptureMessage(event.domCapture),applyPrivacyToMessage(new Message(event))},wrapMessages:function(messages){var messagePackage={messageVersion:"12.0.0.0",serialNumber:count+=1,sessions:[{id:core.getPageId(),tabId:tabId,startTime:sessionStart.getTime(),timezoneOffset:sessionStart.getTimezoneOffset(),messages:messages,clientEnvironment:{webEnvironment:{libVersion:"6.0.0.1960",domain:windowHostname,page:windowHref,referrer:document.referrer,screen:{devicePixelRatio:devicePixelRatio,deviceWidth:deviceWidth,deviceHeight:deviceHeight,deviceToolbarHeight:deviceToolbarHeight,width:startWidth,height:startHeight,orientation:deviceOrientation}}}}]},webEnvScreen=messagePackage.sessions[0].clientEnvironment.webEnvironment.screen;return webEnvScreen.orientationMode=utils.getOrientationMode(webEnvScreen.orientation),messagePackage},getSessionStart:function(){return sessionStart}}})),TLT.addService("serializer",(function(core){"use strict";var configService=core.getService("config"),serialize={},parse={},defaultSerializer={json:void 0!==window.JSON?{serialize:window.JSON.stringify,parse:window.JSON.parse}:{}},updateConfig=null,isInitialized=!1;function addObjectIfExist(paths,rootObj,propertyName){var i,len,obj;for(i=0,len=(paths=paths||[]).length;i<len;i+=1)if("string"==typeof(obj=paths[i])&&(obj=core.utils.access(obj)),"function"==typeof obj){rootObj[propertyName]=obj;break}}function checkParserAndSerializer(){var isParserAndSerializerInvalid;return"function"!=typeof serialize.json||"function"!=typeof parse.json?isParserAndSerializerInvalid=!0:(isParserAndSerializerInvalid=void 0===parse.json('{"foo": "bar"}')||"bar"!==parse.json('{"foo": "bar"}').foo,isParserAndSerializerInvalid=(isParserAndSerializerInvalid=(isParserAndSerializerInvalid=void 0===parse.json("[1, 2]")||((isParserAndSerializerInvalid=isParserAndSerializerInvalid||1!==parse.json("[1, 2]")[0])||2!==parse.json("[1,2]")[1]))||'{"foo":"bar"}'!==serialize.json({foo:"bar"}))||"[1,2]"!==serialize.json([1,2])),isParserAndSerializerInvalid}function initSerializerService(config){var format;for(format in config)config.hasOwnProperty(format)&&(addObjectIfExist(config[format].stringifiers,serialize,format),addObjectIfExist(config[format].parsers,parse,format));serialize.json=serialize.json||defaultSerializer.json.serialize,parse.json=parse.json||defaultSerializer.json.parse,"function"==typeof serialize.json&&"function"==typeof parse.json||core.fail("JSON parser and/or serializer not provided in the UIC config. Can't continue."),checkParserAndSerializer()&&core.fail("JSON stringification and parsing are not working as expected"),configService&&configService.subscribe("configupdated",updateConfig),isInitialized=!0}function destroy(){serialize={},parse={},configService&&configService.unsubscribe("configupdated",updateConfig),isInitialized=!1}return updateConfig=function(){initSerializerService((configService=core.getService("config")).getServiceConfig("serializer"))},{init:function(){var ssConfig;isInitialized||initSerializerService(ssConfig=configService?configService.getServiceConfig("serializer"):{})},destroy:function(){destroy()},parse:function(data,type){return parse[type=type||"json"](data)},serialize:function(data,type){var serializedData;return serializedData=serialize[type=type||"json"](data)}}})),TLT.addModule("TLCookie",(function(context){"use strict";var moduleConfig={},reqHeaders=[],sessionIDStorageTTL=0,sessionIDUsesCookie=!0,sessionIDUsesStorage=!1,wcxCookieName="WCXSID",tltCookieName="TLTSID",visitorCookieName="CoreID6",wcxCookieValue,tltCookieValue,visitorCookieValue=null,tlAppKey,utils=context.utils;function generateTLTSID(){var dataSet="123456789",tltsid;return utils.getRandomString(1,dataSet)+utils.getRandomString(31,dataSet+"0")}function createTLTSIDCookie(){var cookieValue=generateTLTSID(),secure=!!moduleConfig.secureTLTSID;return utils.setCookie(tltCookieName,cookieValue,void 0,void 0,void 0,secure),utils.getCookieValue(tltCookieName)}function getVisitorCookie(){if(!visitorCookieValue&&window.cmRetrieveUserID)try{window.cmRetrieveUserID((function(id){visitorCookieValue=id}))}catch(e){visitorCookieValue=null}}function getSIDFromStorage(sidKey){var expires,items,itemVal,sidValue;if(localStorage&&sidKey)return(itemVal=localStorage.getItem(sidKey))&&(items=itemVal.split("|"),expires=parseInt(items[0],10),Date.now()>expires?localStorage.removeItem(sidKey):sidValue=items[1]),sidValue}function setSIDInStorage(sidKey,sidValue){var expires;if(localStorage&&sidKey)return sidValue=sidValue||generateTLTSID(),expires=Date.now()+sessionIDStorageTTL,localStorage.setItem(sidKey,expires+"|"+sidValue),getSIDFromStorage(sidKey)}function addReqHeaders(){return reqHeaders}function processConfig(config){if(reqHeaders=[],sessionIDUsesCookie=utils.getValue(config,"sessionIDUsesCookie",!0),sessionIDUsesStorage=utils.getValue(config,"sessionIDUsesStorage",!1),config.tlAppKey&&(tlAppKey=config.tlAppKey,reqHeaders.push({name:"X-Tealeaf-SaaS-AppKey",value:tlAppKey})),config.visitorCookieName&&(visitorCookieName=config.visitorCookieName),config.wcxCookieName&&(wcxCookieName=config.wcxCookieName),(wcxCookieValue=utils.getCookieValue(wcxCookieName))&&reqHeaders.push({name:"X-WCXSID",value:wcxCookieValue}),config.sessionizationCookieName&&(tltCookieName=config.sessionizationCookieName),sessionIDUsesStorage){sessionIDStorageTTL=utils.getValue(config,"sessionIDStorageTTL",6e5);try{tltCookieValue=getSIDFromStorage(tltCookieName)}catch(e){sessionIDUsesStorage=!1}}if(!tltCookieValue&&sessionIDUsesCookie&&(tltCookieValue=utils.getCookieValue(tltCookieName)),!tltCookieValue)if(wcxCookieValue)tltCookieName=wcxCookieName,tltCookieValue=wcxCookieValue;else{if(sessionIDUsesStorage)try{tltCookieValue=setSIDInStorage(tltCookieName)}catch(e2){sessionIDUsesStorage=!1}!tltCookieValue&&sessionIDUsesCookie&&(tltCookieValue=createTLTSIDCookie())}context.setSessionCookieInfo(tltCookieName,tltCookieValue),tltCookieValue||(tltCookieValue="Check7UIC7Cookie7Configuration77"),reqHeaders.push({name:"X-Tealeaf-SaaS-TLTSID",value:tltCookieValue}),reqHeaders.length&&TLT.registerBridgeCallbacks([{enabled:!0,cbType:"addRequestHeaders",cbFunction:addReqHeaders}])}function isCookieWhitelisted(cookieName){var i,len,result=!1,rule,whitelist=moduleConfig.appCookieWhitelist;if(!whitelist||!whitelist.length)return result;for(i=0,len=whitelist.length;i<len&&!result;i+=1)(rule=whitelist[i]).regex?(rule.cRegex||(rule.cRegex=new RegExp(rule.regex,rule.flags)),rule.cRegex.lastIndex=0,result=rule.cRegex.test(cookieName)):result=rule===cookieName;return result}function postAppCookies(){var i,j,len,appCookies={},cookie,cookies=document.cookie,cookieList=[],cookieName="",cookieValue="";if(cookies){for(i=0,len=(cookieList=cookies.split("; ")).length;i<len;i+=1){if((j=(cookie=cookieList[i]).indexOf("="))>=0)try{cookieName=decodeURIComponent(cookie.substr(0,j))}catch(e1){cookieName=cookie.substr(0,j)}if(cookieValue=cookie.substr(j+1),isCookieWhitelisted(cookieName))try{appCookies[cookieName]=decodeURIComponent(cookieValue)}catch(e2){appCookies[cookieName]=cookieValue}}visitorCookieValue&&!appCookies[visitorCookieName]&&(appCookies[visitorCookieName]=visitorCookieValue),context.post({type:14,cookies:appCookies})}}return{init:function(){processConfig(moduleConfig=context.getConfig()||{}),getVisitorCookie()},destroy:function(){sessionIDUsesStorage&&setSIDInStorage(tltCookieName,tltCookieValue),window.setTimeout((function(){TLT.registerBridgeCallbacks([{enabled:!1,cbType:"addRequestHeaders",cbFunction:addReqHeaders}])}))},onevent:function(webEvent){switch(webEvent.type){case"screenview_load":utils.getValue(moduleConfig,"appCookieWhitelist.length",0)&&(getVisitorCookie(),postAppCookies())}}}})),TLT&&"function"==typeof TLT.addModule&&TLT.addModule("overstat",(function(context){"use strict";var utils=context.utils,eventMap={},configDefaults={updateInterval:250,hoverThreshold:1e3,hoverThresholdMax:12e4,gridCellMaxX:10,gridCellMaxY:10,gridCellMinWidth:20,gridCellMinHeight:20},MAX_ITERATIONS=50;function getConfigValue(key){var overstatConfig,value=(context.getConfig()||{})[key];return"number"==typeof value?value:configDefaults[key]}function postUIEvent(hoverEvent,options){var target=utils.getValue(hoverEvent,"webEvent.target",{}),tagName=utils.getValue(target,"element.tagName")||"",type="input"===tagName.toLowerCase()?utils.getValue(target,"element.type"):"",tlType=utils.getTlType(target),uiEvent={type:9,event:{hoverDuration:hoverEvent.hoverDuration,hoverToClick:utils.getValue(options,"hoverToClick")},target:{id:target.id||"",idType:target.idType||"",name:target.name||"",tlType:tlType,type:tagName,subType:type,position:{width:utils.getValue(target,"element.offsetWidth",0),height:utils.getValue(target,"element.offsetHeight",0),relXY:hoverEvent.relXY}}};uiEvent.target.id&&context.post(uiEvent)}function getNativeNode(node){return node&&!node.nodeType&&node.element&&(node=node.element),node}function stopNode(node){return!(node=getNativeNode(node))||node===document.body||node===document.html||node===document}function getParent(node){return(node=getNativeNode(node))?node.parentNode:null}function getOffsetParent(node){return(node=getNativeNode(node))?node.offsetParent||node.parentElement||getParent(node):null}function isChildOf(root,node){var idx=0;if(!node||node===root)return!1;for(node=getParent(node);!stopNode(node)&&idx++<50;){if(node===root)return!0;node=getParent(node)}return idx>=50&&utils.clog("Overstat isChildOf() hit iterations limit"),!1}function getNativeEvent(e){return e.nativeEvent&&(e=e.nativeEvent),e}function getNodeType(node){return(node=getNativeNode(node))&&node.nodeType||-1}function getNodeTagName(node){return(node=getNativeNode(node))&&node.tagName?node.tagName.toUpperCase():""}function ignoreNode(node){var tagName=getNodeTagName(node);return 1!==getNodeType(node)||"TR"===tagName||"TBODY"===tagName||"THEAD"===tagName}function getXPathFromNode(node){return node?node.xPath?node.xPath:(node=getNativeNode(node),context.getXPathFromNode(node)):""}function callHoverEventMethod(key,methodName){var hEvent=eventMap[key];if(hEvent&&hEvent[methodName])return hEvent[methodName]()}function HoverEvent(dm,gx,gy,webEvent){this.xPath=null!==dm?getXPathFromNode(dm):"",this.domNode=dm,this.hoverDuration=0,this.hoverUpdateTime=0,this.gridX=Math.max(gx,0),this.gridY=Math.max(gy,0),this.parentKey="",this.updateTimer=-1,this.disposed=!1,this.childKeys={},this.webEvent=webEvent,this.getKey=function(){return this.xPath+":"+this.gridX+","+this.gridY},this.update=function(){var curTime=(new Date).getTime(),key=this.getKey();0!==this.hoverUpdateTime&&(this.hoverDuration+=curTime-this.hoverUpdateTime),this.hoverUpdateTime=curTime,clearTimeout(this.updateTimer),this.updateTimer=setTimeout((function(){callHoverEventMethod(key,"update")}),getConfigValue("updateInterval"))},this.dispose=function(leaveClone){if(clearTimeout(this.updateTimer),delete eventMap[this.getKey()],this.disposed=!0,leaveClone){var cloneEvt=this.clone();eventMap[cloneEvt.getKey()]=cloneEvt,cloneEvt.update()}},this.process=function(wasClicked){if(clearTimeout(this.updateTimer),this.disposed)return!1;var addedToQueue=!1,hEvent=this,idx=0;if(this.hoverDuration>=getConfigValue("hoverThreshold")){for(this.hoverDuration=Math.min(this.hoverDuration,getConfigValue("hoverThresholdMax")),addedToQueue=!0,postUIEvent(this,{hoverToClick:!!wasClicked});void 0!==hEvent&&idx++<50;)hEvent.dispose(wasClicked),hEvent=eventMap[hEvent.parentKey];idx>=50&&utils.clog("Overstat process() hit iterations limit")}else this.dispose(wasClicked);return addedToQueue},this.clone=function(){var cloneEvent=new HoverEvent(this.domNode,this.gridX,this.gridY);return cloneEvent.parentKey=this.parentKey,cloneEvent}}function createHoverEvent(node,x,y,webEvt){return new HoverEvent(node,x,y,webEvt)}function calculateNodeOffset(node){if(node&&node.position)return{x:node.position.x,y:node.position.y};for(var boundingRect=(node=getNativeNode(node))&&node.getBoundingClientRect?node.getBoundingClientRect():null,offsetX=boundingRect?boundingRect.left:node?node.offsetLeft:0,offsetY=boundingRect?boundingRect.top:node?node.offsetHeight:0,lastOffsetX=offsetX,lastOffsetY=offsetY,offsetDiffX=0,offsetDiffY=0,curNode=getOffsetParent(node),idx=0;curNode&&idx++<50&&!stopNode(curNode);)offsetDiffX=curNode.offsetLeft-(curNode.scrollLeft||0),offsetDiffY=curNode.offsetTop-(curNode.scrollTop||0),offsetDiffX===lastOffsetX&&offsetDiffY===lastOffsetY||(offsetX+=offsetDiffX,offsetY+=offsetDiffY,lastOffsetX=offsetDiffX,lastOffsetY=offsetDiffY),curNode=getOffsetParent(curNode);return idx>=50&&utils.clog("Overstat calculateNodeOffset() hit iterations limit"),isNaN(offsetX)&&(offsetX=0),isNaN(offsetY)&&(offsetY=0),{x:offsetX,y:offsetY}}function calculateRelativeCursorPos(node,cursorX,cursorY){var nodeOffset=calculateNodeOffset(node=getNativeNode(node)),offsetX=cursorX-nodeOffset.x,offsetY=cursorY-nodeOffset.y;return isFinite(offsetX)||(offsetX=0),isFinite(offsetY)||(offsetY=0),{x:offsetX,y:offsetY}}function formatRelXY(x,y){return(x=Math.floor(1e4*Math.min(Math.max(x,0),1))/1e4)+","+(y=Math.floor(1e4*Math.min(Math.max(y,0),1))/1e4)}function calculateGridCell(node,offsetX,offsetY){var boundingRect=(node=getNativeNode(node)).getBoundingClientRect?node.getBoundingClientRect():null,oWidth=boundingRect?boundingRect.width:node.offsetWidth,oHeight=boundingRect?boundingRect.height:node.offsetHeight,cellWidth=oWidth&&oWidth>0?Math.max(oWidth/getConfigValue("gridCellMaxX"),getConfigValue("gridCellMinWidth")):getConfigValue("gridCellMinWidth"),cellHeight=oHeight&&oHeight>0?Math.max(oHeight/getConfigValue("gridCellMaxY"),getConfigValue("gridCellMinHeight")):getConfigValue("gridCellMinHeight"),cellX=Math.min(Math.floor(offsetX/cellWidth),getConfigValue("gridCellMaxX")),cellY=Math.min(Math.floor(offsetY/cellHeight),getConfigValue("gridCellMaxY")),xVal=oWidth>0?offsetX/oWidth:0,yVal=oHeight>0?offsetY/oHeight:0,relXYVal="";return isFinite(cellX)||(cellX=0),isFinite(cellY)||(cellY=0),{x:cellX,y:cellY,relXY:relXYVal=formatRelXY(xVal,yVal)}}function cleanupHoverEvents(curEvent){var hEvent=curEvent,curKey,allowedKeyMap={},key=null,addedToQueue=!1,idx=0;for(allowedKeyMap[curEvent.getKey()]=!0;void 0!==hEvent&&idx++<50&&(allowedKeyMap[hEvent.parentKey]=!0,""!==hEvent.parentKey&&hEvent.parentKey!==hEvent.getKey());)idx>=50&&utils.clog("Overstat cleanupHoverEvents() hit iterations limit"),hEvent=eventMap[hEvent.parentKey];for(key in eventMap)eventMap.hasOwnProperty(key)&&!allowedKeyMap[key]&&(hEvent=eventMap[key])&&(addedToQueue?hEvent.dispose():addedToQueue=hEvent.process())}function processEventsByDomNode(eventNode,keyToIgnore){var hEvent=null,key=null,addedToQueue=!1;for(key in eventMap)eventMap.hasOwnProperty(key)&&(hEvent=eventMap[key])&&hEvent.domNode===eventNode&&hEvent.getKey()!==keyToIgnore&&(addedToQueue?hEvent.dispose():addedToQueue=hEvent.process())}function hoverHandler(e,node,isParent){return node||(node=e.target),stopNode(node)?null:utils.isiOS||utils.isAndroid?null:(ignoreNode(node)?hEvent=hoverHandler(e,getOffsetParent(node),isParent):((hEvent=new HoverEvent(node,(gPos=calculateGridCell(node,(rPos=calculateRelativeCursorPos(node,e.position.x,e.position.y)).x,rPos.y)).x,gPos.y,e)).relXY=gPos.relXY,key=hEvent.getKey(),eventMap[key]?hEvent=eventMap[key]:eventMap[key]=hEvent,hEvent.update(),isParent||((offsetParent=getOffsetParent(node))&&null!==(parentEvent=hoverHandler(e,offsetParent,!0))&&(parentKey=parentEvent.getKey(),(key=hEvent.getKey())!==parentKey&&(hEvent.parentKey=parentKey)),cleanupHoverEvents(hEvent))),hEvent);var rPos,gPos,hEvent,key,parentKey,parentEvent,offsetParent}function leaveHandler(e){isChildOf((e=getNativeEvent(e)).target,e.relatedTarget)||processEventsByDomNode(e.target)}function clickHandler(e){var hEvent=null,key=null,addedToQueue=!1;for(key in eventMap)eventMap.hasOwnProperty(key)&&(hEvent=eventMap[key])&&(addedToQueue?hEvent.dispose():addedToQueue=hEvent.process(!0))}function submitHandler(e){context.performFormCompletion(!0)}function handleEvent(e){var targetId;if(utils.getValue(e,"target.id"))switch(e.type){case"mousemove":hoverHandler(e);break;case"mouseout":leaveHandler(e);break;case"click":clickHandler(e);break;case"submit":submitHandler(e)}}return{init:function(){},destroy:function(){var key;for(key in eventMap)eventMap.hasOwnProperty(key)&&(eventMap[key].dispose(),delete eventMap[key])},onevent:function(event){"object"==typeof event&&event.type&&handleEvent(event)},onmessage:function(msg){},createHoverEvent:createHoverEvent,cleanupHoverEvents:cleanupHoverEvents,eventMap:eventMap}})),TLT&&"function"==typeof TLT.addModule&&TLT.addModule("performance",(function(context){"use strict";var moduleState={loadReceived:!1,unloadReceived:!1,perfEventSent:!1},perfTimerId=null,calculatedRenderTime=0,config,utils=context.utils,performanceObserver,alertCount=0,performanceAlertCfg,performanceAlertDefaultOptions={enabled:!1,resourceTypes:[],blacklist:[]};function parseTiming(timing){var epoch=0,normalizedTiming={},prop="",value=0;if(!timing||"object"!=typeof timing||!timing.navigationStart)return{};for(prop in epoch=timing.navigationStart,timing)(Object.prototype.hasOwnProperty.call(timing,prop)||"number"==typeof timing[prop])&&(value=timing[prop],normalizedTiming[prop]="number"==typeof value&&value&&"navigationStart"!==prop?value-epoch:value);return normalizedTiming}function getRenderTime(timing){var renderTime=0,startTime,endTime;return timing&&(startTime=timing.responseEnd>0&&timing.responseEnd<timing.domLoading?timing.responseEnd:timing.domLoading,endTime=timing.loadEventStart,utils.isNumeric(startTime)&&utils.isNumeric(endTime)&&endTime>startTime&&(renderTime=endTime-startTime)),renderTime}function processLoadEvent(event){var startTime=context.getStartTime();event.timestamp>startTime&&!calculatedRenderTime&&(calculatedRenderTime=event.timestamp-startTime)}function postPerformanceEvent(window){var navType,queueEvent={type:7,performance:{}},navigation,performance,timing;if(window&&!moduleState.perfEventSent){if(timing=(performance=window.performance||{}).timing,navigation=performance.navigation,timing){if(!(timing.loadEventStart||utils.isSafari&&2===navigation.type))return;queueEvent.performance.timing=parseTiming(timing),queueEvent.performance.timing.renderTime=getRenderTime(timing)}else{if(!config.calculateRenderTime)return;queueEvent.performance.timing={renderTime:calculatedRenderTime,calculated:!0}}if(config.renderTimeThreshold&&queueEvent.performance.timing.renderTime>config.renderTimeThreshold&&(queueEvent.performance.timing.invalidRenderTime=queueEvent.performance.timing.renderTime,delete queueEvent.performance.timing.renderTime),navigation){switch(navigation.type){case 0:navType="NAVIGATE";break;case 1:navType="RELOAD";break;case 2:navType="BACKFORWARD";break;default:navType="UNKNOWN"}queueEvent.performance.navigation={type:navType,redirectCount:navigation.redirectCount}}context.post(queueEvent),moduleState.perfEventSent=!0,perfTimerId&&(clearInterval(perfTimerId),perfTimerId=null)}}function processPerformanceEntry(entry){var i,name=entry.name,type=entry.initiatorType,blacklist=performanceAlertCfg.blacklist,blacklistItem,isBlacklisted,resourceData;if(!(performanceAlertCfg.hasOwnProperty("maxAlerts")&&alertCount>=performanceAlertCfg.maxAlerts||performanceAlertCfg.hasOwnProperty("threshold")&&entry.duration<performanceAlertCfg.threshold||entry.transferSize&&entry.transferSize<entry.encodedBodySize||entry.responseStart===entry.responseEnd||performanceAlertCfg.resourceTypes.length>0&&-1===performanceAlertCfg.resourceTypes.indexOf(type))){for(isBlacklisted=!1,i=0;i<blacklist.length;i+=1)switch(typeof(blacklistItem=blacklist[i])){case"object":blacklistItem.cRegex||(blacklistItem.cRegex=new RegExp(blacklistItem.regex,blacklistItem.flags)),blacklistItem.cRegex.lastIndex=0,blacklistItem.cRegex.test(name)&&(isBlacklisted=!0);break;case"string":-1!==name.indexOf(blacklistItem)&&(isBlacklisted=!0)}isBlacklisted||(alertCount+=1,resourceData={urlNormalized:context.normalizeUrl?context.normalizeUrl(name):name,url:name,initiator:type,duration:Math.round(entry.duration),responseEnd:Math.round(entry.responseEnd)},void 0!==entry.transferSize&&(resourceData.transferSize=entry.transferSize,resourceData.bps=Math.round(entry.transferSize/entry.duration*1e3)),context.post({type:17,resourceData:resourceData}))}}function startPerformanceObserver(){var oldEntries;performanceAlertCfg.enabled&&"function"==typeof window.PerformanceObserver&&(performanceObserver=new window.PerformanceObserver((function(list,obs){utils.forEach(list.getEntries(),processPerformanceEntry)})),oldEntries=window.performance.getEntriesByType("resource"),setTimeout((function(){utils.forEach(oldEntries,processPerformanceEntry)})),performanceObserver.observe({entryTypes:["resource"]}))}return{init:function(){config=context.getConfig(),performanceAlertCfg=utils.mixin({},performanceAlertDefaultOptions,config.performanceAlert)},destroy:function(){config=null,perfTimerId&&(clearInterval(perfTimerId),perfTimerId=null),performanceObserver&&performanceObserver.disconnect()},onevent:function(event){if("object"==typeof event&&event.type)switch(event.type){case"load":moduleState.loadReceived=!0,processLoadEvent(event),moduleState.perfEventSent||perfTimerId||(perfTimerId=setInterval((function(){context.isInitialized()&&postPerformanceEvent(window)}),utils.getValue(config,"delay",2e3))),startPerformanceObserver();break;case"screenview_load":moduleState.perfEventSent||postPerformanceEvent(window);break;case"unload":moduleState.unloadReceived=!0,moduleState.perfEventSent||postPerformanceEvent(window)}},onmessage:function(msg){}}})),TLT.addModule("replay",(function(context){"use strict";var utils=context.utils,currOrientation=0,savedTouch={scale:0,timestamp:0},pastEvents={},lastEventId=null,tmpQueue=[],eventCounter=0,firstDOMCaptureEventFlag=!0,curClientState=null,pastClientState=null,errorCount=0,visitOrder="",lastVisit="",lastPointerDownTarget=null,pageLoadTime=(new Date).getTime(),pageDwellTime=0,prevWebEvent=null,defaultRootScreenName="root",rootScreenviewName,viewEventStart=null,viewTimeStart=null,scrollViewStart=null,scrollViewEnd=null,nextScrollViewStart=null,lastFocusEvent={inFocus:!1},lastClickEvent=null,replayConfig=context.getConfig()||{},viewPortWidthHeightLimit=utils.getValue(replayConfig,"viewPortWidthHeightLimit",1e4),deviceScale=1,previousDeviceScale=1,extendGetItem,loggedExceptions={},mousemoveConfig=utils.getValue(replayConfig,"mousemove")||{},sessionStart=context.getSessionStart(),sampleRate=mousemoveConfig.sampleRate,ignoreRadius=mousemoveConfig.ignoreRadius,lastMouseEvent=null,mousemoveQueue=[],mousemoveElements=[],elMap={},mousemoveCount=0,mousemoveLimit=1e3,maxInactivity=0,lazyloadingEl=[],pendingQueue=[],currVisibility="visible"===document.visibilityState;function resetVisitedCounts(){var control;for(control in pastEvents)pastEvents.hasOwnProperty(control)&&(pastEvents[control].visitedCount=0)}function isTargetClickable(target){var clickable=!1,clickableInputTypes="|button|image|submit|reset|",subType=null;if("object"!=typeof target||!target.type)return clickable;switch(target.type.toLowerCase()){case"input":subType="|"+(target.subType||"")+"|",clickable=-1!==clickableInputTypes.indexOf(subType.toLowerCase());break;case"select":case"textarea":clickable=!1;break;default:clickable=!0}return clickable}function parentElements(node){var parents=[];for(node=node.parentNode;node;)parents.push(node),node=node.parentNode;return parents}function getParentLink(parents){return utils.some(parents,(function(node){var tagName=utils.getTagName(node);return"a"===tagName||"button"===tagName?node:null}))}function getTlEvent(webEvent){var tlEvent=webEvent.type,target=webEvent.target;if("blur"===(tlEvent="string"==typeof tlEvent?tlEvent.toLowerCase():"unknown")&&(tlEvent="focusout"),"change"===tlEvent)if("INPUT"===target.type)switch(target.subType){case"text":case"date":case"time":tlEvent=target.subType+"Change";break;default:tlEvent="valueChange"}else tlEvent="TEXTAREA"===target.type?"textChange":"valueChange";return tlEvent}function findSelector(selector,documents,nodes){var i,el,doc;if(document.querySelector(selector))return!0;for(i=0;i<documents.length;i++)if((doc=documents[i]).querySelector(selector))return!0;for(i=0;i<nodes.length;i++)if((el=nodes[i]).querySelector(selector))return!0;return!1}function mutationDomCapture(records,documents,nodes){var i,selector,exists,dualSnapshot,queryStatus,lastStatus,pendingEvent,config,timerId;for(i=0;i<pendingQueue.length;i++)selector=(pendingEvent=pendingQueue[i]).delayUntil.selector,exists=utils.getValue(pendingEvent.delayUntil,"exists",!0),dualSnapshot=pendingEvent.delayUntil.dualSnapshot||!1,queryStatus=findSelector(selector,documents,nodes),lastStatus=pendingEvent.lastStatus||!1,config=pendingEvent.config||{},timerId=pendingEvent.timerId,(!0===exists&&!0===queryStatus&&!1===lastStatus||!1===exists&&!1===queryStatus&&!0===lastStatus||!0===dualSnapshot&&!0===queryStatus&&!1===lastStatus||!0===dualSnapshot&&!1===queryStatus&&!0===lastStatus)&&(context.performDOMCapture(document,config),dualSnapshot&&!1!==queryStatus||(pendingQueue.splice(i--,1),0===pendingQueue.length&&TLT.registerMutationCallback(mutationDomCapture,!1),timerId&&clearTimeout(timerId))),pendingEvent.lastStatus=queryStatus}function onMutationTimeout(dcid){var i,pendingEvent,config;for(i=0;i<pendingQueue.length;i+=1)(config=(pendingEvent=pendingQueue[i]).config||{}).dcid===dcid&&(context.performDOMCapture(document,config),pendingQueue.splice(i--,1),0===pendingQueue.length&&TLT.registerMutationCallback(mutationDomCapture,!1))}function scheduleDOMCapture(root,config,delay){var dcid=null,event;return root?((config=config||{}).eventOn=firstDOMCaptureEventFlag,firstDOMCaptureEventFlag=!1,delay?(dcid="dcid-"+utils.getSerialNumber()+"."+(new Date).getTime()+"s","object"==typeof delay?(config.dcid=dcid,event={config:config,delayUntil:delay,lastStatus:!1},pendingQueue.push(event),TLT.registerMutationCallback(mutationDomCapture,!0),void 0!==delay.timeout&&delay.timeout>=0&&(event.timerId=window.setTimeout((function(){onMutationTimeout(dcid)}),delay.timeout))):window.setTimeout((function(){config.dcid=dcid,context.performDOMCapture(root,config)}),delay)):(delete config.dcid,dcid=context.performDOMCapture(root,config)),dcid):dcid}function isScreenviewBlacklisted(dcScreenviewBlacklist,screenviewName){var i,len,screenview,targetScreenview;for(i=0,len=dcScreenviewBlacklist.length;i<len;i+=1)switch(screenview=dcScreenviewBlacklist[i],targetScreenview=screenviewName&&0===screenviewName.indexOf("#")?location.pathname+screenviewName:void 0===screenviewName||"root"===screenviewName?location.pathname+location.hash:screenviewName,targetScreenview=context.normalizeUrl(targetScreenview),typeof screenview){case"object":if(screenview.cRegex||(screenview.cRegex=new RegExp(screenview.regex,screenview.flags)),screenview.cRegex.lastIndex=0,screenview.cRegex.test(targetScreenview))return!0;break;case"string":if(screenview===targetScreenview)return!0}return!1}function logMousemove(){var limitReached=!1,msg;if(mousemoveConfig.enabled&&!window.hasOwnProperty("ontouchstart")&&0!==mousemoveQueue.length)return mousemoveCount>=1e3&&(limitReached=!0),msg={type:18,mousemove:{elements:mousemoveElements.slice(0),data:mousemoveQueue.slice(0),config:{ignoreRadius:mousemoveConfig.ignoreRadius,sampleRate:mousemoveConfig.sampleRate},limitReached:limitReached,maxInactivity:maxInactivity}},context.post(msg),mousemoveElements.length=0,mousemoveQueue.length=0,elMap={},maxInactivity=0,msg}function addDOMCapture(eventType,target,screenviewName){var i,j,capture=!1,captureConfig={},dcEnabled=!1,dcTrigger,dcTriggerList,dcid=null,delay=0,len,screenview,screenviews,screenviewsLen,dcScreenviewBlacklist;if(!eventType||!target&&!screenviewName)return dcid;if(!target&&"load"!==eventType&&"unload"!==eventType)return dcid;if(replayConfig=context.getConfig()||{},!(dcEnabled=utils.getValue(replayConfig,"domCapture.enabled",!1))||utils.isLegacyIE)return dcid;if(isScreenviewBlacklisted(dcScreenviewBlacklist=utils.getValue(replayConfig,"domCapture.screenviewBlacklist",[]),screenviewName))return dcid;for(i=0,len=(dcTriggerList=utils.getValue(replayConfig,"domCapture.triggers")||[]).length;!capture&&i<len;i+=1){if((dcTrigger=dcTriggerList[i]).event===eventType)if("load"===eventType||"unload"===eventType)if(dcTrigger.screenviews)for(j=0,screenviewsLen=(screenviews=dcTrigger.screenviews).length;!capture&&j<screenviewsLen;j+=1)switch(typeof(screenview=screenviews[j])){case"object":screenview.cRegex||(screenview.cRegex=new RegExp(screenview.regex,screenview.flags)),screenview.cRegex.lastIndex=0,capture=screenview.cRegex.test(screenviewName);break;case"string":capture=screenview===screenviewName}else capture=!0;else capture=!dcTrigger.targets||-1!==utils.matchTarget(dcTrigger.targets,target);"change"===dcTrigger.event&&dcTrigger.delayUntil&&(lazyloadingEl=lazyloadingEl.concat(dcTrigger.targets))}return capture&&(delay=dcTrigger.delay||dcTrigger.delayUntil||("load"===dcTrigger.event?7:0),captureConfig.forceFullDOM=!!dcTrigger.fullDOMCapture,(dcid=scheduleDOMCapture(window.document,captureConfig,delay))&&logMousemove()),dcid}function createQueueEvent(options){var control,target=utils.getValue(options,"webEvent.target",{}),targetType=target.type,targetSubtype=target.subType||"",tlType=utils.getTlType(target),parents=parentElements(utils.getValue(target,"element")),parentLinkNode=null,eventSubtype=utils.getValue(options,"webEvent.subType",null);return control={timestamp:utils.getValue(options,"webEvent.timestamp",0),type:4,target:{id:target.id||"",idType:target.idType,name:target.name,tlType:tlType,type:targetType,position:{width:utils.getValue(target,"size.width"),height:utils.getValue(target,"size.height")},currState:options.currState||null},event:{tlEvent:getTlEvent(utils.getValue(options,"webEvent")),type:utils.getValue(options,"webEvent.type","UNKNOWN")}},targetSubtype&&(control.target.subType=targetSubtype),"number"==typeof options.dwell&&options.dwell>0&&(control.target.dwell=options.dwell),"number"==typeof options.visitedCount&&(control.target.visitedCount=options.visitedCount),void 0!==options.prevState&&(control.prevState=options.prevState),eventSubtype&&(control.event.subType=eventSubtype),parentLinkNode=getParentLink(parents),control.target.isParentLink=!!parentLinkNode,parentLinkNode&&(parentLinkNode.href&&(control.target.currState=control.target.currState||{},control.target.currState.href=control.target.currState.href||parentLinkNode.href),parentLinkNode.value&&(control.target.currState=control.target.currState||{},control.target.currState.value=control.target.currState.value||parentLinkNode.value),(parentLinkNode.innerText||parentLinkNode.textContent)&&(control.target.currState=control.target.currState||{},control.target.currState.innerText=utils.trim(control.target.currState.innerText||parentLinkNode.innerText||parentLinkNode.textContent))),utils.isUndefOrNull(control.target.currState)&&delete control.target.currState,utils.isUndefOrNull(control.target.name)&&delete control.target.name,control}function postUIEvent(queueEvent){context.post(queueEvent)}function postEventQueue(queue){var i,j,len=queue.length,e1,e2,tmp,ignoredEvents={mouseout:!0,mouseover:!0},results=[];for(i=0;i<len;i+=1)if(e1=queue[i])if(ignoredEvents[e1.event.type])results.push(e1);else{for(j=i+1;j<len&&queue[j]&&ignoredEvents[queue[j].event.type];j+=1);j<len&&(e2=queue[j])&&e1.target.id===e2.target.id&&e1.event.type!==e2.event.type&&("click"===e1.event.type&&(tmp=e1,e1=e2,e2=tmp),"click"===e2.event.type?(e1.target.position=e2.target.position,i+=1):"blur"===e2.event.type&&(e1.target.dwell=e2.target.dwell,e1.target.visitedCount=e2.target.visitedCount,e1.focusInOffset=e2.focusInOffset,e1.target.position=e2.target.position,i+=1),queue[j]=null,queue[i]=e1),results.push(queue[i])}for(e1=results.shift();e1;e1=results.shift())context.post(e1);queue.splice(0,queue.length)}function handleError(webEvent){var errorMessage=null,i,msg=utils.getValue(webEvent,"nativeEvent.message"),url=utils.getValue(webEvent,"nativeEvent.filename"),line=utils.getValue(webEvent,"nativeEvent.lineno"),errorObject=utils.getValue(webEvent,"nativeEvent.error");"string"==typeof msg&&(line=line||-1,i=errorObject&&errorObject.stack?errorObject.stack.toString():(msg+" "+url+" "+line).toString(),loggedExceptions[i]?loggedExceptions[i].exception.repeats=loggedExceptions[i].exception.repeats+1:(errorMessage={type:6,exception:{description:msg,url:url,line:line}},context.post(errorMessage),loggedExceptions[i]={exception:{description:msg,url:url,line:line,repeats:1}}),errorCount+=1)}function addToTmpQueue(webEvent,id){tmpQueue.push(createQueueEvent({webEvent:webEvent,id:id,currState:utils.getValue(webEvent,"target.state")}))}function handleBlur(id,webEvent,doNotConvert){var convertToBlur=!1,dcid,lastQueueEvent,targetState;id&&0!==tmpQueue.length&&((targetState="blur"===(webEvent=webEvent||(pastEvents[id]?pastEvents[id].webEvent:{})).type||"change"===webEvent.type?utils.getValue(webEvent,"target.state",{}):webEvent.target&&utils.getTargetState(webEvent.target.element)||{})&&targetState.disabled&&(doNotConvert=!0),lastQueueEvent=tmpQueue[tmpQueue.length-1],pastEvents[id]?(lastQueueEvent.focusInOffset=pastEvents[id].focusInOffset,lastQueueEvent.target.visitedCount=pastEvents[id].visitedCount,pastEvents[id].focus&&(pastEvents[id].dwell=Number(new Date)-pastEvents[id].focus,lastQueueEvent.target.dwell=pastEvents[id].dwell),pastEvents[id].processedChange||!pastEvents[id].prevState||doNotConvert||utils.isEqual(pastEvents[id].prevState,targetState)||(webEvent.type="change",lastQueueEvent.event.type=webEvent.type,lastQueueEvent.event.tlEvent=getTlEvent(webEvent),lastQueueEvent.target.prevState=pastEvents[id].prevState,lastQueueEvent.target.currState=targetState)):pastEvents[id]={},"click"===lastQueueEvent.event.type?isTargetClickable(lastQueueEvent.target)||(lastQueueEvent.target.currState=targetState,convertToBlur=!0):"focus"===lastQueueEvent.event.type&&(convertToBlur=!0),convertToBlur&&!doNotConvert&&(lastQueueEvent.event.type="blur",lastQueueEvent.event.tlEvent="focusout"),lastQueueEvent.dcid||(dcid=addDOMCapture(lastQueueEvent.event.type,webEvent.target))&&(lastQueueEvent.dcid=dcid),doNotConvert||(lastFocusEvent.inFocus=!1),pastEvents[id].prevState=targetState?utils.mixin({},targetState):targetState,postEventQueue(tmpQueue))}function handleFocus(id,webEvent){var tmpQueueLength=tmpQueue.length,tmpQueueEvent=tmpQueueLength?tmpQueue[tmpQueueLength-1]:null;lastFocusEvent.inFocus&&lastFocusEvent.target.id===id?tmpQueueEvent&&tmpQueueEvent.target.id===id||(addToTmpQueue(webEvent,id),pastEvents[id].processedChange=!1,pastEvents[id].processedClick=!1):(lastFocusEvent.inFocus&&handleBlur(lastFocusEvent.target.id,lastFocusEvent),(lastFocusEvent=webEvent).inFocus=!0,pastEvents[id]||(pastEvents[id]={}),pastEvents[id].focus=lastFocusEvent.dwellStart=Number(new Date),pastEvents[id].focusInOffset=viewTimeStart?lastFocusEvent.dwellStart-Number(viewTimeStart):-1,"focus"===webEvent.type?pastEvents[id].prevState=utils.getValue(webEvent,"target.state"):"click"!==webEvent.type||pastEvents[id].prevState||(pastEvents[id].prevState=utils.getValue(webEvent,"target.state"),!pastEvents[id].prevState||"checkbox"!==webEvent.target.subType&&"radio"!==webEvent.target.subType||(pastEvents[id].prevState.checked=!pastEvents[id].prevState.checked)),pastEvents[id].visitedCount=pastEvents[id].visitedCount+1||1,pastEvents[id].webEvent=webEvent,pastEvents[id].processedChange=!1,pastEvents[id].processedClick=!1,addToTmpQueue(webEvent,id))}function checkQueue(id,webEvent){var pendingInteractionPosted=!1,prevID,tmpQueueLength=tmpQueue.length,tmpQueueEvent=tmpQueueLength?tmpQueue[tmpQueueLength-1]:null;return tmpQueueEvent?((prevID=tmpQueueEvent.target.id)!==id&&"selectList"!==tmpQueueEvent.target.tltype&&("focus"!==webEvent.type&&"click"!==webEvent.type&&"change"!==webEvent.type&&"blur"!==webEvent.type&&"unload"!==webEvent.type||(handleBlur(prevID),pendingInteractionPosted=!0)),prevID===id&&("click"===webEvent.type&&pastEvents[id].processedClick||"change"===webEvent.type&&pastEvents[id].processedChange||"pointerup"===webEvent.type&&pastEvents[id].processedClick&&utils.getValue(webEvent.target,"state.disabled",!1))&&(handleBlur(prevID,null,!0),pendingInteractionPosted=!0),pendingInteractionPosted):pendingInteractionPosted}function handleChange(id,webEvent){var tmpQueueEvent;handleFocus(id,webEvent),(tmpQueueEvent=tmpQueue[tmpQueue.length-1]).event.type="change",tmpQueueEvent.event.tlEvent=getTlEvent(webEvent),tmpQueueEvent.target.currState=webEvent.target.state,pastEvents[id].prevState&&(tmpQueueEvent.target.prevState=pastEvents[id].prevState),pastEvents[id].webEvent=webEvent,pastEvents[id].processedChange=!0,-1!==utils.matchTarget(lazyloadingEl,webEvent.target)&&handleBlur(id,webEvent)}function handleClick(id,webEvent){var tmpQueueEvent,nativeEvent;"select"===webEvent.target.type&&lastClickEvent&&lastClickEvent.target.id===id?lastClickEvent=null:(handleFocus(id,webEvent),"focus"===(tmpQueueEvent=tmpQueue[tmpQueue.length-1]).event.type&&(tmpQueueEvent.event.type="click",tmpQueueEvent.event.tlEvent=getTlEvent(webEvent)),(nativeEvent=webEvent.nativeEvent)&&(!window.MouseEvent||!(nativeEvent instanceof MouseEvent&&0===nativeEvent.detail)||window.PointerEvent&&nativeEvent instanceof PointerEvent&&""!==nativeEvent.pointerType)&&(tmpQueueEvent.target.position.relXY=utils.getValue(webEvent,"target.position.relXY")),pastEvents[id].processedChange||(pastEvents[id].webEvent=webEvent),pastEvents[id].processedClick=!0,isTargetClickable(webEvent.target)&&handleBlur(id,webEvent),lastClickEvent=webEvent)}function handlePointerClick(id,webEvent){var currPointerTarget=id;if(utils.getValue(webEvent,"target.element.disabled",!1))switch(webEvent.type){case"pointerdown":lastPointerDownTarget=currPointerTarget;break;case"pointerup":currPointerTarget===lastPointerDownTarget&&(webEvent.type="click",handleClick(id,webEvent)),lastPointerDownTarget=null}}function handleMousemove(webEvent){var currentEvent,diff=0,distance=0,el,id,relXY,x,y;if(mousemoveConfig.enabled&&!window.hasOwnProperty("ontouchstart")&&!(mousemoveCount>=1e3)){if(currentEvent={element:{id:webEvent.target.id,idType:webEvent.target.idType},x:webEvent.position.x,y:webEvent.position.y,offset:webEvent.timestamp-sessionStart},null!==lastMouseEvent){if(diff=currentEvent.offset-lastMouseEvent.offset,sampleRate&&diff<sampleRate)return;if(x=Math.abs(currentEvent.x-lastMouseEvent.x),y=Math.abs(currentEvent.y-lastMouseEvent.y),ignoreRadius&&(distance=x>y?x:y)<ignoreRadius)return;diff>maxInactivity&&(maxInactivity=diff)}el=JSON.stringify(currentEvent.element),void 0===(id=elMap[el])&&(mousemoveElements.push(currentEvent.element),id=mousemoveElements.length-1,elMap[el]=id),relXY=utils.getValue(webEvent,"target.position.relXY").split(","),mousemoveQueue.push([id,relXY[0],relXY[1],currentEvent.offset]),mousemoveCount+=1,lastMouseEvent=currentEvent}}function handleOrientationChange(webEvent){var newOrientation=webEvent.orientation,orientationChangeEvent;postUIEvent({type:4,event:{type:"orientationchange"},target:{prevState:{orientation:currOrientation,orientationMode:utils.getOrientationMode(currOrientation)},currState:{orientation:newOrientation,orientationMode:utils.getOrientationMode(newOrientation)}}}),currOrientation=newOrientation}function handleVisibilityChange(webEvent){var newVisibility="visible"===document.visibilityState,msg={type:4,event:{type:"visibilitychange"},target:{prevState:{visible:currVisibility},currState:{visible:newVisibility}}},dcid;(dcid=addDOMCapture(webEvent.type,webEvent.target))&&(msg.dcid=dcid),postUIEvent(msg),currVisibility=newVisibility}function isDuplicateTouch(touchState){var result=!1;return touchState?result=savedTouch.scale===touchState.scale&&Math.abs((new Date).getTime()-savedTouch.timestamp)<500:result}function saveTouchState(touchState){savedTouch.scale=touchState.scale,savedTouch.rotation=touchState.rotation,savedTouch.timestamp=(new Date).getTime()}function getPinchType(){var s,pinchType;return s=deviceScale-previousDeviceScale,pinchType=isNaN(s)?"INVALID":s<0?"CLOSE":s>0?"OPEN":"NONE"}function getClientStateMessage(webEvent){var documentElement=document.documentElement||{},documentBody=document.body||{},screen=window.screen,screenWidth=screen.width,screenHeight=screen.height,deviceOrientation=utils.getValue(webEvent,"orientation",0),normalizedScreenWidth=utils.isiOS&&90===Math.abs(deviceOrientation)?screenHeight:screenWidth,msg={type:1,clientState:{pageWidth:Math.max(documentBody.clientWidth||0,documentElement.offsetWidth||0,documentElement.scrollWidth||0),pageHeight:Math.max(documentBody.clientHeight||0,documentElement.offsetHeight||0,documentElement.scrollHeight||0),viewPortWidth:window.innerWidth||documentElement.clientWidth,viewPortHeight:window.innerHeight||documentElement.clientHeight,viewPortX:Math.round(window.pageXOffset||(documentElement||documentBody).scrollLeft||0),viewPortY:Math.round(window.pageYOffset||(documentElement||documentBody).scrollTop||0),deviceOrientation:deviceOrientation,event:utils.getValue(webEvent,"type")}},clientState=msg.clientState,scaleWidth;return pastClientState=pastClientState||msg,"unload"===clientState.event&&clientState.viewPortHeight===clientState.pageHeight&&clientState.viewPortWidth===clientState.pageWidth&&pastClientState.clientState.viewPortHeight<clientState.viewPortHeight&&(clientState.viewPortHeight=pastClientState.clientState.viewPortHeight,clientState.viewPortWidth=pastClientState.clientState.viewPortWidth),clientState.viewPortY+clientState.viewPortHeight>clientState.pageHeight&&(clientState.viewPortY=clientState.pageHeight-clientState.viewPortHeight),clientState.viewPortY<0&&(clientState.viewPortY=0),scaleWidth=clientState.viewPortWidth?normalizedScreenWidth/clientState.viewPortWidth:1,clientState.deviceScale=scaleWidth.toFixed(3),clientState.viewTime=0,scrollViewStart&&scrollViewEnd&&(clientState.viewTime=scrollViewEnd.getTime()-scrollViewStart.getTime()),"scroll"===webEvent.type&&(clientState.viewPortXStart=pastClientState.clientState.viewPortX,clientState.viewPortYStart=pastClientState.clientState.viewPortY),msg}function sendClientState(){var cs;curClientState&&((cs=curClientState.clientState).viewPortHeight>0&&cs.viewPortHeight<viewPortWidthHeightLimit&&cs.viewPortWidth>0&&cs.viewPortWidth<viewPortWidthHeightLimit&&postUIEvent(curClientState),pastClientState=curClientState,curClientState=null,scrollViewStart=nextScrollViewStart||scrollViewStart,scrollViewEnd=null),sendClientState.timeoutId=0}function handleClientState(webEvent){var attentionMsg=null;if(!utils.isOperaMini)return curClientState=getClientStateMessage(webEvent),"scroll"===webEvent.type||"resize"===webEvent.type?(sendClientState.timeoutId&&window.clearTimeout(sendClientState.timeoutId),sendClientState.timeoutId=window.setTimeout(sendClientState,utils.getValue(replayConfig,"scrollTimeout",2e3))):"touchstart"===webEvent.type||"load"===webEvent.type?curClientState&&(previousDeviceScale=parseFloat(curClientState.clientState.deviceScale)):"touchend"===webEvent.type&&curClientState&&(deviceScale=parseFloat(curClientState.clientState.deviceScale),sendClientState()),"load"!==webEvent.type&&"unload"!==webEvent.type||("unload"===webEvent.type&&pageLoadTime&&((attentionMsg=utils.clone(curClientState)).clientState.event="attention",attentionMsg.clientState.viewTime=(new Date).getTime()-pageLoadTime),sendClientState(),attentionMsg&&(curClientState=attentionMsg,sendClientState())),curClientState}function handleTouchStart(webEvent){var fingerCount;2===utils.getValue(webEvent,"nativeEvent.touches.length",0)&&handleClientState(webEvent)}function handleTouchEnd(webEvent){var fingerCount,prevTouchState={},rotation=utils.getValue(webEvent,"nativeEvent.rotation",0)||utils.getValue(webEvent,"nativeEvent.touches[0].webkitRotationAngle",0),touchState=null,touchEndEvent={type:4,event:{type:"touchend"},target:{id:utils.getValue(webEvent,"target.id"),idType:utils.getValue(webEvent,"target.idType")}};2===(fingerCount=utils.getValue(webEvent,"nativeEvent.changedTouches.length",0)+utils.getValue(webEvent,"nativeEvent.touches.length",0))&&(handleClientState(webEvent),(touchState={rotation:rotation?rotation.toFixed(2):0,scale:deviceScale?deviceScale.toFixed(2):1}).pinch=getPinchType(),prevTouchState.scale=previousDeviceScale?previousDeviceScale.toFixed(2):1,touchEndEvent.target.prevState=prevTouchState,touchEndEvent.target.currState=touchState,postUIEvent(touchEndEvent))}function isDuplicateEvent(curr,prev){var propsToCompare=["type","name","target.id"],prop=null,i,len,duplicate=!0,DUPLICATE_EVENT_THRESHOLD_TIME=10,timeDiff=0,currTimeStamp=0,prevTimeStamp=0;if(!curr||!prev||"object"!=typeof curr||"object"!=typeof prev)return!1;for(i=0,len=propsToCompare.length;duplicate&&i<len;i+=1)if(prop=propsToCompare[i],utils.getValue(curr,prop)!==utils.getValue(prev,prop)){duplicate=!1;break}return duplicate&&(currTimeStamp=utils.getValue(curr,"timestamp"),prevTimeStamp=utils.getValue(prev,"timestamp"),isNaN(currTimeStamp)&&isNaN(prevTimeStamp)||(timeDiff=Math.abs(utils.getValue(curr,"timestamp")-utils.getValue(prev,"timestamp")),(isNaN(timeDiff)||timeDiff>10)&&(duplicate=!1))),duplicate}function defaultEventHandler(webEvent){var msg={type:4,event:{type:webEvent.type},target:{id:utils.getValue(webEvent,"target.id"),idType:utils.getValue(webEvent,"target.idType"),currState:utils.getValue(webEvent,"target.state")}},dcid;(dcid=addDOMCapture(webEvent.type,webEvent.target))&&(msg.dcid=dcid),postUIEvent(msg)}return{init:function(){tmpQueue=[]},destroy:function(){handleBlur(lastEventId),tmpQueue=[],sendClientState.timeoutId&&(window.clearTimeout(sendClientState.timeoutId),sendClientState.timeoutId=0)},onevent:function(webEvent){var id=null,returnObj=null,orientation,screenOrientation,loggedException,exception,errorMessage=null;if("object"==typeof webEvent&&webEvent.type){if(!isDuplicateEvent(webEvent,prevWebEvent)){switch(prevWebEvent=webEvent,id=utils.getValue(webEvent,"target.id"),pastEvents[id]||(pastEvents[id]={}),checkQueue(id,webEvent),webEvent.type){case"hashchange":break;case"focus":handleFocus(id,webEvent);break;case"blur":handleBlur(id,webEvent);break;case"pointerdown":case"pointerup":handlePointerClick(id,webEvent);break;case"click":handleClick(id,webEvent);break;case"change":handleChange(id,webEvent);break;case"orientationchange":handleOrientationChange(webEvent);break;case"touchstart":handleTouchStart(webEvent);break;case"touchend":handleTouchEnd(webEvent);break;case"loadWithFrames":TLT.logScreenviewLoad("rootWithFrames");break;case"load":currOrientation=webEvent.orientation,scrollViewStart=new Date,("number"!=typeof utils.getOrientationAngle()||utils.isAndroid)&&(screenOrientation=window.screen.width>window.screen.height?90:0,orientation=utils.getOrientationAngle(),Math.abs(orientation)===screenOrientation||180===orientation&&0===screenOrientation||270===orientation&&90===screenOrientation||(utils.isLandscapeZeroDegrees=!0,180===Math.abs(orientation)||0===Math.abs(orientation)?currOrientation=90:90!==Math.abs(orientation)&&270!==Math.abs(orientation)||(currOrientation=0))),setTimeout((function(){context.isInitialized()&&handleClientState(webEvent)}),100),rootScreenviewName=utils.getValue(replayConfig,"forceRootScreenview",!1)?"root":TLT.normalizeUrl(location.hash)||"root",TLT.logScreenviewLoad(rootScreenviewName);break;case"screenview_load":viewTimeStart=new Date,resetVisitedCounts(),returnObj=addDOMCapture("load",null,webEvent.name);break;case"screenview_unload":returnObj=addDOMCapture("unload",null,webEvent.name);break;case"resize":case"scroll":scrollViewEnd||(scrollViewEnd=new Date),nextScrollViewStart=new Date,handleClientState(webEvent);break;case"unload":for(loggedException in loggedExceptions)loggedExceptions.hasOwnProperty(loggedException)&&(exception=loggedExceptions[loggedException].exception).repeats>1&&(errorMessage={type:6,exception:exception},context.post(errorMessage));tmpQueue&&postEventQueue(tmpQueue),scrollViewEnd=new Date,handleClientState(webEvent),"root"!==rootScreenviewName&&TLT.normalizeUrl(location.hash)!==rootScreenviewName||TLT.logScreenviewUnload(rootScreenviewName);break;case"mousemove":handleMousemove(webEvent);break;case"error":handleError(webEvent);break;case"visibilitychange":handleVisibilityChange(webEvent);break;default:defaultEventHandler(webEvent)}return lastEventId=id,returnObj}prevWebEvent=webEvent}},onmessage:function(){}}})),function(){"use strict";var config,TLT=window.TLT,isChrome=/Chrome/.test(navigator.userAgent)&&/Google/.test(navigator.vendor);if(!TLT.utils.isLegacyIE){var changeTarget;"w3c"===TLT.getFlavor()&&TLT.utils.isLegacyIE&&(changeTarget="input, select, textarea, button");var actionList,actionListRegexString,regexString="(^(?!.*("+["/riuclass-utils!getetiquetabyview","/riuclass-utils!getetiquetabyviewpublico","/destinos-hoteles!infocodigos","/destinos-hoteles!infocodigosdestino","/destinos-hoteles!infocodigoshotel","/destinos-hoteles!infouriurlbyidrumbo","/ofertas!getpromociones","/json-utils!getetiqueta","/json-utils!getetiqueta","/destinos-hoteles!infocambionombrehotel","/destinos-hoteles!completo","/ofertas!getofertasmacro","/destinos-hoteles!gethabitacioneshotel","/destinos-hoteles!temporada","/json-utils!getpaises","/destinos-hoteles!datosuserwebmov","/ofertas!getofertashome","/json-utils!checkabtesting","/json-utils!getpaisestado","/riuclass-utils!puntosUsuario","/destinos-hoteles!filtrado","/json-utils!ghcb","/json-utils!getHabitacionesHotel","/json-utils!fiscalDocuments","/json-utils!provinces","/json-utils!countries","/cms!getAllEtiquetasByMultiplesPageEtiquetaKeyId","/json-utils!getInfoTripAdvisor","/json-utils!getUrl","/json-utils!hcb"].join("|")+").action).*.action|valorar-reserva|confirmar-reserva)";TLT.init({core:{blockedElements:[],modules:{overstat:{enabled:!0,events:[{name:"click",recurseFrames:!0},{name:"mousemove",recurseFrames:!0},{name:"mouseout",recurseFrames:!0},{name:"submit",recurseFrames:!0}]},performance:{enabled:!0,events:[{name:"load",target:window},{name:"unload",target:window}]},replay:{enabled:!0,events:[{name:"change",target:changeTarget,attachToShadows:!0,recurseFrames:!0},{name:"click",recurseFrames:!0},{name:"pointerdown",recurseFrames:!0},{name:"pointerup",recurseFrames:!0},{name:"hashchange",target:window},{name:"focus",target:changeTarget,recurseFrames:!0},{name:"blur",target:changeTarget,recurseFrames:!0},{name:"load",target:window},{name:"unload",target:window},{name:"resize",target:window},{name:"scroll",target:window},{name:"mousemove",recurseFrames:!0},{name:"orientationchange",target:window},{name:"touchend"},{name:"touchstart"},{name:"error",target:window},{name:"visibilitychange"}]},TLCookie:{enabled:!0},ajaxListener:{enabled:!0,events:[{name:"load",target:"window"},{name:"unload",target:"window"}]},improvedRenderTimes:{enabled:!0},stopPropagation:{enabled:!0},luceScriptVersion:{enabled:!0},getDataLayerVariable:{enabled:!0}},normalization:{urlFunction:function(urlOrPath){return urlOrPath}},sessionDataEnabled:!1,sessionData:{sessionValueNeedsHashing:!0,sessionQueryName:"sessionID",sessionQueryDelim:";",sessionCookieName:"jsessionid"},screenviewAutoDetect:!0,framesBlacklist:["#iframe1"]},services:{queue:{asyncReqOnUnload:isChrome,useBeacon:!0,queues:[{qid:"DEFAULT",endpoint:"//lib-eu-1.brilliantcollector.com/collector/collectorPost",maxEvents:30,timerInterval:3e5,maxSize:3e5,checkEndpoint:!0,endpointCheckTimeout:3e3}]},message:{privacy:[{targets:[{id:"tarjetaCli",idType:-1},{id:{regex:"tarjetaCli",flags:"im"},idType:-1},"[name='confirmarReservaFinalForm.tarjetaCli.tarjetaTradicional.cvc']"],maskType:3,exclude:!1}],privacyPatterns:[]},encoder:{gzip:{encode:"window.pako.gzip",defaultEncoding:"gzip"}},domCapture:{options:{maxMutations:100,maxLength:1e6,captureShadowDOM:!1,captureFrames:!0,removeScripts:!0,removeComments:!0},diffEnabled:!0},browser:{normalizeTargetToParentLink:!0,sizzleObject:"window.Sizzle",useCapture:!0},serializer:{json:{defaultToBuiltin:!0,parsers:["JSON.parse"],stringifiers:["JSON.stringify"]}}},modules:{overstat:{hoverThreshold:1e3},performance:{calculateRenderTime:!0,renderTimeThreshold:6e5},geolocation:{enabled:!1,triggers:[{event:"load"}]},replay:{domCapture:{enabled:!0,triggers:[{event:"click"},{event:"change"},{event:"load"},{event:"visibilitychange"}]},mousemove:{enabled:!0,sampleRate:200,ignoreRadius:3}},TLCookie:{appCookieWhitelist:[{regex:".*"}],tlAppKey:"df17fe674260479db21d7a01f1e45af9"},ajaxListener:{filters:[{url:{regex:regexString,flags:"i"},log:{responseData:!0}}]},getDataLayerVariable:{intervalTime:3e3,eventsToCapture:["finishDispo"]}}}),
/*!
    * Copyright (c) 2019 Acoustic, L.P. All rights reserved.
    *
    * NOTICE: This file contains material that is confidential and proprietary to
    * Acoustic, L.P. and/or other developers. No license is granted under any intellectual or
    * industrial property rights of Acoustic, L.P. except as may be provided in an agreement with
    * Acoustic, L.P. Any unauthorized copying or distribution of content from this file is
    * prohibited.
    *
    * README
    * https://github.com/ibm-watson-cxa/UICaptureSDK-Modules/tree/master/AjaxListener/README.md
    */
TLT.addModule("ajaxListener",(function(context){var moduleConfig={},moduleLoaded=!1,nativeXHROpen,utils=context.utils;function getMatchingFilter(xhr){var i,len,filter={},filters=moduleConfig.filters,matchFound,url=xhr.tListener.url,method=xhr.tListener.method,status=xhr.status.toString();if(!filters||!filters.length)return filter;for(i=0,len=filters.length,matchFound=!1;!matchFound&&i<len;i+=1)matchFound=!0,(filter=filters[i]).url&&(matchFound=filter.url.cRegex.test(url)),matchFound&&filter.method&&(matchFound=filter.method.cRegex.test(method)),matchFound&&filter.status&&(matchFound=filter.status.cRegex.test(status));return matchFound||(filter=null),filter}function extractResponseHeaders(headers){var headersObj={},i,len,header,name,value;for(i=0,len=(headers=headers.split(/[\r\n]+/)).length;i<len;i+=1)name=(header=headers[i].split(": "))[0],value=utils.rtrim(header[1]),name&&name.length&&(headersObj[name]=value);return headersObj}function logXHR(xhr,logOptions){var msg={type:5,customEvent:{name:"ajaxListener",data:{}}},dummyLink,xhrMsg=msg.customEvent.data,respText;if(xhr){if((dummyLink=document.createElement("a")).href=xhr.tListener.url,xhrMsg.originalURL=dummyLink.host+("/"===dummyLink.pathname[0]?"":"/")+dummyLink.pathname,xhrMsg.requestURL=context.normalizeUrl?context.normalizeUrl(xhrMsg.originalURL):xhrMsg.originalURL,xhrMsg.description="Full Ajax Monitor "+xhrMsg.requestURL,xhrMsg.method=xhr.tListener.method,xhrMsg.status=xhr.status,xhrMsg.statusText=xhr.statusText||"",xhrMsg.async=xhr.tListener.async,xhrMsg.ajaxResponseTime=xhr.tListener.end-xhr.tListener.start,logOptions.requestHeaders&&(xhrMsg.requestHeaders=xhr.tListener.reqHeaders),logOptions.requestData&&"string"==typeof xhr.tListener.reqData&&!xhr.tListener.isSystemXHR)try{xhrMsg.request=JSON.parse(xhr.tListener.reqData)}catch(e1){xhrMsg.request=xhr.tListener.reqData}if(logOptions.responseHeaders&&(xhrMsg.responseHeaders=extractResponseHeaders(xhr.getAllResponseHeaders())),logOptions.responseData){if(void 0===xhr.responseType?respText=xhr.responseText:""===xhr.responseType||"text"===xhr.responseType?respText=xhr.response:"json"===xhr.responseType?xhrMsg.response=xhr.response:xhrMsg.response=typeof xhr.response,respText)try{xhrMsg.response=JSON.parse(respText)}catch(e2){xhrMsg.response=respText}xhr.responseType&&(xhrMsg.responseType=xhr.responseType)}context.post(msg)}}function processXHR(xhr){var filter,logOptions={requestHeaders:!1,requestData:!1,responseHeaders:!1,responseData:!1};(filter=getMatchingFilter(xhr))&&(filter.log&&(logOptions=filter.log),logXHR(xhr,logOptions))}function readyStateChangeHandler(event){var xhr,readyState;event&&event.target&&4===(readyState=(xhr=event.target).readyState)&&(xhr.removeEventListener("readystatechange",readyStateChangeHandler),xhr.tListener.end=Date.now(),processXHR(xhr))}function hookSetRequestHeader(xhr){var savedSetRequestHeader=xhr.setRequestHeader;xhr.setRequestHeader=function(header,value){var xhr=this,tListener=xhr.tListener;return header&&header.length&&(tListener.reqHeaders[header]=value),savedSetRequestHeader.apply(xhr,arguments)}}function hookSend(xhr){var savedSend=xhr.send;xhr.send=function(data){var xhr=this,tListener=xhr.tListener;return data&&(tListener.reqData=data),tListener.start=Date.now(),savedSend.apply(xhr,arguments)}}function isSystemXHR(url){var i,queueServiceConfig,queues;for(queues=(queueServiceConfig=TLT.getServiceConfig("queue")).queues||[],i=0;i<queues.length;i+=1)if(queues[i].endpoint&&-1!==url.indexOf(queues[i].endpoint))return!0;return!1}function xhrOpenHook(method,url,async){var xhr=this;return moduleLoaded&&(xhr.addEventListener("readystatechange",readyStateChangeHandler),xhr.tListener={method:method,url:url,async:void 0===async||!!async,reqHeaders:{},isSystemXHR:isSystemXHR(url)},hookSetRequestHeader(xhr),hookSend(xhr)),nativeXHROpen.apply(xhr,arguments)}function addXHRHook(){XMLHttpRequest&&(nativeXHROpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=xhrOpenHook)}function cacheRegex(obj){obj&&obj.regex&&(obj.cRegex=new RegExp(obj.regex,obj.flags))}function processConfig(config){var i,len,filter,filters=[];for(config&&config.filters&&(filters=config.filters),i=0,len=filters.length;i<len;i+=1)filter=filters[i],utils.forEach([filter.url,filter.method,filter.status],cacheRegex)}return{init:function(){processConfig(moduleConfig=context.getConfig())},destroy:function(){moduleLoaded=!1},onevent:function(webEvent){switch(webEvent.type){case"load":addXHRHook(),moduleLoaded=!0;break;case"unload":moduleLoaded=!1}},version:"1.1.4"}})),TLT.addModule("improvedRenderTimes",(function(context){try{if(!window.performance.timing)return!1;var getTiming=function(){var perfData=window.performance.timing,maxTresholdInMilis=1e6,performanceTimeObject={_01_redirectTime:perfData.redirectEnd<perfData.redirectStart?0:perfData.redirectEnd-perfData.redirectStart,_01_unloadTime:perfData.unloadEventEnd<perfData.unloadEventStart?0:perfData.unloadEventEnd-perfData.unloadEventStart,_02_appCacheTime:perfData.domainLookupStart<perfData.fetchStart?0:perfData.domainLookupStart-perfData.fetchStart,_03_DnsTime:perfData.domainLookupEnd<perfData.domainLookupStart?0:perfData.domainLookupEnd-perfData.domainLookupStart,_04_TcpTime:perfData.connectEnd<perfData.connectStart?0:perfData.connectEnd-perfData.connectStart,_05_requestTime:perfData.responseStart<perfData.requestStart?0:perfData.responseStart-perfData.requestStart,_06_responseTime:perfData.responseEnd<perfData.responseStart?0:perfData.responseEnd-perfData.responseStart,_07_processingTime:perfData.loadEventStart<perfData.domLoading?0:perfData.loadEventStart-perfData.domLoading,isCache:perfData.fetchStart==perfData.requestStart,domLoadingToDomInteractive:perfData.domInteractive<perfData.domLoading?0:perfData.domInteractive-perfData.domLoading,domInteractiveToDomContentLoadedEventStart:perfData.domContentLoadedEventStart<perfData.domInteractive?0:perfData.domContentLoadedEventStart-perfData.domInteractive,domContentLoadedEventStartToDomContentLoadedEventEnd:perfData.domContentLoadedEventEnd<perfData.domContentLoadedEventStart?0:perfData.domContentLoadedEventEnd-perfData.domContentLoadedEventStart,domContentLoadedEventEndToDomComplete:perfData.domComplete<perfData.domContentLoadedEventEnd?0:perfData.domComplete-perfData.domContentLoadedEventEnd,domCompleteToLoadEventStart:perfData.loadEventStart<perfData.domComplete?0:perfData.loadEventStart-perfData.domComplete};return performanceTimeObject._01_redirectTimeIsOutlier=performanceTimeObject._01_redirectTime>1e6,performanceTimeObject._01_unloadTimeIsOutlier=performanceTimeObject._01_unloadTime>1e6,performanceTimeObject._02_appCacheTimeIsOutlier=performanceTimeObject._02_appCacheTime>1e6,performanceTimeObject._03_DnsTimeIsOutlier=performanceTimeObject._03_DnsTime>1e6,performanceTimeObject._04_TcpTimeIsOutlier=performanceTimeObject._04_TcpTime>1e6,performanceTimeObject._05_requestTimeIsOutlier=performanceTimeObject._05_requestTime>1e6,performanceTimeObject._06_responseTimeIsOutlier=performanceTimeObject._06_responseTime>1e6,performanceTimeObject._07_processingTimeIsOutlier=performanceTimeObject._07_processingTime>1e6,performanceTimeObject},sendTimingWithlogCutomEvent=function(){TLT&&TLT.isInitialized()&&(TLT.logCustomEvent("improved_render_times",{improved_render_times:getTiming(),description:"Improved render times"}),TLT.flushAll())},sendTimingWithContextQueue=function(){var customMsg={type:5,customEvent:{name:"improved_render_times",data:{improved_render_times:getTiming()}}};context.post(customMsg)}}catch(e){}return{init:function(){"complete"===document.readyState?sendTimingWithContextQueue():window.addEventListener?window.addEventListener("load",sendTimingWithlogCutomEvent,!1):window.attachEvent&&window.attachEvent("onload",sendTimingWithlogCutomEvent)},destroy:function(){}}})),TLT.addModule("stopPropagation",(function(context){return{init:function(){var stopImmediatePropagation,stopPropagation;context.utils.isLegacyIE||(Event=Event||window.event,Event.prototype.stopPropagation=(stopPropagation=Event.prototype.stopPropagation,function(){stopPropagation.call(this),TLT.processDOMEvent(this)}),Event.prototype.stopImmediatePropagation=(stopImmediatePropagation=Event.prototype.stopImmediatePropagation,function(){stopImmediatePropagation.call(this),TLT.processDOMEvent(this)}))},destroy:function(){}}})),TLT.addModule("luceScriptVersion",(function(context){window.TLT_LUCECEM_VERSION=function(){var info={lucecem:{version:"1.0.0",date:"2020-11-12",env:"production"},tealeaf:{version:"6.0.0.1960-w3c"},toString:function(){return"-- USIDK LuceCEM v"+info.lucecem.version+" - "+info.lucecem.date+" / UISDK Tealeaf v"+info.tealeaf.version+" / "+info.lucecem.env+" --"}};return info};var addLuceScriptVersionmessage=function(){if(TLT&&TLT.isInitialized()){var info=TLT_LUCECEM_VERSION();TLT.logCustomEvent("LuceScriptversion",{script_version:info.toString(),description:"Luce Script v"+info.lucecem.version})}};return{init:function(){"complete"===document.readyState?addLuceScriptVersionmessage():window.addEventListener?window.addEventListener("load",addLuceScriptVersionmessage,!1):window.attachEvent&&window.attachEvent("onload",addLuceScriptVersionmessage)},destroy:function(){}}})),TLT.addModule("getDataLayerVariable",(function(context){var intervalTime,eventsToCapture,intervalId=-1,sentEventIds=[];function pollDataLayerVariable(){var message=[];if(TLT&&TLT.isInitialized()&&window.dataLayer)for(let eventIndex=0;eventIndex<window.dataLayer.length;eventIndex++){const event=window.dataLayer[eventIndex];-1!=eventsToCapture.indexOf(event.event)&&-1==sentEventIds.indexOf(event["gtm.uniqueEventId"])&&(message.push(event),sentEventIds.push(event["gtm.uniqueEventId"]))}return message.length>0&&(TLT.logCustomEvent("dataLayerVariable",{dataLayerVariable:message,description:"DataLayerVariable"}),TLT.flushAll(),!0)}var getDataLayerVariable=function(){try{pollDataLayerVariable()||(intervalId=window.setInterval(pollDataLayerVariable,intervalTime))}catch(e){}},processConfig=function(config){intervalTime=config.intervalTime||3e3,eventsToCapture=config.eventsToCapture||[]};return{init:function(){processConfig(context.getConfig()),window.addEventListener?window.addEventListener("load",getDataLayerVariable,!1):window.attachEvent&&window.attachEvent("onload",getDataLayerVariable)},destroy:function(){clearInterval(intervalId)}}}))}}();